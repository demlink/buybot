var Zi=Object.defineProperty,Ji=Object.defineProperties;var ji=Object.getOwnPropertyDescriptors;var wn=Object.getOwnPropertySymbols;var $i=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable;var ze=Math.pow,Ln=(p,e,t)=>e in p?Zi(p,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[e]=t,q=(p,e)=>{for(var t in e||(e={}))$i.call(e,t)&&Ln(p,t,e[t]);if(wn)for(var t of wn(e))eo.call(e,t)&&Ln(p,t,e[t]);return p},Se=(p,e)=>Ji(p,ji(e));var N=(p,e,t)=>new Promise((n,i)=>{var r=c=>{try{a(t.next(c))}catch(u){i(u)}},o=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(r,o);a((t=t.apply(p,e)).next())});import{PublicKey as Jt,Transaction as Ge}from"@solana/web3.js";import Bt from"bn.js";import{PublicKey as uo}from"@solana/web3.js";import Rn,{isBN as Bn}from"bn.js";import{bits as hr,BitStructure as Rr,blob as to,Blob as Br,cstr as Cr,f32 as Dr,f32be as Nr,f64 as Or,f64be as Ur,greedy as Er,Layout as no,ns64 as qr,ns64be as Mr,nu64 as Kr,nu64be as Vr,offset as _r,s16 as vr,s16be as Fr,s24 as Wr,s24be as Gr,s32 as io,s32be as Yr,s40 as Xr,s40be as Hr,s48 as zr,s48be as Qr,s8 as Zr,seq as oo,struct as Jr,Structure as ro,u16 as so,u16be as jr,u24 as $r,u24be as es,u32 as ts,u32be as ns,u40 as is,u40be as os,u48 as rs,u48be as ss,u8 as ao,UInt as co,union as as,Union as cs,unionLayoutDiscriminator as us,utf8 as ms}from"@solana/buffer-layout";var $t=no,In=ro;var en=co;var xn=ao,et=so;var we=io;var hn=oo;var ge=to;var pt=class extends $t{constructor(t,n,i){super(t,i);this.blob=ge(t),this.signed=n}decode(t,n=0){let i=new Rn(this.blob.decode(t,n),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,n,i=0){return typeof t=="number"&&(t=new Rn(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),n,i)}};function v(p){return new en(1,p)}function Le(p){return new en(4,p)}function S(p){return new pt(8,!1,p)}function E(p){return new pt(16,!1,p)}function Cn(p){return new pt(16,!0,p)}var Nt=class extends $t{constructor(t,n,i,r){super(t.span,r);this.layout=t,this.decoder=n,this.encoder=i}decode(t,n){return this.decoder(this.layout.decode(t,n))}encode(t,n,i){return this.layout.encode(this.encoder(t),n,i)}getSpan(t,n){return this.layout.getSpan(t,n)}};function B(p){return new Nt(ge(32),e=>new uo(e),e=>e.toBuffer(),p)}function Ot(p){return new Nt(xn(),mo,lo,p)}function mo(p){if(p===0)return!1;if(p===1)return!0;throw new Error("Invalid bool: "+p)}function lo(p){return p?1:0}var tn=class extends In{decode(e,t){return super.decode(e,t)}};function O(p,e,t){return new tn(p,e,t)}function ee(p,e,t){let n,i=typeof e=="number"?e:Bn(e)?e.toNumber():new Proxy(e,{get(r,o){if(!n){let a=Reflect.get(r,"count");n=Bn(a)?a.toNumber():a,Reflect.set(r,"count",n)}return Reflect.get(r,o)},set(r,o,a){return o==="count"&&(n=a),Reflect.set(r,o,a)}});return hn(p,i,t)}import Jn from"bn.js";import{PublicKey as Do}from"@solana/web3.js";import{PublicKey as xo}from"@solana/web3.js";import{BN as ho}from"bn.js";import ko from"big.js";import Kt from"bn.js";import Et from"bn.js";import qe from"bn.js";var U=new qe(0),Z=new qe(1),Is=new qe(2),xs=new qe(3),hs=new qe(5),Ut=new qe(10),Dn=new qe(100),Rs=new qe(1e3),Bs=new qe(1e4);var qt=z.from("entity/bignumber"),Nn=9007199254740991;function H(p){return p instanceof Et?p:typeof p=="string"?p.match(/^-?[0-9]+$/)?new Et(p):qt.throwArgumentError("invalid BigNumberish string","value",p):typeof p=="number"?p%1?qt.throwArgumentError("BigNumberish number underflow","value",p):p>=Nn||p<=-Nn?qt.throwArgumentError("BigNumberish number overflow","value",p):new Et(String(p)):typeof p=="bigint"?new Et(p.toString()):qt.throwArgumentError("invalid BigNumberish value","value",p)}function nn(p){return Ut.pow(H(p))}function on(p,e){let t=p.divmod(e);return t.mod.isZero()?t.div:t.div.isNeg()?t.div.isubn(1):t.div.iaddn(1)}var tt={symbol:"SOL",name:"Solana",decimals:9},me={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}};var s={WSOL:q({},me),BTC:{symbol:"BTC",name:"Bitcoin",mint:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",decimals:6,extensions:{coingeckoId:"bitcoin"}},ETH:{symbol:"ETH",name:"Ethereum",mint:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",decimals:6,extensions:{coingeckoId:"ethereum"}},USDT:{symbol:"USDT",name:"Tether",mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6,extensions:{coingeckoId:"tether"}},WUSDT:{symbol:"WUSDT",name:"Wrapped USDT",mint:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",decimals:6,extensions:{coingeckoId:"tether"}},USDC:{symbol:"USDC",name:"USD Coin",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6,extensions:{coingeckoId:"usd-coin"}},WUSDC:{symbol:"WUSDC",name:"Wrapped USDC",mint:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",decimals:6,extensions:{coingeckoId:"usd-coin"}},YFI:{symbol:"YFI",name:"YFI",mint:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",decimals:6,extensions:{coingeckoId:"yearn-finance"}},LINK:{symbol:"LINK",name:"Chainlink",mint:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",decimals:6,extensions:{coingeckoId:"chainlink"}},XRP:{symbol:"XRP",name:"XRP",mint:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",decimals:6,extensions:{coingeckoId:"ripple"}},SUSHI:{symbol:"SUSHI",name:"SUSHI",mint:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",decimals:6,extensions:{coingeckoId:"sushi"}},ALEPH:{symbol:"ALEPH",name:"ALEPH",mint:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",decimals:6,extensions:{coingeckoId:"aleph"}},SXP:{symbol:"SXP",name:"SXP",mint:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",decimals:6,extensions:{coingeckoId:"swipe"}},HGET:{symbol:"HGET",name:"HGET",mint:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",decimals:6,extensions:{coingeckoId:"hedget"}},CREAM:{symbol:"CREAM",name:"CREAM",mint:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",decimals:6,extensions:{coingeckoId:"cream-2"}},UNI:{symbol:"UNI",name:"UNI",mint:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",decimals:6,extensions:{coingeckoId:"uniswap"}},SRM:{symbol:"SRM",name:"Serum",mint:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",decimals:6,extensions:{coingeckoId:"serum"}},FTT:{symbol:"FTT",name:"FTX Token",mint:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",decimals:6,extensions:{coingeckoId:"ftx-token"}},MSRM:{symbol:"MSRM",name:"MegaSerum",mint:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",decimals:0,extensions:{coingeckoId:"megaserum"}},TOMO:{symbol:"TOMO",name:"TOMO",mint:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",decimals:6,extensions:{coingeckoId:"tomochain"}},KARMA:{symbol:"KARMA",name:"KARMA",mint:"EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX",decimals:4,extensions:{coingeckoId:"karma-dao"}},LUA:{symbol:"LUA",name:"LUA",mint:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",decimals:6,extensions:{coingeckoId:"lua-token"}},MATH:{symbol:"MATH",name:"MATH",mint:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",decimals:6,extensions:{coingeckoId:"math"}},KEEP:{symbol:"KEEP",name:"KEEP",mint:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",decimals:6,extensions:{coingeckoId:"keep-network"}},SWAG:{symbol:"SWAG",name:"SWAG",mint:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",decimals:6,extensions:{coingeckoId:"swag-finance"}},FIDA:{symbol:"FIDA",name:"Bonfida",mint:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",decimals:6,extensions:{coingeckoId:"bonfida"}},KIN:{symbol:"KIN",name:"Kin",mint:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",decimals:5,extensions:{coingeckoId:"kin"}},MAPS:{symbol:"MAPS",name:"MAPS",mint:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",decimals:6,extensions:{coingeckoId:"maps"}},OXY:{symbol:"OXY",name:"Oxygen",mint:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",decimals:6,extensions:{coingeckoId:"oxygen"}},RAY:{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,extensions:{coingeckoId:"raydium"}},xCOPE:{symbol:"xCOPE",name:"xCOPE",mint:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",decimals:0,extensions:{coingeckoId:"cope"}},COPE:{symbol:"COPE",name:"Cope",mint:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",decimals:6,extensions:{coingeckoId:"cope"}},STEP:{symbol:"STEP",name:"Step Finance",mint:"StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT",decimals:9,extensions:{coingeckoId:"step-finance"}},MEDIA:{symbol:"MEDIA",name:"Media Network",mint:"ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs",decimals:6,extensions:{coingeckoId:"media-network"}},ROPE:{symbol:"ROPE",name:"Rope Token",mint:"8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo",decimals:9,extensions:{coingeckoId:"rope-token"}},MER:{symbol:"MER",name:"Mercurial",mint:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",decimals:6,extensions:{coingeckoId:"mercurial"}},TULIP:{symbol:"TULIP",name:"Tulip Protocol",mint:"TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs",decimals:6,extensions:{coingeckoId:"solfarm"}},SNY:{symbol:"SNY",name:"SNY",mint:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",decimals:6,extensions:{coingeckoId:"synthetify-token"}},SLRS:{symbol:"SLRS",name:"SLRS",mint:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",decimals:6,extensions:{coingeckoId:"solrise-finance"}},WOO:{symbol:"WOO",name:"WOO Network",mint:"E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy",decimals:6,extensions:{coingeckoId:"woo-network"}},BOP:{symbol:"BOP",name:"Boring Protocol",mint:"BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3",decimals:8,extensions:{coingeckoId:"boring-protocol"}},SAMO:{symbol:"SAMO",name:"Samoyedcoin",mint:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",decimals:9,extensions:{coingeckoId:"samoyedcoin"}},renBTC:{symbol:"renBTC",name:"renBTC",mint:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",decimals:8,extensions:{coingeckoId:"renbtc"}},renDOGE:{symbol:"renDOGE",name:"renDOGE",mint:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",decimals:8,extensions:{coingeckoId:"rendoge"}},LIKE:{symbol:"LIKE",name:"Only1",mint:"3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR",decimals:9,extensions:{coingeckoId:"only1"}},DXL:{symbol:"DXL",name:"Dexlab",mint:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",decimals:6,extensions:{coingeckoId:"dexlab"}},mSOL:{symbol:"mSOL",name:"Marinade staked SOL",mint:"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So",decimals:9,extensions:{coingeckoId:"msol"}},PAI:{symbol:"PAI",name:"Parrot USD",mint:"Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS",decimals:6,extensions:{coingeckoId:"parrot-usd"}},PORT:{symbol:"PORT",name:"Port Finance",mint:"PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y",decimals:6,extensions:{coingeckoId:"port-finance"}},MNGO:{symbol:"MNGO",name:"Mango",mint:"MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac",decimals:6,extensions:{coingeckoId:"mango-markets"}},CRP:{symbol:"CRP",name:"CropperFinance",mint:"DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz",decimals:9,extensions:{coingeckoId:"cropperfinance"}},ATLAS:{symbol:"ATLAS",name:"Star Atlas",mint:"ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",decimals:8,extensions:{coingeckoId:"star-atlas"}},POLIS:{symbol:"POLIS",name:"Star Atlas DAO",mint:"poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",decimals:8,extensions:{coingeckoId:"star-atlas-dao"}},GRAPE:{symbol:"GRAPE",name:"Grape Protocol",mint:"8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA",decimals:6,extensions:{coingeckoId:"grape-2"}},GENE:{symbol:"GENE",name:"Genopets",mint:"GENEtH5amGSi8kHAtQoezp1XEXwZJ8vcuePYnXdKrMYz",decimals:9,extensions:{coingeckoId:"genopets"}},DFL:{symbol:"DFL",name:"DeFi Land",mint:"DFL1zNkaGPWm1BqAVqRjCZvHmwTFrEaJtbzJWgseoNJh",decimals:9,extensions:{coingeckoId:"defi-land"}},CHEEMS:{symbol:"CHEEMS",name:"Cheems",mint:"3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc",decimals:4,extensions:{coingeckoId:"cheems"}},stSOL:{symbol:"stSOL",name:"Lido Staked SOL",mint:"7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj",decimals:9,extensions:{coingeckoId:"lido-staked-sol"}},LARIX:{symbol:"LARIX",name:"Larix",mint:"Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC",decimals:6,extensions:{coingeckoId:"larix"}},RIN:{symbol:"RIN",name:"Aldrin",mint:"E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp",decimals:9,extensions:{coingeckoId:"aldrin"}},APEX:{symbol:"APEX",name:"ApeXit Finance",mint:"51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg",decimals:9,extensions:{coingeckoId:"apexit-finance"}},MNDE:{symbol:"MNDE",name:"Marinade",mint:"MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey",decimals:9,extensions:{coingeckoId:"marinade"}},LIQ:{symbol:"LIQ",name:"LIQ Protocol",mint:"4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj",decimals:6,extensions:{coingeckoId:"liq-protocol"}},WAG:{symbol:"WAG",name:"Waggle Network",mint:"5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E",decimals:9,extensions:{coingeckoId:"waggle-network"}},wLDO:{symbol:"wLDO",name:"wLDO",mint:"HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p",decimals:8,extensions:{}},SLIM:{symbol:"SLIM",name:"Solanium",mint:"xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW",decimals:6,extensions:{coingeckoId:"solanium"}},PRT:{symbol:"PRT",name:"Parrot Protocol",mint:"PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44",decimals:6,extensions:{coingeckoId:"parrot-protocol"}},SBR:{symbol:"SBR",name:"SBR",mint:"Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1",decimals:6,extensions:{}},FAB:{symbol:"FAB",name:"Fabric",mint:"EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96",decimals:9,extensions:{coingeckoId:"fabric"}},ABR:{symbol:"ABR",name:"Allbridge",mint:"a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp",decimals:9,extensions:{coingeckoId:"allbridge"}},IVN:{symbol:"IVN",name:"Investin",mint:"iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a",decimals:6,extensions:{coingeckoId:"investin"}},CYS:{symbol:"CYS",name:"Cyclos",mint:"BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg",decimals:6,extensions:{coingeckoId:"cyclos"}},FRKT:{symbol:"FRKT",name:"FRAKT Token",mint:"ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj",decimals:8,extensions:{coingeckoId:"frakt-token"}},AURY:{symbol:"AURY",name:"Aurory",mint:"AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP",decimals:9,extensions:{coingeckoId:"aurory"}},SYP:{symbol:"SYP",name:"Sypool",mint:"FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ",decimals:9,extensions:{coingeckoId:"sypool"}},WOOF:{symbol:"WOOF",name:"WOOF",mint:"9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE",decimals:6,extensions:{coingeckoId:"woof-token"}},ORCA:{symbol:"ORCA",name:"Orca",mint:"orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE",decimals:6,extensions:{coingeckoId:"orca"}},SLND:{symbol:"SLND",name:"Solend",mint:"SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp",decimals:6,extensions:{coingeckoId:"solend"}},weWETH:{symbol:"weWETH",name:"weWETH",mint:"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs",decimals:8,extensions:{}},weUNI:{symbol:"weUNI",name:"weUNI",mint:"8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36",decimals:8,extensions:{}},weSUSHI:{symbol:"weSUSHI",name:"weSUSHI",mint:"ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj",decimals:8,extensions:{}},GOFX:{symbol:"GOFX",name:"GooseFX",mint:"GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD",decimals:9,extensions:{coingeckoId:"goosefx"}},IN:{symbol:"IN",name:"Invictus",mint:"inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY",decimals:9,extensions:{coingeckoId:"invictus"}},weDYDX:{symbol:"weDYDX",name:"weDYDX",mint:"4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU",decimals:8,extensions:{}},STARS:{symbol:"STARS",name:"StarLaunch",mint:"HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW",decimals:6,extensions:{coingeckoId:"starlaunch"}},weAXS:{symbol:"weAXS",name:"weAXS",mint:"HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5",decimals:8,extensions:{}},weSHIB:{symbol:"weSHIB",name:"weSHIB",mint:"CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z",decimals:8,extensions:{}},OXS:{symbol:"OXS",name:"Oxbull Solana",mint:"4TGxgCSJQx2GQk9oHZ8dC5m3JNXTYZHjXumKAW3vLnNx",decimals:9,extensions:{coingeckoId:"oxbull-solana"}},CWAR:{symbol:"CWAR",name:"Cryowar",mint:"HfYFjMKNZygfMC8LsQ8LtpPsPxEJoXJx4M6tqi75Hajo",decimals:9,extensions:{coingeckoId:"cryowar-token"}},UPS:{symbol:"UPS",name:"UPFI Network",mint:"EwJN2GqUGXXzYmoAciwuABtorHczTA5LqbukKXV1viH7",decimals:6,extensions:{coingeckoId:"upfi-network"}},weSAND:{symbol:"weSAND",name:"weSAND",mint:"49c7WuCZkQgc3M4qH8WuEUNXfgwupZf1xqWkDQ7gjRGt",decimals:8,extensions:{}},weMANA:{symbol:"weMANA",name:"weMANA",mint:"7dgHoN8wBZCc5wbnQ2C47TDnBMAxG4Q5L3KjP67z8kNi",decimals:8,extensions:{}},CAVE:{symbol:"CAVE",name:"Crypto Cavemen",mint:"4SZjjNABoqhbd4hnapbvoEPEqT8mnNkfbEoAwALf1V8t",decimals:6,extensions:{coingeckoId:"cave"}},JSOL:{symbol:"JSOL",name:"JPool",mint:"7Q2afV64in6N6SeZsAAB81TJzwDoD6zpqmHkzi9Dcavn",decimals:9,extensions:{coingeckoId:"jpool"}},APT:{symbol:"APT",name:"Apricot",mint:"APTtJyaRX5yGTsJU522N4VYWg3vCvSb65eam5GrPT5Rt",decimals:6,extensions:{coingeckoId:"apricot"}},SONAR:{symbol:"SONAR",name:"SonarWatch",mint:"sonarX4VtVkQemriJeLm6CKeW3GDMyiBnnAEMw1MRAE",decimals:9,extensions:{coingeckoId:"sonarwatch"}},SHILL:{symbol:"SHILL",name:"SHILL Token",mint:"6cVgJUqo4nmvQpbgrDZwyfd6RwWw5bfnCamS3M9N1fd",decimals:6,extensions:{coingeckoId:"shill-token"}},TTT:{symbol:"TTT",name:"TabTrader",mint:"FNFKRV3V8DtA3gVJN6UshMiLGYA8izxFwkNWmJbFjmRj",decimals:6,extensions:{coingeckoId:"tabtrader"}},BOKU:{symbol:"BOKU",name:"Boryoku Dragonz",mint:"CN7qFa5iYkHz99PTctvT4xXUHnxwjQ5MHxCuTJtPN5uS",decimals:9,extensions:{coingeckoId:"boku"}},MIMO:{symbol:"MIMO",name:"Million Monke",mint:"9TE7ebz1dsFo1uQ2T4oYAKSm39Y6fWuHrd6Uk6XaiD16",decimals:9,extensions:{coingeckoId:"million-monke"}},wbWBNB:{symbol:"wbWBNB",name:"wbWBNB",mint:"9gP2kCy3wA1ctvYWQk75guqXuHfrEomqydHLtcTCqiLa",decimals:8,extensions:{}},wePEOPLE:{symbol:"wePEOPLE",name:"wePEOPLE",mint:"CobcsUrt3p91FwvULYKorQejgsm5HoQdv5T8RUZ6PnLA",decimals:8,extensions:{}},XTAG:{symbol:"XTAG",name:"xHashtag",mint:"5gs8nf4wojB5EXgDUWNLwXpknzgV2YWDhveAeBZpVLbp",decimals:6,extensions:{coingeckoId:"xhashtag"}},KKO:{symbol:"KKO",name:"Kineko",mint:"kiNeKo77w1WBEzFFCXrTDRWGRWGP8yHvKC9rX6dqjQh",decimals:9,extensions:{coingeckoId:"kineko"}},VI:{symbol:"VI",name:"Vybit",mint:"7zBWymxbZt7PVHQzfi3i85frc1YRiQc23K7bh3gos8ZC",decimals:9,extensions:{coingeckoId:"vybit"}},SOLC:{symbol:"SOLC",name:"Solcubator",mint:"Bx1fDtvTN6NvE4kjdPHQXtmGSg582bZx9fGy4DQNMmAT",decimals:9,extensions:{coingeckoId:"solcubator"}},STR:{symbol:"STR",name:"Solster",mint:"9zoqdwEBKWEi9G5Ze8BSkdmppxGgVv1Kw4LuigDiNr9m",decimals:9,extensions:{coingeckoId:"solster"}},SPWN:{symbol:"SPWN",name:"Bitspawn",mint:"5U9QqCPhqXAJcEv9uyzFJd5zhN93vuPk1aNNkXnUfPnt",decimals:9,extensions:{coingeckoId:"bitspawn"}},ISOLA:{symbol:"ISOLA",name:"Intersola",mint:"333iHoRM2Awhf9uVZtSyTfU8AekdGrgQePZsKMFPgKmS",decimals:6,extensions:{coingeckoId:"intersola"}},RUN:{symbol:"RUN",name:"Run",mint:"6F9XriABHfWhit6zmMUYAQBSy6XK5VF1cHXuW5LDpRtC",decimals:9,extensions:{coingeckoId:"run"}},REAL:{symbol:"REAL",name:"Realy Metaverse",mint:"AD27ov5fVU2XzwsbvnFvb1JpCBaCB5dRXrczV9CqSVGb",decimals:9,extensions:{coingeckoId:"realy-metaverse"}},CRWNY:{symbol:"CRWNY",name:"CRWNY",mint:"CRWNYkqdgvhGGae9CKfNka58j6QQkaD5bLhKXvUYqnc1",decimals:6,extensions:{}},BLOCK:{symbol:"BLOCK",name:"Blockasset",mint:"NFTUkR4u7wKxy9QLaX2TGvd9oZSWoMo4jqSJqdMb7Nk",decimals:6,extensions:{coingeckoId:"blockasset"}},SOLAR:{symbol:"SOLAR",name:"Solar",mint:"2wmKXX1xsxLfrvjEPrt2UHiqj8Gbzwxvffr9qmNjsw8g",decimals:9,extensions:{coingeckoId:"solar"}},BASIS:{symbol:"BASIS",name:"basis.markets",mint:"Basis9oJw9j8cw53oMV7iqsgo6ihi9ALw4QR31rcjUJa",decimals:6,extensions:{coingeckoId:"basis-markets"}},SOLX:{symbol:"SOLX",name:"Soldex",mint:"CH74tuRLTYcxG7qNJCsV9rghfLXJCQJbsu7i52a8F1Gn",decimals:9,extensions:{coingeckoId:"soldex"}},CHICKS:{symbol:"CHICKS",name:"SolChicks Token",mint:"cxxShYRVcepDudXhe7U62QHvw8uBJoKFifmzggGKVC2",decimals:9,extensions:{coingeckoId:"solchicks-token"}},GST:{symbol:"GST",name:"GST",mint:"AFbX8oGjGpmVFywbVouvhQSRmiW2aR1mohfahi4Y2AdB",decimals:9,extensions:{coingeckoId:"gst"}},MBS:{symbol:"MBS",name:"MonkeyBall",mint:"Fm9rHUTF5v3hwMLbStjZXqNBBoZyGriQaFM6sTFz3K8A",decimals:6,extensions:{coingeckoId:"monkeyball"}},PRISM:{symbol:"PRISM",name:"Prism",mint:"PRSMNsEPqhGVCH1TtWiJqPjJyh2cKrLostPZTNy1o5x",decimals:6,extensions:{coingeckoId:"prism"}},MEAN:{symbol:"MEAN",name:"Meanfi",mint:"MEANeD3XDdUmNMsRGjASkSWdC8prLYsoRJ61pPeHctD",decimals:6,extensions:{coingeckoId:"meanfi"}},TINY:{symbol:"TINY",name:"Tiny Colony",mint:"HKfs24UEDQpHS5hUyKYkHd9q7GY5UQ679q2bokeL2whu",decimals:6,extensions:{coingeckoId:"tiny-colony"}},SHDW:{symbol:"SHDW",name:"GenesysGo Shadow",mint:"SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y",decimals:9,extensions:{coingeckoId:"genesysgo-shadow"}},SCY:{symbol:"SCY",name:"Synchrony",mint:"SCYfrGCw8aDiqdgcpdGjV6jp4UVVQLuphxTDLNWu36f",decimals:9,extensions:{coingeckoId:"synchrony"}},SLC:{symbol:"SLC",name:"Solice",mint:"METAmTMXwdb8gYzyCPfXXFmZZw4rUsXX58PNsDg7zjL",decimals:6,extensions:{coingeckoId:"solice"}}},Ms={FIDA_RAY_V4:{symbol:"FIDA-RAY",name:"FIDA-RAY V4 LP",mint:"DsBuznXRTmzvEdb36Dx3aVLVo1XmH7r1PRZUFugLPTFv",base:s.FIDA,quote:s.RAY,decimals:s.FIDA.decimals,version:4},OXY_RAY_V4:{symbol:"OXY-RAY",name:"OXY-RAY V4 LP",mint:"FwaX9W7iThTZH5MFeasxdLpxTVxRcM7ZHieTCnYog8Yb",base:s.OXY,quote:s.RAY,decimals:s.OXY.decimals,version:4},MAPS_RAY_V4:{symbol:"MAPS-RAY",name:"MAPS-RAY V4 LP",mint:"CcKK8srfVdTSsFGV3VLBb2YDbzF4T4NM2C3UEjC39RLP",base:s.MAPS,quote:s.RAY,decimals:s.MAPS.decimals,version:4},KIN_RAY_V4:{symbol:"KIN-RAY",name:"KIN-RAY V4 LP",mint:"CHT8sft3h3gpLYbCcZ9o27mT5s3Z6VifBVbUiDvprHPW",base:s.KIN,quote:s.RAY,decimals:6,version:4},RAY_USDT_V4:{symbol:"RAY-USDT",name:"RAY-USDT V4 LP",mint:"C3sT1R3nsw4AVdepvLTLKr5Gvszr7jufyBWUCvy4TUvT",base:s.RAY,quote:s.USDT,decimals:s.RAY.decimals,version:4},SOL_USDC_V4:{symbol:"SOL-USDC",name:"SOL-USDC V4 LP",mint:"8HoQnePLqPj4M7PUDzfw8e3Ymdwgc7NLGnaTUapubyvu",base:s.WSOL,quote:s.USDC,decimals:s.WSOL.decimals,version:4},YFI_USDC_V4:{symbol:"YFI-USDC",name:"YFI-USDC V4 LP",mint:"865j7iMmRRycSYUXzJ33ZcvLiX9JHvaLidasCyUyKaRE",base:s.YFI,quote:s.USDC,decimals:s.YFI.decimals,version:4},SRM_USDC_V4:{symbol:"SRM-USDC",name:"SRM-USDC V4 LP",mint:"9XnZd82j34KxNLgQfz29jGbYdxsYznTWRpvZE3SRE7JG",base:s.SRM,quote:s.USDC,decimals:s.SRM.decimals,version:4},FTT_USDC_V4:{symbol:"FTT-USDC",name:"FTT-USDC V4 LP",mint:"75dCoKfUHLUuZ4qEh46ovsxfgWhB4icc3SintzWRedT9",base:s.FTT,quote:s.USDC,decimals:s.FTT.decimals,version:4},BTC_USDC_V4:{symbol:"BTC-USDC",name:"BTC-USDC V4 LP",mint:"2hMdRdVWZqetQsaHG8kQjdZinEMBz75vsoWTCob1ijXu",base:s.BTC,quote:s.USDC,decimals:s.BTC.decimals,version:4},SUSHI_USDC_V4:{symbol:"SUSHI-USDC",name:"SUSHI-USDC V4 LP",mint:"2QVjeR9d2PbSf8em8NE8zWd8RYHjFtucDUdDgdbDD2h2",base:s.SUSHI,quote:s.USDC,decimals:s.SUSHI.decimals,version:4},TOMO_USDC_V4:{symbol:"TOMO-USDC",name:"TOMO-USDC V4 LP",mint:"CHyUpQFeW456zcr5XEh4RZiibH8Dzocs6Wbgz9aWpXnQ",base:s.TOMO,quote:s.USDC,decimals:s.TOMO.decimals,version:4},LINK_USDC_V4:{symbol:"LINK-USDC",name:"LINK-USDC V4 LP",mint:"BqjoYjqKrXtfBKXeaWeAT5sYCy7wsAYf3XjgDWsHSBRs",base:s.LINK,quote:s.USDC,decimals:s.LINK.decimals,version:4},ETH_USDC_V4:{symbol:"ETH-USDC",name:"ETH-USDC V4 LP",mint:"13PoKid6cZop4sj2GfoBeujnGfthUbTERdE5tpLCDLEY",base:s.ETH,quote:s.USDC,decimals:s.ETH.decimals,version:4},xCOPE_USDC_V4:{symbol:"xCOPE-USDC",name:"xCOPE-USDC V4 LP",mint:"2Vyyeuyd15Gp8aH6uKE72c4hxc8TVSLibxDP9vzspQWG",base:s.xCOPE,quote:s.USDC,decimals:s.xCOPE.decimals,version:4},SOL_USDT_V4:{symbol:"SOL-USDT",name:"SOL-USDT V4 LP",mint:"Epm4KfTj4DMrvqn6Bwg2Tr2N8vhQuNbuK8bESFp4k33K",base:s.WSOL,quote:s.USDT,decimals:s.WSOL.decimals,version:4},YFI_USDT_V4:{symbol:"YFI-USDT",name:"YFI-USDT V4 LP",mint:"FA1i7fej1pAbQbnY8NbyYUsTrWcasTyipKreDgy1Mgku",base:s.YFI,quote:s.USDT,decimals:s.YFI.decimals,version:4},SRM_USDT_V4:{symbol:"SRM-USDT",name:"SRM-USDT V4 LP",mint:"HYSAu42BFejBS77jZAZdNAWa3iVcbSRJSzp3wtqCbWwv",base:s.SRM,quote:s.USDT,decimals:s.SRM.decimals,version:4},FTT_USDT_V4:{symbol:"FTT-USDT",name:"FTT-USDT V4 LP",mint:"2cTCiUnect5Lap2sk19xLby7aajNDYseFhC9Pigou11z",base:s.FTT,quote:s.USDT,decimals:s.FTT.decimals,version:4},BTC_USDT_V4:{symbol:"BTC-USDT",name:"BTC-USDT V4 LP",mint:"DgGuvR9GSHimopo3Gc7gfkbKamLKrdyzWkq5yqA6LqYS",base:s.BTC,quote:s.USDT,decimals:s.BTC.decimals,version:4},SUSHI_USDT_V4:{symbol:"SUSHI-USDT",name:"SUSHI-USDT V4 LP",mint:"Ba26poEYDy6P2o95AJUsewXgZ8DM9BCsmnU9hmC9i4Ki",base:s.SUSHI,quote:s.USDT,decimals:s.SUSHI.decimals,version:4},TOMO_USDT_V4:{symbol:"TOMO-USDT",name:"TOMO-USDT V4 LP",mint:"D3iGro1vn6PWJXo9QAPj3dfta6dKkHHnmiiym2EfsAmi",base:s.TOMO,quote:s.USDT,decimals:s.TOMO.decimals,version:4},LINK_USDT_V4:{symbol:"LINK-USDT",name:"LINK-USDT V4 LP",mint:"Dr12Sgt9gkY8WU5tRkgZf1TkVWJbvjYuPAhR3aDCwiiX",base:s.LINK,quote:s.USDT,decimals:s.LINK.decimals,version:4},ETH_USDT_V4:{symbol:"ETH-USDT",name:"ETH-USDT V4 LP",mint:"nPrB78ETY8661fUgohpuVusNCZnedYCgghzRJzxWnVb",base:s.ETH,quote:s.USDT,decimals:s.ETH.decimals,version:4},YFI_SRM_V4:{symbol:"YFI-SRM",name:"YFI-SRM V4 LP",mint:"EGJht91R7dKpCj8wzALkjmNdUUUcQgodqWCYweyKcRcV",base:s.YFI,quote:s.SRM,decimals:s.YFI.decimals,version:4},FTT_SRM_V4:{symbol:"FTT-SRM",name:"FTT-SRM V4 LP",mint:"AsDuPg9MgPtt3jfoyctUCUgsvwqAN6RZPftqoeiPDefM",base:s.FTT,quote:s.SRM,decimals:s.FTT.decimals,version:4},BTC_SRM_V4:{symbol:"BTC-SRM",name:"BTC-SRM V4 LP",mint:"AGHQxXb3GSzeiLTcLtXMS2D5GGDZxsB2fZYZxSB5weqB",base:s.BTC,quote:s.SRM,decimals:s.BTC.decimals,version:4},SUSHI_SRM_V4:{symbol:"SUSHI-SRM",name:"SUSHI-SRM V4 LP",mint:"3HYhUnUdV67j1vn8fu7ExuVGy5dJozHEyWvqEstDbWwE",base:s.SUSHI,quote:s.SRM,decimals:s.SUSHI.decimals,version:4},TOMO_SRM_V4:{symbol:"TOMO-SRM",name:"TOMO-SRM V4 LP",mint:"GgH9RnKrQpaMQeqmdbMvs5oo1A24hERQ9wuY2pSkeG7x",base:s.TOMO,quote:s.SRM,decimals:s.TOMO.decimals,version:4},LINK_SRM_V4:{symbol:"LINK-SRM",name:"LINK-SRM V4 LP",mint:"GXN6yJv12o18skTmJXaeFXZVY1iqR18CHsmCT8VVCmDD",base:s.LINK,quote:s.SRM,decimals:s.LINK.decimals,version:4},ETH_SRM_V4:{symbol:"ETH-SRM",name:"ETH-SRM V4 LP",mint:"9VoY3VERETuc2FoadMSYYizF26mJinY514ZpEzkHMtwG",base:s.ETH,quote:s.SRM,decimals:s.ETH.decimals,version:4},SRM_SOL_V4:{symbol:"SRM-SOL",name:"SRM-SOL V4 LP",mint:"AKJHspCwDhABucCxNLXUSfEzb7Ny62RqFtC9uNjJi4fq",base:s.SRM,quote:s.WSOL,decimals:s.SRM.decimals,version:4},STEP_USDC_V4:{symbol:"STEP-USDC",name:"STEP-USDC V4 LP",mint:"3k8BDobgihmk72jVmXYLE168bxxQUhqqyESW4dQVktqC",base:s.STEP,quote:s.USDC,decimals:s.STEP.decimals,version:4},MEDIA_USDC_V4:{symbol:"MEDIA-USDC",name:"MEDIA-USDC V4 LP",mint:"A5zanvgtioZGiJMdEyaKN4XQmJsp1p7uVxaq2696REvQ",base:s.MEDIA,quote:s.USDC,decimals:s.MEDIA.decimals,version:4},ROPE_USDC_V4:{symbol:"ROPE-USDC",name:"ROPE-USDC V4 LP",mint:"Cq4HyW5xia37tKejPF2XfZeXQoPYW6KfbPvxvw5eRoUE",base:s.ROPE,quote:s.USDC,decimals:s.ROPE.decimals,version:4},MER_USDC_V4:{symbol:"MER-USDC",name:"MER-USDC V4 LP",mint:"3H9NxvaZoxMZZDZcbBDdWMKbrfNj7PCF5sbRwDr7SdDW",base:s.MER,quote:s.USDC,decimals:s.MER.decimals,version:4},COPE_USDC_V4:{symbol:"COPE-USDC",name:"COPE-USDC V4 LP",mint:"Cz1kUvHw98imKkrqqu95GQB9h1frY8RikxPojMwWKGXf",base:s.COPE,quote:s.USDC,decimals:s.COPE.decimals,version:4},ALEPH_USDC_V4:{symbol:"ALEPH-USDC",name:"ALEPH-USDC V4 LP",mint:"iUDasAP2nXm5wvTukAHEKSdSXn8vQkRtaiShs9ceGB7",base:s.ALEPH,quote:s.USDC,decimals:s.ALEPH.decimals,version:4},TULIP_USDC_V4:{symbol:"TULIP-USDC",name:"TULIP-USDC V4 LP",mint:"2doeZGLJyACtaG9DCUyqMLtswesfje1hjNA11hMdj6YU",base:s.TULIP,quote:s.USDC,decimals:s.TULIP.decimals,version:4},WOO_USDC_V4:{symbol:"WOO-USDC",name:"WOO-USDC V4 LP",mint:"7cu42ao8Jgrd5A3y3bNQsCxq5poyGZNmTydkGfJYQfzh",base:s.WOO,quote:s.USDC,decimals:s.WOO.decimals,version:4},SNY_USDC_V4:{symbol:"SNY-USDC",name:"SNY-USDC V4 LP",mint:"G8qcfeFqxwbCqpxv5LpLWxUCd1PyMB5nWb5e5YyxLMKg",base:s.SNY,quote:s.USDC,decimals:s.SNY.decimals,version:4},BOP_RAY_V4:{symbol:"BOP-RAY",name:"BOP-RAY V4 LP",mint:"9nQPYJvysyfnXhQ6nkK5V7sZG26hmDgusfdNQijRk5LD",base:s.BOP,quote:s.RAY,decimals:s.BOP.decimals,version:4},SLRS_USDC_V4:{symbol:"SLRS-USDC",name:"SLRS-USDC V4 LP",mint:"2Xxbm1hdv5wPeen5ponDSMT3VqhGMTQ7mH9stNXm9shU",base:s.SLRS,quote:s.USDC,decimals:s.SLRS.decimals,version:4},SAMO_RAY_V4:{symbol:"SAMO-RAY",name:"SAMO-RAY V4 LP",mint:"HwzkXyX8B45LsaHXwY8su92NoRBS5GQC32HzjQRDqPnr",base:s.SAMO,quote:s.RAY,decimals:s.SAMO.decimals,version:4},renBTC_USDC_V4:{symbol:"renBTC-USDC",name:"renBTC-USDC V4 LP",mint:"CTEpsih91ZLo5gunvryLpJ3pzMjmt5jbS6AnSQrzYw7V",base:s.renBTC,quote:s.USDC,decimals:s.renBTC.decimals,version:4},renDOGE_USDC_V4:{symbol:"renDOGE-USDC",name:"renDOGE-USDC V4 LP",mint:"Hb8KnZNKvRxu7pgMRWJgoMSMcepfvNiBFFDDrdf9o3wA",base:s.renDOGE,quote:s.USDC,decimals:s.renDOGE.decimals,version:4},RAY_USDC_V4:{symbol:"RAY-USDC",name:"RAY-USDC V4 LP",mint:"FbC6K13MzHvN42bXrtGaWsvZY9fxrackRSZcBGfjPc7m",base:s.RAY,quote:s.USDC,decimals:s.RAY.decimals,version:4},RAY_SRM_V4:{symbol:"RAY-SRM",name:"RAY-SRM V4 LP",mint:"7P5Thr9Egi2rvMmEuQkLn8x8e8Qro7u2U7yLD2tU2Hbe",base:s.RAY,quote:s.SRM,decimals:s.RAY.decimals,version:4},RAY_ETH_V4:{symbol:"RAY-ETH",name:"RAY-ETH V4 LP",mint:"mjQH33MqZv5aKAbKHi8dG3g3qXeRQqq1GFcXceZkNSr",base:s.RAY,quote:s.ETH,decimals:s.RAY.decimals,version:4},RAY_SOL_V4:{symbol:"RAY-SOL",name:"RAY-SOL V4 LP",mint:"89ZKE4aoyfLBe2RuV6jM3JGNhaV18Nxh8eNtjRcndBip",base:s.RAY,quote:s.WSOL,decimals:s.RAY.decimals,version:4},DXL_USDC_V4:{symbol:"DXL-USDC",name:"DXL-USDC V4 LP",mint:"4HFaSvfgskipvrzT1exoVKsUZ174JyExEsA8bDfsAdY5",base:s.DXL,quote:s.USDC,decimals:s.DXL.decimals,version:4},LIKE_USDC_V4:{symbol:"LIKE-USDC",name:"LIKE-USDC V4 LP",mint:"cjZmbt8sJgaoyWYUttomAu5LJYU44ZrcKTbzTSEPDVw",base:s.LIKE,quote:s.USDC,decimals:s.LIKE.decimals,version:4},mSOL_USDC_V4:{symbol:"mSOL-USDC",name:"mSOL-USDC V4 LP",mint:"4xTpJ4p76bAeggXoYywpCCNKfJspbuRzZ79R7pRhbqSf",base:s.mSOL,quote:s.USDC,decimals:s.mSOL.decimals,version:4},mSOL_SOL_V4:{symbol:"mSOL-SOL",name:"mSOL-SOL V4 LP",mint:"5ijRoAHVgd5T5CNtK5KDRUBZ7Bffb69nktMj5n6ks6m4",base:s.mSOL,quote:s.WSOL,decimals:s.mSOL.decimals,version:4},MER_PAI_V4:{symbol:"MER-PAI",name:"MER-PAI V4 LP",mint:"DU5RT2D9EviaSmX6Ta8MZwMm85HwSEqGMRdqUiuCGfmD",base:s.MER,quote:s.PAI,decimals:s.MER.decimals,version:4},PORT_USDC_V4:{symbol:"PORT-USDC",name:"PORT-USDC V4 LP",mint:"9tmNtbUCrLS15qC4tEfr5NNeqcqpZ4uiGgi2vS5CLQBS",base:s.PORT,quote:s.USDC,decimals:s.PORT.decimals,version:4},MNGO_USDC_V4:{symbol:"MNGO-USDC",name:"MNGO-USDC V4 LP",mint:"DkiqCQ792n743xjWQVCbBUaVtkdiuvQeYndM53ReWnCC",base:s.MNGO,quote:s.USDC,decimals:s.MNGO.decimals,version:4},ATLAS_USDC_V4:{symbol:"ATLAS-USDC",name:"ATLAS-USDC V4 LP",mint:"9shGU9f1EsxAbiR567MYZ78WUiS6ZNCYbHe53WUULQ7n",base:s.ATLAS,quote:s.USDC,decimals:s.ATLAS.decimals,version:4},POLIS_USDC_V4:{symbol:"POLIS-USDC",name:"POLIS-USDC V4 LP",mint:"8MbKSBpyXs8fVneKgt71jfHrn5SWtX8n4wMLpiVfF9So",base:s.POLIS,quote:s.USDC,decimals:s.POLIS.decimals,version:4},ATLAS_RAY_V4:{symbol:"ATLAS-RAY",name:"ATLAS-RAY V4 LP",mint:"418MFhkaYQtbn529wmjLLqL6uKxDz7j4eZBaV1cobkyd",base:s.ATLAS,quote:s.RAY,decimals:s.ATLAS.decimals,version:4},POLIS_RAY_V4:{symbol:"POLIS-RAY",name:"POLIS-RAY V4 LP",mint:"9ysGKUH6WqzjQEUT4dxqYCUaFNVK9QFEa24pGzjFq8xg",base:s.POLIS,quote:s.RAY,decimals:s.POLIS.decimals,version:4},ALEPH_RAY_V4:{symbol:"ALEPH-RAY",name:"ALEPH-RAY V4 LP",mint:"n76skjqv4LirhdLok2zJELXNLdRpYDgVJQuQFbamscy",base:s.ALEPH,quote:s.RAY,decimals:s.ALEPH.decimals,version:4},TULIP_RAY_V4:{symbol:"TULIP-RAY",name:"TULIP-RAY V4 LP",mint:"3AZTviji5qduMG2s4FfWGR3SSQmNUCyx8ao6UKCPg3oJ",base:s.TULIP,quote:s.RAY,decimals:s.TULIP.decimals,version:4},SLRS_RAY_V4:{symbol:"SLRS-RAY",name:"SLRS-RAY V4 LP",mint:"2pk78vsKT3jfJAcN2zbpMUnrR57SZrxHqaZYyFgp92mM",base:s.SLRS,quote:s.RAY,decimals:s.SLRS.decimals,version:4},MER_RAY_V4:{symbol:"MER-RAY",name:"MER-RAY V4 LP",mint:"214hxy3AbKoaEKgqcg2aC1cP5R67cGGAyDEg5GDwC7Ub",base:s.MER,quote:s.RAY,decimals:s.MER.decimals,version:4},MEDIA_RAY_V4:{symbol:"MEDIA-RAY",name:"MEDIA-RAY V4 LP",mint:"9Aseg5A1JD1yCiFFdDaNNxCiJ7XzrpZFmcEmLjXFdPaH",base:s.MEDIA,quote:s.RAY,decimals:s.MEDIA.decimals,version:4},SNY_RAY_V4:{symbol:"SNY-RAY",name:"SNY-RAY V4 LP",mint:"2k4quTuuLUxrSEhFH99qcoZzvgvVEc3b5sz3xz3qstfS",base:s.SNY,quote:s.RAY,decimals:s.SNY.decimals,version:4},LIKE_RAY_V4:{symbol:"LIKE-RAY",name:"LIKE-RAY V4 LP",mint:"7xqDycbFSCpUpzkYapFeyPJWPwEpV7zdWbYf2MVHTNjv",base:s.LIKE,quote:s.RAY,decimals:s.LIKE.decimals,version:4},COPE_RAY_V4:{symbol:"COPE-RAY",name:"COPE-RAY V4 LP",mint:"A7GCVHA8NSsbdFscHdoNU41tL1TRKNmCH4K94CgcLK9F",base:s.COPE,quote:s.RAY,decimals:s.COPE.decimals,version:4},ETH_SOL_V4:{symbol:"ETH-SOL",name:"ETH-SOL V4 LP",mint:"GKfgC86iJoMjwAtcyiLu6nWnjggqUXsDQihXkP14fDez",base:s.ETH,quote:s.WSOL,decimals:s.ETH.decimals,version:4},stSOL_USDC_V4:{symbol:"stSOL-USDC",name:"stSOL-USDC V4 LP",mint:"HDUJMwYZkjUZre63xUeDhdCi8c6LgUDiBqxmP3QC3VPX",base:s.stSOL,quote:s.USDC,decimals:s.stSOL.decimals,version:4},GRAPE_USDC_V4:{symbol:"GRAPE-USDC",name:"GRAPE-USDC V4 LP",mint:"A8ZYmnZ1vwxUa4wpJVUaJgegsuTEz5TKy5CiJXffvmpt",base:s.GRAPE,quote:s.USDC,decimals:s.GRAPE.decimals,version:4},LARIX_USDC_V4:{symbol:"LARIX-USDC",name:"LARIX-USDC V4 LP",mint:"7yieit4YsNsZ9CAK8H5ZEMvvk35kPEHHeXwp6naoWU9V",base:s.LARIX,quote:s.USDC,decimals:s.LARIX.decimals,version:4},RIN_USDC_V4:{symbol:"RIN-USDC",name:"RIN-USDC V4 LP",mint:"GfCWfrZez7BDmCSEeMERVDVUaaM2TEreyYUgb2cpuS3w",base:s.RIN,quote:s.USDC,decimals:s.RIN.decimals,version:4},APEX_USDC_V4:{symbol:"APEX-USDC",name:"APEX-USDC V4 LP",mint:"444cVqYyDxJNo6FqiMb9qQWFUd7tYzFRdDuJRFrSAGnU",base:s.APEX,quote:s.USDC,decimals:s.APEX.decimals,version:4},mSOL_RAY_V4:{symbol:"mSOL-RAY",name:"mSOL-RAY V4 LP",mint:"De2EHBAdkgfc72DpShqDGG42cV3iDWh8wvvZdPsiEcqP",base:s.mSOL,quote:s.RAY,decimals:s.mSOL.decimals,version:4},MNDE_mSOL_V4:{symbol:"MNDE-mSOL",name:"MNDE-mSOL V4 LP",mint:"4bh8XCzTHSbqbWN8o1Jn4ueBdz1LvJFoEasN6K6CQ8Ny",base:s.MNDE,quote:s.mSOL,decimals:s.MNDE.decimals,version:4},LARIX_RAY_V4:{symbol:"LARIX-RAY",name:"LARIX-RAY V4 LP",mint:"ZRDfSLgWGeaYSmhdPvFNKQQhDcYdZQaue2N8YDmHX4q",base:s.LARIX,quote:s.RAY,decimals:s.LARIX.decimals,version:4},LIQ_USDC_V4:{symbol:"LIQ-USDC",name:"LIQ-USDC V4 LP",mint:"GWpD3eTfhJB5KDCcnE85dBQrjAk2CsrgDF9b52R9CrjV",base:s.LIQ,quote:s.USDC,decimals:s.LIQ.decimals,version:4},WAG_USDC_V4:{symbol:"WAG-USDC",name:"WAG-USDC V4 LP",mint:"4yykyPugitUVRewNPXXCviRvxGfsfsRMoP32z3b6FmUC",base:s.WAG,quote:s.USDC,decimals:s.WAG.decimals,version:4},ETH_mSOL_V4:{symbol:"ETH-mSOL",name:"ETH-mSOL V4 LP",mint:"HYv3grQfi8QbV7nG7EFgNK1aJSrsJ7HynXJKJVPLL2Uh",base:s.ETH,quote:s.mSOL,decimals:s.ETH.decimals,version:4},mSOL_USDT_V4:{symbol:"mSOL-USDT",name:"mSOL-USDT V4 LP",mint:"69NCmEW9mGpiWLjAcAWHq51k4ionJZmzgRfRT3wQaCCf",base:s.mSOL,quote:s.USDT,decimals:s.mSOL.decimals,version:4},BTC_mSOL_V4:{symbol:"BTC-mSOL",name:"BTC-mSOL V4 LP",mint:"92bcERNtUmuaJ6mwLSxYHZYSph37jdKxRdoYNxpcYNPp",base:s.BTC,quote:s.mSOL,decimals:s.BTC.decimals,version:4},SLIM_SOL_V4:{symbol:"SLIM-SOL",name:"SLIM-SOL V4 LP",mint:"9X4EK8E59VAVi6ChnNvvd39m6Yg9RtkBbAPq1mDVJT57",base:s.SLIM,quote:s.WSOL,decimals:s.SLIM.decimals,version:4},AURY_USDC_V4:{symbol:"AURY-USDC",name:"AURY-USDC V4 LP",mint:"Gub5dvTy4nzP82qpmpNkBxmRqjtqRddBTBqHSdNcf2oS",base:s.AURY,quote:s.USDC,decimals:s.AURY.decimals,version:4},PRT_SOL_V4:{symbol:"PRT-SOL",name:"PRT-SOL V4 LP",mint:"EcJ8Wgwt1AzSPiDpVr6aaSur8TKAsNTPmmzRACeqT68Z",base:s.PRT,quote:s.WSOL,decimals:s.PRT.decimals,version:4},LIQ_RAY_V4:{symbol:"LIQ-RAY",name:"LIQ-RAY V4 LP",mint:"49YUsDrThJosHSagCn1F59Uc9NRxbr9thVrZikUnQDXy",base:s.LIQ,quote:s.RAY,decimals:s.LIQ.decimals,version:4},SYP_SOL_V4:{symbol:"SYP-SOL",name:"SYP-SOL V4 LP",mint:"KHV6dfj2bDntzJ9z1S26cDfqWfUZdJRFmteLR6LxHwW",base:s.SYP,quote:s.WSOL,decimals:s.SYP.decimals,version:4},SYP_RAY_V4:{symbol:"SYP-RAY",name:"SYP-RAY V4 LP",mint:"FT2KZqxxM8F2h9pZtTF4PyjK88bM4YbuBzd7ZPwQ5wMB",base:s.SYP,quote:s.RAY,decimals:s.SYP.decimals,version:4},SYP_USDC_V4:{symbol:"SYP-USDC",name:"SYP-USDC V4 LP",mint:"2xJGuLAivAR1WkARRA6zP1v4jaA9jV2Qis8JfMNvrVyZ",base:s.SYP,quote:s.USDC,decimals:s.SYP.decimals,version:4},FAB_USDC_V4:{symbol:"FAB-USDC",name:"FAB-USDC V4 LP",mint:"5rTCvZq6BcApsC3VV1EEUuTJfaVd8uYhcGjwTy1By6P8",base:s.FAB,quote:s.USDC,decimals:s.FAB.decimals,version:4},WOOF_RAY_V4:{symbol:"WOOF-RAY",name:"WOOF-RAY V4 LP",mint:"H2FAnazDaGFutcmnrwDxhmdncR1Bd7GG4mhPCSUiamDX",base:s.WOOF,quote:s.RAY,decimals:s.WOOF.decimals,version:4},WOOF_USDC_V4:{symbol:"WOOF-USDC",name:"WOOF-USDC V4 LP",mint:"EFSu5TMc1ijRevaYCxUkS7uGvbhsymDHEaTK3UVdNE3q",base:s.WOOF,quote:s.USDC,decimals:s.WOOF.decimals,version:4},SLND_USDC_V4:{symbol:"SLND-USDC",name:"SLND-USDC V4 LP",mint:"EunE9uDh2cGsyJcsGuGKc6wte7kBn8iye2gzC4w2ePHn",base:s.SLND,quote:s.USDC,decimals:s.SLND.decimals,version:4},FRKT_SOL_V4:{symbol:"FRKT-SOL",name:"FRKT-SOL V4 LP",mint:"HYUKXgpjaxMXHttyrFYtv3z2rdhZ1U9QDH8zEc8BooQC",base:s.FRKT,quote:s.WSOL,decimals:s.FRKT.decimals,version:4},weWETH_SOL_V4:{symbol:"weWETH-SOL",name:"weWETH-SOL V4 LP",mint:"3hbozt2Por7bcrGod8N7kEeJNMocFFjCJrQR16TQGBrE",base:s.weWETH,quote:s.WSOL,decimals:s.weWETH.decimals,version:4},weWETH_USDC_V4:{symbol:"weWETH-USDC",name:"weWETH-USDC V4 LP",mint:"3529SBnMCDW3S3xQ52aABbRHo7PcHvpQA4no8J12L5eK",base:s.weWETH,quote:s.USDC,decimals:s.weWETH.decimals,version:4},weUNI_USDC_V4:{symbol:"weUNI-USDC",name:"weUNI-USDC V4 LP",mint:"EEC4QnT41py39QaYnzQnoYQEtDUDNa6Se8SBDgfPSN2a",base:s.weUNI,quote:s.USDC,decimals:s.weUNI.decimals,version:4},weSUSHI_USDC_V4:{symbol:"weSUSHI-USDC",name:"weSUSHI-USDC V4 LP",mint:"3wVrtQZsiDNp5yTPyfEzQHPU6iuJoMmpnWg6CTt4V8sR",base:s.weSUSHI,quote:s.USDC,decimals:s.weSUSHI.decimals,version:4},CYS_USDC_V4:{symbol:"CYS-USDC",name:"CYS-USDC V4 LP",mint:"GfV3QDzzdVUwCNSdfn6PjhmyJvjw18tn51RingWZYwk3",base:s.CYS,quote:s.USDC,decimals:s.CYS.decimals,version:4},SAMO_USDC_V4:{symbol:"SAMO-USDC",name:"SAMO-USDC V4 LP",mint:"B2PjGEP3vPf1999fUD14pYdxvSDRVBk43hxB2rgthwEY",base:s.SAMO,quote:s.USDC,decimals:s.SAMO.decimals,version:4},ABR_USDC_V4:{symbol:"ABR-USDC",name:"ABR-USDC V4 LP",mint:"ECHfxkf5zjjZFTX95QfFahNyzG7feyEKcfTdjsdrMSGU",base:s.ABR,quote:s.USDC,decimals:s.ABR.decimals,version:4},IN_USDC_V4:{symbol:"IN-USDC",name:"IN-USDC V4 LP",mint:"GbmJtVgg9fRmmmjKUYGMZeSt8wZ47cDDXasg5Y3iF4kz",base:s.IN,quote:s.USDC,decimals:s.IN.decimals,version:4},weDYDX_USDC_V4:{symbol:"weDYDX-USDC",name:"weDYDX-USDC V4 LP",mint:"BjkkMZnnzmgLqzGErzDbkk15ozv48iVKQuunpeM2Hqnk",base:s.weDYDX,quote:s.USDC,decimals:s.weDYDX.decimals,version:4},STARS_USDC_V4:{symbol:"STARS-USDC",name:"STARS-USDC V4 LP",mint:"FJ68q7NChhETcGVdinMbM2FF1Cy79dpmUi6HC83K55Hv",base:s.STARS,quote:s.USDC,decimals:s.STARS.decimals,version:4},weAXS_USDC_V4:{symbol:"weAXS-USDC",name:"weAXS-USDC V4 LP",mint:"6PSoJQ7myQ1BJtbQC6oiWR8HSecQGyoWsPYTZRJo2ci3",base:s.weAXS,quote:s.USDC,decimals:s.weAXS.decimals,version:4},weSHIB_USDC_V4:{symbol:"weSHIB-USDC",name:"weSHIB-USDC V4 LP",mint:"AcjX5pmTMGSgxkdxc3r82r6WMKBvS6eQXXFz5ck5KKUa",base:s.weSHIB,quote:s.USDC,decimals:s.weSHIB.decimals,version:4},SBR_USDC_V4:{symbol:"SBR-USDC",name:"SBR-USDC V4 LP",mint:"9FC8xTFRbgTpuZZYAYnZLxgnQ8r7FwfSBM1SWvGwgF7s",base:s.SBR,quote:s.USDC,decimals:s.SBR.decimals,version:4},OXS_USDC_V4:{symbol:"OXS-USDC",name:"OXS-USDC V4 LP",mint:"et9pdjWm97rbmsJoN183GkFV5qzTGru79GE1Zhe7NTU",base:s.OXS,quote:s.USDC,decimals:s.OXS.decimals,version:4},CWAR_USDC_V4:{symbol:"CWAR-USDC",name:"CWAR-USDC V4 LP",mint:"HjR23bxn2gtRDB2P1Tm3DLepAPPZgazsWJpLG9wqjnYR",base:s.CWAR,quote:s.USDC,decimals:s.CWAR.decimals,version:4},UPS_USDC_V4:{symbol:"UPS-USDC",name:"UPS-USDC V4 LP",mint:"9hSUZdREEsbaYaKY4FouvXr7xyAqtpdHRDoYCb6Mb28a",base:s.UPS,quote:s.USDC,decimals:s.UPS.decimals,version:4},weSAND_USDC_V4:{symbol:"weSAND-USDC",name:"weSAND-USDC V4 LP",mint:"3dADrQa7utyiCsaFeVk9r7oebW1WheowhKo5soBYKBVT",base:s.weSAND,quote:s.USDC,decimals:s.weSAND.decimals,version:4},weMANA_USDC_V4:{symbol:"weMANA-USDC",name:"weMANA-USDC V4 LP",mint:"HpUkVAPRJ5zNRuJ1ZwMXEhbMHL3gSuPb2QuSER9YUd3a",base:s.weMANA,quote:s.USDC,decimals:s.weMANA.decimals,version:4},CAVE_USDC_V4:{symbol:"CAVE-USDC",name:"CAVE-USDC V4 LP",mint:"5Gba1k3fU7Vh7UtAiBmie9vhQNNq1JfEwgn1DPGZ7NKQ",base:s.CAVE,quote:s.USDC,decimals:s.CAVE.decimals,version:4},GENE_USDC_V4:{symbol:"GENE-USDC",name:"GENE-USDC V4 LP",mint:"7GKvfHEXenNiWYbJBKae89mdaMPr5gGMYwZmyC8gBNVG",base:s.GENE,quote:s.USDC,decimals:s.GENE.decimals,version:4},GENE_RAY_V4:{symbol:"GENE-RAY",name:"GENE-RAY V4 LP",mint:"3HzXnc1qZ8mGqun18Ck3KA616XnZNqF1RWbgYE2nGRMA",base:s.GENE,quote:s.RAY,decimals:s.GENE.decimals,version:4},APT_USDC_V4:{symbol:"APT-USDC",name:"APT-USDC V4 LP",mint:"Hk8mDAJFq4E9kF3DtNgPFwzbo5kbeiusNFJgWmo3LoQ5",base:s.APT,quote:s.USDC,decimals:s.APT.decimals,version:4},GOFX_USDC_V4:{symbol:"GOFX-USDC",name:"GOFX-USDC V4 LP",mint:"4svqAwrLPGRDCQuuieYTmtLXF75wiahjeK2rEN9tY1YL",base:s.GOFX,quote:s.USDC,decimals:s.GOFX.decimals,version:4},SONAR_USDC_V4:{symbol:"SONAR-USDC",name:"SONAR-USDC V4 LP",mint:"2tAcfqJ1YYjpGLqwh76kyNt9VaNFDd4fJySfH6SmWfKt",base:s.SONAR,quote:s.USDC,decimals:s.SONAR.decimals,version:4},JSOL_SOL_V4:{symbol:"JSOL-SOL",name:"JSOL-SOL V4 LP",mint:"61z37rpHsU6d3Fq5sUjJ85K6tXGzkoYKDAG3kPJQNDRo",base:s.JSOL,quote:s.WSOL,decimals:s.JSOL.decimals,version:4},JSOL_USDC_V4:{symbol:"JSOL-USDC",name:"JSOL-USDC V4 LP",mint:"3JZqf2VPNxj1kDZQsfzC7myM6spsGQbGuFv1gVfdYosN",base:s.JSOL,quote:s.USDC,decimals:s.JSOL.decimals,version:4},SHILL_USDC_V4:{symbol:"SHILL-USDC",name:"SHILL-USDC V4 LP",mint:"CnUhYBtQEbSBZ76bgxAouVCTCb8rofZzwerVF5z5LREJ",base:s.SHILL,quote:s.USDC,decimals:s.SHILL.decimals,version:4},DFL_USDC_V4:{symbol:"DFL-USDC",name:"DFL-USDC V4 LP",mint:"Fffijd6UVJdQeLVXhenS8YcsnMUdWJqpbBeH42LFkXgS",base:s.DFL,quote:s.USDC,decimals:s.DFL.decimals,version:4},BOKU_USDC_V4:{symbol:"BOKU-USDC",name:"BOKU-USDC V4 LP",mint:"8jjQn5Yagb6Nm2WGAxPW1bcGqrTWpg5adf6QukXEarcP",base:s.BOKU,quote:s.USDC,decimals:s.BOKU.decimals,version:4},MIMO_SOL_V4:{symbol:"MIMO-SOL",name:"MIMO-SOL V4 LP",mint:"HUJ1opSk8AiPfDT47r7n4hTiK2EXgrR3Msy7T8q1BywS",base:s.MIMO,quote:s.WSOL,decimals:s.MIMO.decimals,version:4},wbWBNB_USDC_V4:{symbol:"wbWBNB-USDC",name:"wbWBNB-USDC V4 LP",mint:"FEsEfEJJSfiMQcshUgZ5UigfytfGRQ3z5puyF6DXDp9C",base:s.wbWBNB,quote:s.USDC,decimals:s.wbWBNB.decimals,version:4},wePEOPLE_USDC_V4:{symbol:"wePEOPLE-USDC",name:"wePEOPLE-USDC V4 LP",mint:"3e5ZCKi4etorpV4pv1fSckP5iJD67xcUkx3RtFCZhbzD",base:s.wePEOPLE,quote:s.USDC,decimals:s.wePEOPLE.decimals,version:4},ISOLA_USDT_V4:{symbol:"ISOLA-USDT",name:"ISOLA-USDT V4 LP",mint:"H8s1wQsZpRK61pyLF3XwyQc6E8vNUnwRDhy3TBDCDENQ",base:s.ISOLA,quote:s.USDT,decimals:s.ISOLA.decimals,version:4},SPWN_USDC_V4:{symbol:"SPWN-USDC",name:"SPWN-USDC V4 LP",mint:"B5uyCAQcX6nAjZypLgiivbEKabSptgUb8JK9tkaSnqdW",base:s.SPWN,quote:s.USDC,decimals:s.SPWN.decimals,version:4},STR_USDC_V4:{symbol:"STR-USDC",name:"STR-USDC V4 LP",mint:"8uDVKmVwNmbXHDB7rNKqtpcT9VAsFHTJ5pPYxjyoBbNg",base:s.STR,quote:s.USDC,decimals:s.STR.decimals,version:4},SOLC_USDT_V4:{symbol:"SOLC-USDT",name:"SOLC-USDT V4 LP",mint:"2g9JzTWycLzK4KEBBHsponAtZRee2ii63bRrJ8tefEyt",base:s.SOLC,quote:s.USDT,decimals:s.SOLC.decimals,version:4},VI_USDC_V4:{symbol:"VI-USDC",name:"VI-USDC V4 LP",mint:"3MwHyHCRfVqtH3ABFtdKXdY9dwemr9GGxQFaBkeq6NjY",base:s.VI,quote:s.USDC,decimals:s.VI.decimals,version:4},KKO_USDC_V4:{symbol:"KKO-USDC",name:"KKO-USDC V4 LP",mint:"7xr1Doc1NiMWbUg99YVFqQSLfYXNzo6YvacXUsSgBMNW",base:s.KKO,quote:s.USDC,decimals:s.KKO.decimals,version:4},XTAG_USDC_V4:{symbol:"XTAG-USDC",name:"XTAG-USDC V4 LP",mint:"GCEQbLg4ik5YJ4CMcbtuVqEc4sjLdSGy34rFk1CtGjdg",base:s.XTAG,quote:s.USDC,decimals:s.XTAG.decimals,version:4},TTT_USDC_V4:{symbol:"TTT-USDC",name:"TTT-USDC V4 LP",mint:"84fmrerHGohoRf4iLPDQ1KG4CjSjCRksYWGzjWfCRM8a",base:s.TTT,quote:s.USDC,decimals:s.TTT.decimals,version:4},RUN_USDC_V4:{symbol:"RUN-USDC",name:"RUN-USDC V4 LP",mint:"CjTLvvKSQdEujcSzeZRYgk4w1DpuXBbMppLHaxZyz11Y",base:s.RUN,quote:s.USDC,decimals:s.RUN.decimals,version:4},CRWNY_USDC_V4:{symbol:"CRWNY-USDC",name:"CRWNY-USDC V4 LP",mint:"H3D9Gyi4frRLW6bS9vBthDVDJyzyRJ6XhhpP6PJGWaDC",base:s.CRWNY,quote:s.USDC,decimals:s.CRWNY.decimals,version:4},CRWNY_RAY_V4:{symbol:"CRWNY-RAY",name:"CRWNY-RAY V4 LP",mint:"5Cz9wGStNjiUg81q8t6sJJeckuT2C14CYSfyQbtYirSX",base:s.CRWNY,quote:s.RAY,decimals:s.CRWNY.decimals,version:4},BLOCK_USDC_V4:{symbol:"BLOCK-USDC",name:"BLOCK-USDC V4 LP",mint:"8i44Y23GkkwDYZ5iSkVEqmrXUfwNmwo9grguTDWKM8wg",base:s.BLOCK,quote:s.USDC,decimals:s.BLOCK.decimals,version:4},REAL_USDC_V4:{symbol:"REAL-USDC",name:"REAL-USDC V4 LP",mint:"EN43tp8xdkcM8RYSJ4msFHMPTJRXKhUteVYBDJLwTvr3",base:s.REAL,quote:s.USDC,decimals:s.REAL.decimals,version:4},FRKT_USDC_V4:{symbol:"FRKT-USDC",name:"FRKT-USDC V4 LP",mint:"7MgzqVTGeA4wENme81QPTrPy45NJMKVL9XGwxmNT87cG",base:s.FRKT,quote:s.USDC,decimals:s.FRKT.decimals,version:4},MBS_USDC_V4:{symbol:"MBS-USDC",name:"MBS-USDC V4 LP",mint:"BAgSWaPZpsQKyZJdvB5KyvmCNj6hzczzentt5FhDCVHb",base:s.MBS,quote:s.USDC,decimals:s.MBS.decimals,version:4},PRISM_USDC_V4:{symbol:"PRISM-USDC",name:"PRISM-USDC V4 LP",mint:"3baYkTcudvSFMe25UpZcBfdp4FA5kL2E4pfaeJ8AiYJB",base:s.PRISM,quote:s.USDC,decimals:s.PRISM.decimals,version:4},CHICKS_USDC_V4:{symbol:"CHICKS-USDC",name:"CHICKS-USDC V4 LP",mint:"CPzmcw81a6PDasSXhVLfDRKuTJXZPUqocS9VFf5zCFhs",base:s.CHICKS,quote:s.USDC,decimals:s.CHICKS.decimals,version:4},MEAN_RAY_V4:{symbol:"MEAN-RAY",name:"MEAN-RAY V4 LP",mint:"H9wUyrxpAErmdNVPitpHSXgwoomoh91ggJKPWtQQoCn1",base:s.MEAN,quote:s.RAY,decimals:s.MEAN.decimals,version:4},TINY_USDC_V4:{symbol:"TINY-USDC",name:"TINY-USDC V4 LP",mint:"Hho6ZzRDj49L4z6zog8nQZFaxMSz6FX6wNzVpMeAMen",base:s.TINY,quote:s.USDC,decimals:s.TINY.decimals,version:4},SCY_USDC_V4:{symbol:"SCY-USDC",name:"SCY-USDC V4 LP",mint:"EcYk7t6Vw59HDnY2u6H1KDPkk8juMeA1NpGpHiGk1LDf",base:s.SCY,quote:s.USDC,decimals:s.SCY.decimals,version:4}};var vs={WSOL:q({},me)};var Ys={WSOL:q({},me)};var Qs=z.from("token/util");var rn=class{constructor(e,t="UNKNOWN",n="UNKNOWN"){this.decimals=e,this.symbol=t,this.name=n}},Me=rn;Me.SOL=new rn(tt.decimals,tt.symbol,tt.name);var sn=class extends Me{constructor(t,n,i="UNKNOWN",r="UNKNOWN"){super(n,i,r);this.mint=nt(t)}equals(t){return this===t?!0:this.mint.equals(t.mint)}},h=sn;h.WSOL=new sn(me.mint,me.decimals,tt.symbol,tt.name);function Ke(p,e){return p instanceof h&&e instanceof h?p.equals(e):p instanceof h||e instanceof h?!1:p===e}import fo from"big.js";import Ao from"decimal.js-light";import po from"toformat";var bo=po,bt=bo;var Mt=z.from("entity/fraction"),it=bt(fo),yt=bt(Ao),So={[0]:yt.ROUND_DOWN,[1]:yt.ROUND_HALF_UP,[2]:yt.ROUND_UP},go={[0]:it.roundDown,[1]:it.roundHalfUp,[2]:it.roundUp},J=class{constructor(e,t=Z){this.numerator=H(e),this.denominator=H(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new J(this.denominator,this.numerator)}add(e){let t=e instanceof J?e:new J(H(e));return this.denominator.eq(t.denominator)?new J(this.numerator.add(t.numerator),this.denominator):new J(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof J?e:new J(H(e));return this.denominator.eq(t.denominator)?new J(this.numerator.sub(t.numerator),this.denominator):new J(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof J?e:new J(H(e));return new J(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof J?e:new J(H(e));return new J(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=1){Mt.assert(Number.isInteger(e),`${e} is not an integer.`),Mt.assert(e>0,`${e} is not positive.`),yt.set({precision:e+1,rounding:So[n]});let i=new yt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=1){return Mt.assert(Number.isInteger(e),`${e} is not an integer.`),Mt.assert(e>=0,`${e} is negative.`),it.DP=e,it.RM=go[n],new it(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}};var Ye=z.from("entity/amount"),On=bt(ko);function Po(p,e){let t="0",n="0";if(p.includes(".")){let i=p.split(".");if(i.length===2)[t,n]=i,n=n.padEnd(e,"0");else return Ye.throwArgumentError("invalid number string","num",p)}else t=p;return[t,n.slice(0,e)||n]}var ae=class extends J{constructor(t,n,i=!0){let r=new Kt(0),o=Ut.pow(new Kt(t.decimals));if(i)r=H(n);else{let a=new Kt(0),c=new Kt(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[u,m]=Po(n.toString(),t.decimals);a=H(u),c=H(m)}a=a.mul(o),r=a.add(c)}super(r,o);this.currency=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return Ye.assert(Ke(this.currency,t.currency),"gt currency not equals"),this.raw.gt(t.raw)}lt(t){return Ye.assert(Ke(this.currency,t.currency),"lt currency not equals"),this.raw.lt(t.raw)}add(t){return Ye.assert(Ke(this.currency,t.currency),"add currency not equals"),new ae(this.currency,this.raw.add(t.raw))}sub(t){return Ye.assert(Ke(this.currency,t.currency),"sub currency not equals"),new ae(this.currency,this.raw.sub(t.raw))}toSignificant(t=this.currency.decimals,n,i=0){return super.toSignificant(t,n,i)}toFixed(t=this.currency.decimals,n,i=0){return Ye.assert(t<=this.currency.decimals,"decimals overflow"),super.toFixed(t,n,i)}toExact(t={groupSeparator:""}){return On.DP=this.currency.decimals,new On(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}},M=class extends ae{constructor(t,n,i=!0){super(t,n,i);this.token=t}add(t){return Ye.assert(Ke(this.token,t.token),"add token not equals"),new M(this.token,this.raw.add(t.raw))}subtract(t){return Ye.assert(Ke(this.token,t.token),"sub token not equals"),new M(this.token,this.raw.sub(t.raw))}};var Un=new J(Dn),ke=class extends J{toSignificant(e=5,t,n){return this.mul(Un).toSignificant(e,t,n)}toFixed(e=2,t,n){return this.mul(Un).toFixed(e,t,n)}};var To=z.from("entity/price"),ie=class extends J{constructor(t,n,i,r){super(r,n);this.baseCurrency=t,this.quoteCurrency=i,this.scalar=new J(nn(t.decimals),nn(i.decimals))}get raw(){return new J(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new ie(this.quoteCurrency,this.numerator,this.baseCurrency,this.denominator)}mul(t){To.assert(Ke(this.quoteCurrency,t.baseCurrency),"mul currency not equals");let n=super.mul(t);return new ie(this.baseCurrency,n.denominator,t.quoteCurrency,n.numerator)}toSignificant(t=this.quoteCurrency.decimals,n,i){return this.adjusted.toSignificant(t,n,i)}toFixed(t=this.quoteCurrency.decimals,n,i){return this.adjusted.toFixed(t,n,i)}};import{PublicKey as ot,SystemProgram as Io}from"@solana/web3.js";import{PublicKey as wo}from"@solana/web3.js";var an="1.1.0-beta.6";import"@colors/colors";var En=!1,qn=!1,Vt={debug:1,default:2,info:2,warning:3,error:4,off:5},Mn={},cn;function Lo(){try{let p=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch(t){p.push(e)}}),p.length)throw new Error("missing "+p.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(p){if(p instanceof Error)return p.message}return""}var Kn=Lo(),_n=(r=>(r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF",r))(_n||{}),vn=(y=>(y.UNKNOWN_ERROR="UNKNOWN_ERROR",y.NOT_IMPLEMENTED="NOT_IMPLEMENTED",y.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",y.NETWORK_ERROR="NETWORK_ERROR",y.RPC_ERROR="RPC_ERROR",y.TIMEOUT="TIMEOUT",y.BUFFER_OVERRUN="BUFFER_OVERRUN",y.NUMERIC_FAULT="NUMERIC_FAULT",y.MISSING_NEW="MISSING_NEW",y.INVALID_ARGUMENT="INVALID_ARGUMENT",y.MISSING_ARGUMENT="MISSING_ARGUMENT",y.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",y.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",y))(vn||{}),Vn="0123456789abcdef";function Fn(p,e=!1){let t=p;try{if(p instanceof Uint8Array){let n="";for(let i=0;i<p.length;i++)n+=Vn[p[i]>>4],n+=Vn[p[i]&15];t=`Uint8Array(0x${n})`}else if(p instanceof wo)t=`PublicKey(${p.toBase58()})`;else if(p instanceof Object&&!e){let n={};Object.entries(p).forEach(([i,r])=>{n[i]=Fn(r,!0)}),t=JSON.stringify(n)}else e||(t=JSON.stringify(p))}catch(n){t=JSON.stringify(p.toString())}return t}var ce=class{constructor(e){this.version=an;this.moduleName=e}_log(e,t){let n=e.toLowerCase();Vt[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!((Mn[this.moduleName]||Vt.default)>Vt[n])&&console.log(...t)}debug(...e){this._log(ce.levels.DEBUG,["[DEBUG]".blue,...e])}info(...e){this._log(ce.levels.INFO,["[INFO]".green,...e])}warn(...e){this._log(ce.levels.WARNING,["[WARN]".yellow,...e])}makeError(e,t,n){if(qn)return this.makeError("censored error",t,{});t||(t=ce.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.entries(n).forEach(([a,c])=>{i.push(`${a}=${Fn(c)})`)}),i.push(`code=${t}`),i.push(`module=${this.moduleName}`),i.push(`version=${this.version}`);let r=e;i.length&&(e+=" ("+i.join(", ")+")");let o=new Error(e);return o.reason=r,o.code=t,Object.entries(n).forEach(([a,c])=>{o[a]=c}),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,ce.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),Kn&&this.throwError("platform missing String.prototype.normalize",ce.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Kn})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ce.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,ce.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,ce.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ce.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ce.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return cn||(cn=new ce(an)),cn}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),En){if(!e)return;this.globalLogger().throwError("error censorship permanent",ce.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}qn=!!e,En=!!t}static setLogLevel(e,t){let n=Vt[t.toLowerCase()];if(n==null){ce.globalLogger().warn("invalid log level - "+t);return}Mn[e]=n}static from(e){return new ce(e)}},z=ce;z.errors=vn,z.levels=_n;import{ASSOCIATED_TOKEN_PROGRAM_ID as Gn,TOKEN_PROGRAM_ID as $}from"@solana/spl-token";import{SYSVAR_CLOCK_PUBKEY as uc,SYSVAR_RENT_PUBKEY as At}from"@solana/web3.js";var Wn=z.from("common/pubkey"),Te=Io.programId,rc=new ot("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo"),_t=new ot("SysvarRent111111111111111111111111111111111"),ft=new ot("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function nt(p){if(p instanceof ot)return p;if(typeof p=="string")try{return new ot(p)}catch(e){return Wn.throwArgumentError("invalid public key","publicKey",p)}return Wn.throwArgumentError("invalid public key","publicKey",p)}function re(p,e){let[t,n]=ot.findProgramAddressSync(p,e);return{publicKey:t,nonce:n}}function g(p,e){return{pubkey:p,isWritable:!0,isSigner:e}}function I(p,e){return{pubkey:p,isWritable:!1,isSigner:e}}var Ro=[M,xo,J,ho,Me,ae,ie,ke];function Bo(p){return typeof p=="object"&&p!==null&&!Ro.some(e=>typeof e=="object"&&p instanceof e)}function Ie(p){return typeof p=="string"?nt(p):Array.isArray(p)?p.map(e=>Ie(e)):Bo(p)?Object.fromEntries(Object.entries(p).map(([e,t])=>[e,Ie(t)])):p}import{PublicKey as fc}from"@solana/web3.js";import Sc from"bn.js";function Yn(p,e=1,t=[]){let n=[...p];if(e<=0)return t;for(;n.length;)t.push(n.splice(0,e));return t}import{PublicKey as un,Transaction as St}from"@solana/web3.js";var Be=z.from("common/web3");function Oe(p,e,t){return N(this,null,function*(){let{batchRequest:n,commitment:i}=q({batchRequest:!1},t),r=Yn(e,100),o=new Array(r.length).fill([]);if(n){let a=r.map(u=>({methodName:"getMultipleAccounts",args:p._buildArgs([u.map(b=>b.toBase58())],i,"base64")}));o=(yield p._rpcBatchRequest(a)).map(u=>u.error?Be.throwError("failed to get info for multiple accounts",z.errors.RPC_ERROR,{message:u.error.message}):u.result.value.map(m=>{if(m){let{data:b,executable:l,lamports:y,owner:f,rentEpoch:d}=m;return b.length!==2&&b[1]!=="base64"?Be.throwError("info must be base64 encoded",z.errors.RPC_ERROR):{data:Buffer.from(b[0],"base64"),executable:l,lamports:y,owner:new un(f),rentEpoch:d}}else return null}))}else try{o=yield Promise.all(r.map(a=>p.getMultipleAccountsInfo(a,i)))}catch(a){if(a instanceof Error)return Be.throwError("failed to get info for multiple accounts",z.errors.RPC_ERROR,{message:a.message})}return o.flat()})}function Xn(p,e,t){return N(this,null,function*(){let n=yield Oe(p,e.map(i=>i.pubkey),t);return e.map((i,r)=>Se(q({},i),{accountInfo:n[r]}))})}function gt(p,e){if(p.length<1)return Be.throwArgumentError("no instructions provided","instructions",p);if(e.length<1)return Be.throwArgumentError("no signers provided","signers",e);let t=new St({recentBlockhash:"11111111111111111111111111111111",feePayer:e[0]});t.add(...p);try{return t.serialize({verifySignatures:!1}),!0}catch(n){return!1}}function vt(p,e,t,n=!0){return N(this,null,function*(){let i=new un("RaydiumSimuLateTransaction11111111111111111"),r=[],o=new St;o.feePayer=i;for(let u of e)gt([...o.instructions,u],[i])||(r.push(o),o=new St,o.feePayer=i),o.add(u);o.instructions.length>0&&r.push(o);let a=[];try{if(a=yield Co(p,r,n),a.find(u=>u.err!==null))throw Error("rpc simulateTransaction error")}catch(u){if(u instanceof Error)return Be.throwError("failed to simulate for instructions",z.errors.RPC_ERROR,{message:u.message})}let c=[];for(let u of a)if(Be.debug("simulate result:",u),u.logs){let m=u.logs.filter(b=>b&&b.includes(t));Be.debug("filteredLog:",c),Be.assertArgument(m.length!==0,"simulate log not match keyword","keyword",t),c.push(...m)}return c})}function Ft(p,e){let t=p.match(/{["\w:,]+}/g);return!t||t.length!==1?Be.throwArgumentError("simulate log fail to match json","keyword",e):t[0]}function le(p,e){let n=new RegExp(`"${e}":(\\d+)`,"g").exec(p);return!n||n.length!==2?Be.throwArgumentError("simulate log fail to match key","key",e):n[1]}function Co(p,e,t){return N(this,null,function*(){let n=[];if(t){let i=yield p.getLatestBlockhash(),r=[];for(let u of e){u.recentBlockhash=i.blockhash,u.lastValidBlockHeight=i.lastValidBlockHeight;let b=u._compile().serialize(),y=u._serialize(b).toString("base64");r.push(y)}let o=r.map(u=>({methodName:"simulateTransaction",args:p._buildArgs([u],void 0,"base64")})),a=[],c=20;for(let u=0;u<Math.ceil(o.length/c);u++)a.push(o.slice(u*c,(u+1)*c));n=yield(yield Promise.all(a.map(u=>N(this,null,function*(){return(yield p._rpcBatchRequest(u)).map(m=>m.result.value)})))).flat()}else try{n=yield Promise.all(e.map(i=>N(this,null,function*(){return yield(yield p.simulateTransaction(i)).value})))}catch(i){if(i instanceof Error)return Be.throwError("failed to get info for multiple accounts",z.errors.RPC_ERROR,{message:i.message})}return n})}function mn({instructions:p,signers:e,payer:t}){let n={};for(let o of e)n[o.publicKey.toString()]=o;let i=[],r=[];for(let o of p){let a=[...r,o],c=new Set(a.map(m=>m.keys.filter(b=>b.isSigner).map(b=>b.pubkey.toString())).flat()),u=[...c.values()].map(m=>new un(m));gt(a,[t,...u])?r.push(o):(i.push({transaction:new St().add(...r),signer:[...c.values()].map(m=>n[m]).filter(m=>m!==void 0)}),r=[o])}if(r.length>0){let o=new Set(r.map(a=>a.keys.filter(c=>c.isSigner).map(c=>c.pubkey.toString())).flat());i.push({transaction:new St().add(...r),signer:[...o.values()].map(a=>n[a]).filter(a=>a!==void 0)})}return i}function Wt(p){let e=new ArrayBuffer(4);return new DataView(e).setInt32(0,p,!1),new Uint8Array(e)}var Hc=Buffer.from("amm_config","utf8"),No=Buffer.from("pool","utf8"),Oo=Buffer.from("pool_vault","utf8"),Uo=Buffer.from("pool_reward_vault","utf8"),Hn=Buffer.from("position","utf8"),Eo=Buffer.from("tick_array","utf8"),qo=Buffer.from("operation","utf8");function zn(p,e,t,n){return re([No,e.toBuffer(),t.toBuffer(),n.toBuffer()],p)}function ln(p,e,t){return re([Oo,e.toBuffer(),t.toBuffer()],p)}function Qn(p,e,t){return re([Uo,e.toBuffer(),t.toBuffer()],p)}function de(p,e,t){return re([Eo,e.toBuffer(),Wt(t)],p)}function Gt(p,e,t,n){return re([Hn,e.toBuffer(),Wt(t),Wt(n)],p)}function rt(p,e){return re([Hn,e.toBuffer()],p)}function Xe(p,e){return re([p.toBuffer(),$.toBuffer(),e.toBuffer()],new Do("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}function Zn(p){return re([Buffer.from("metadata","utf8"),ft.toBuffer(),p.toBuffer()],ft)}function Yt(p){return re([qo],p)}var pe=60,dn=1024,G=class{static getTickArrayAddressByTick(e,t,n,i){let r=G.getTickArrayStartIndexByTick(n,i),{publicKey:o}=de(e,t,r);return o}static getTickOffsetInArray(e,t){if(e%t!=0)throw new Error("tickIndex % tickSpacing not equal 0");let n=G.getTickArrayStartIndexByTick(e,t),i=Math.floor((e-n)/t);if(i<0||i>=pe)throw new Error("tick offset in array overflow");return i}static getTickArrayStartIndexByTick(e,t){let n=e/(pe*t);return e<0&&e%(pe*t)!=0?n=Math.ceil(n)-1:n=Math.floor(n),n*(t*pe)}static getTickArrayOffsetInBitmapByTick(e,t){let n=t*pe,i=Math.floor(e/n)+512;return Math.abs(i)}static checkTickArrayIsInitialized(e,t,n){let i=n*pe,r=Math.floor(t/i)+512,o=Math.abs(r);return{isInitialized:e.testn(o),startIndex:(o-512)*i}}static getNextTickArrayStartIndex(e,t,n){return n?e-t*pe:e+t*pe}static mergeTickArrayBitmap(e){return e[0].add(e[1].shln(64)).add(e[2].shln(128)).add(e[3].shln(192)).add(e[4].shln(256)).add(e[5].shln(320)).add(e[6].shln(384)).add(e[7].shln(448)).add(e[8].shln(512)).add(e[9].shln(576)).add(e[10].shln(640)).add(e[11].shln(704)).add(e[12].shln(768)).add(e[13].shln(832)).add(e[14].shln(896)).add(e[15].shln(960))}static getInitializedTickArrayInRange(e,t,n,i){if(n%(t*pe)!=0)throw new Error("Invild tickArrayStartIndex");let r=Math.floor(n/(t*pe))+512;return[...G.searchLowBitFromStart(e,r-1,0,i,t),...G.searchHightBitFromStart(e,r,dn,i,t)]}static getAllInitializedTickArrayStartIndex(e,t){return G.searchHightBitFromStart(e,0,dn,dn,t)}static getAllInitializedTickArrayInfo(e,t,n,i){let r=[],o=G.getAllInitializedTickArrayStartIndex(n,i);for(let a of o){let{publicKey:c}=de(e,t,a);r.push({tickArrayStartIndex:a,tickArrayAddress:c})}return r}static getAllInitializedTickInTickArray(e){return e.ticks.filter(t=>t.liquidityGross.gtn(0))}static searchLowBitFromStart(e,t,n,i,r){let o=0,a=[];for(let c=t;c>=n;c--){if(e.shrn(c).and(new Jn(1)).eqn(1)){let u=(c-512)*(r*pe);a.push(u),o++}if(o>=i)break}return a}static searchHightBitFromStart(e,t,n,i,r){let o=0,a=[];for(let c=t;c<n;c++){if(e.shrn(c).and(new Jn(1)).eqn(1)){let u=(c-512)*(r*pe);a.push(u),o++}if(o>=i)break}return a}};var eu=O([ge(8),v("bump"),et("index"),B(""),Le("protocolFeeRate"),Le("tradeFeeRate"),et("tickSpacing"),Le("fundFeeRate"),ee(Le(),1,"padding"),B("fundOwner"),ee(S(),3,"padding")]),Mo=O([Le("blockTimestamp"),E("sqrtPriceX64"),E("cumulativeTimePriceX64"),ee(E(),1,"")]),pn=O([ge(8),Ot("initialized"),B("poolId"),ee(Mo,1e3,"observations"),ee(E(),5,"")]),Ko=O([v("rewardState"),S("openTime"),S("endTime"),S("lastUpdateTime"),E("emissionsPerSecondX64"),S("rewardTotalEmissioned"),S("rewardClaimed"),B("tokenMint"),B("tokenVault"),B("creator"),E("rewardGrowthGlobalX64")]),jn=O([ge(8),v("bump"),B("ammConfig"),B("creator"),B("mintA"),B("mintB"),B("vaultA"),B("vaultB"),B("observationId"),v("mintDecimalsA"),v("mintDecimalsB"),et("tickSpacing"),E("liquidity"),E("sqrtPriceX64"),we("tickCurrent"),et("observationIndex"),et("observationUpdateDuration"),E("feeGrowthGlobalX64A"),E("feeGrowthGlobalX64B"),S("protocolFeesTokenA"),S("protocolFeesTokenB"),E("swapInAmountTokenA"),E("swapOutAmountTokenB"),E("swapInAmountTokenB"),E("swapOutAmountTokenA"),v("status"),ee(v(),7,""),ee(Ko,3,"rewardInfos"),ee(S(),16,"tickArrayBitmap"),S("totalFeesTokenA"),S("totalFeesClaimedTokenA"),S("totalFeesTokenB"),S("totalFeesClaimedTokenB"),S("fundFeesTokenA"),S("fundFeesTokenB"),ee(S(),15*4-2,"padding")]),Vo=O([E("growthInsideLastX64"),S("rewardAmountOwed")]),$n=O([ge(8),v("bump"),B("nftMint"),B("poolId"),we("tickLower"),we("tickUpper"),E("liquidity"),E("feeGrowthInsideLastX64A"),E("feeGrowthInsideLastX64B"),S("tokenFeesOwedA"),S("tokenFeesOwedB"),ee(Vo,3,"rewardInfos"),ee(S(),8,"")]),tu=O([ge(8),v("bump"),B("poolId"),we("tickLowerIndex"),we("tickUpperIndex"),E("liquidity"),E("feeGrowthInsideLastX64A"),E("feeGrowthInsideLastX64B"),S("tokenFeesOwedA"),S("tokenFeesOwedB"),ee(E(),3,"rewardGrowthInside"),ee(S(),8,"")]),_o=O([we("tick"),Cn("liquidityNet"),E("liquidityGross"),E("feeGrowthOutsideX64A"),E("feeGrowthOutsideX64B"),ee(E(),3,"rewardGrowthsOutsideX64"),ee(Le(),13,"")]),kt=O([ge(8),B("poolId"),we("startTickIndex"),ee(_o,pe,"ticks"),v("initializedTickCount"),ee(v(),115,"")]),ei=O([ge(329),ee(B(),100,"whitelistMints")]);import{ComputeBudgetProgram as ti,TransactionInstruction as Ve}from"@solana/web3.js";var _e={createPool:[233,146,209,142,207,104,64,188],initReward:[95,135,192,196,242,129,230,68],setRewardEmissions:[112,52,167,75,32,201,211,137],openPosition:[135,128,47,77,15,152,240,49],closePosition:[123,134,81,0,49,68,98,98],increaseLiquidity:[46,156,243,118,13,205,251,178],decreaseLiquidity:[160,38,208,111,104,91,44,1],swap:[248,198,158,145,225,117,135,200],collectReward:[18,237,166,197,34,16,213,144]};function ni(p,e,t,n,i,r,o,a,c,u){let m=O([E("sqrtPriceX64")]),b=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:_t,isSigner:!1,isWritable:!1}],l=Buffer.alloc(m.span);m.encode({sqrtPriceX64:u},l);let y=Buffer.from([..._e.createPool,...l]);return new Ve({keys:b,programId:p,data:y})}function ii(p,e,t,n,i,r,o,a,c,u,m,b,l,y,f,d,A,k,P,L,T,w){let D=O([we("tickLowerIndex"),we("tickUpperIndex"),we("tickArrayLowerStartIndex"),we("tickArrayUpperStartIndex"),E("liquidity"),S("amountMinA"),S("amountMinB")]),R=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:_t,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:Gn,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1}],C=Buffer.alloc(D.span);D.encode({tickLowerIndex:d,tickUpperIndex:A,tickArrayLowerStartIndex:k,tickArrayUpperStartIndex:P,liquidity:L,amountMinA:T,amountMinB:w},C);let K=Buffer.from([..._e.openPosition,...C]);return new Ve({keys:R,programId:p,data:K})}function oi(p,e,t,n,i){let r=O([]),o=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:$,isSigner:!1,isWritable:!1}],a=Buffer.alloc(r.span);r.encode({},a);let c=Buffer.from([..._e.closePosition,...a]);return new Ve({keys:o,programId:p,data:c})}function ri(p,e,t,n,i,r,o,a,c,u,m,b,l,y,f){let d=O([E("liquidity"),S("amountMaxA"),S("amountMaxB")]),A=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1}],k=Buffer.alloc(d.span);d.encode({liquidity:l,amountMaxA:y,amountMaxB:f},k);let P=Buffer.from([..._e.increaseLiquidity,...k]);return new Ve({keys:A,programId:p,data:P})}function si(p,e,t,n,i,r,o,a,c,u,m,b,l,y,f,d){let A=O([E("liquidity"),S("amountMinA"),S("amountMinB")]),k=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},...l.map(T=>[{pubkey:T.poolRewardVault,isSigner:!1,isWritable:!0},{pubkey:T.ownerRewardVault,isSigner:!1,isWritable:!0}]).flat()],P=Buffer.alloc(A.span);A.encode({liquidity:y,amountMinA:f,amountMinB:d},P);let L=Buffer.from([..._e.decreaseLiquidity,...P]);return new Ve({keys:k,programId:p,data:L})}function bn(p,e,t,n,i,r,o,a,c,u,m,b,l,y){let f=O([S("amount"),S("otherAmountThreshold"),E("sqrtPriceLimitX64"),Ot("isBaseInput")]),d=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},...c.map(P=>({pubkey:P,isSigner:!1,isWritable:!0}))],A=Buffer.alloc(f.span);f.encode({amount:m,otherAmountThreshold:b,sqrtPriceLimitX64:l,isBaseInput:y},A);let k=Buffer.from([..._e.swap,...A]);return new Ve({keys:d,programId:p,data:k})}function ai(p,e,t,n,i,r,o,a,c,u,m){let b=O([S("openTime"),S("endTime"),E("emissionsPerSecondX64")]),l=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:_t,isSigner:!1,isWritable:!1}],y=Buffer.alloc(b.span);b.encode({openTime:H(c),endTime:H(u),emissionsPerSecondX64:m},y);let f=Buffer.from([..._e.initReward,...y]);return new Ve({keys:l,programId:p,data:f})}function ci(p,e,t,n,i,r,o,a,c,u,m){let b=O([v("rewardIndex"),E("emissionsPerSecondX64"),S("openTime"),S("endTime")]),l=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1}],y=Buffer.alloc(b.span);b.encode({rewardIndex:a,emissionsPerSecondX64:m,openTime:H(c),endTime:H(u)},y);let f=Buffer.from([..._e.setRewardEmissions,...y]);return new Ve({keys:l,programId:p,data:f})}function ui(p,e,t,n,i,r){let o=O([v("rewardIndex")]),a=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1}],c=Buffer.alloc(o.span);o.encode({rewardIndex:r},c);let u=Buffer.from([..._e.collectReward,...c]);return new Ve({keys:a,programId:p,data:u})}function xe(){return[ti.setComputeUnitLimit({units:1e6}),ti.setComputeUnitPrice({microLamports:1})]}import{Keypair as gi,PublicKey as Ne,SystemProgram as nr,Transaction as he}from"@solana/web3.js";import ue from"bn.js";import W from"decimal.js";import{AccountLayout as mi,TOKEN_PROGRAM_ID as li}from"@solana/spl-token";import{Keypair as Jo,SystemProgram as jo}from"@solana/web3.js";var lu=O([Le("mintAuthorityOption"),B("mintAuthority"),S("supply"),v("decimals"),v("isInitialized"),Le("freezeAuthorityOption"),B("freezeAuthority")]),Pt=O([B("mint"),B("owner"),S("amount"),Le("delegateOption"),B("delegate"),v("state"),Le("isNativeOption"),S("isNative"),S("delegatedAmount"),Le("closeAuthorityOption"),B("closeAuthority")]);import{createAssociatedTokenAccountInstruction as vo,createCloseAccountInstruction as Fo,createInitializeAccountInstruction as Wo,createInitializeMintInstruction as Go,createMintToInstruction as Yo,createTransferInstruction as Xo}from"@solana/spl-token";import{Keypair as Ho,SystemProgram as zo,TransactionInstruction as Qo}from"@solana/web3.js";import Zo from"bn.js";var se=class{static getAssociatedTokenAccount({mint:e,owner:t}){return Xe(t,e).publicKey}static makeCreateAssociatedTokenAccountInstruction({mint:e,associatedAccount:t,owner:n,payer:i}){return vo(i,t,n,e)}static makeCreateWrappedNativeAccountInstructions(o){return N(this,arguments,function*({connection:e,owner:t,payer:n,amount:i,commitment:r}){let a=[],c=yield e.getMinimumBalanceForRentExemption(Pt.span,r),u=H(i).add(new Zo(c)),m=Ho.generate();return a.push(zo.createAccount({fromPubkey:n,newAccountPubkey:m.publicKey,lamports:u.toNumber(),space:Pt.span,programId:$})),a.push(this.makeInitAccountInstruction({mint:nt(me.mint),tokenAccount:m.publicKey,owner:t})),{newAccount:m,instructions:a}})}static insertCreateWrappedNativeAccountInstructions(c){return N(this,arguments,function*({connection:e,owner:t,payer:n,amount:i,instructions:r,signers:o,commitment:a}){let{newAccount:u,instructions:m}=yield this.makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:i,commitment:a});return r.push(...m),o.push(u),u.publicKey})}static makeInitMintInstruction({mint:e,decimals:t,mintAuthority:n,freezeAuthority:i=null}){return Go(e,t,n,i)}static makeMintToInstruction({mint:e,dest:t,authority:n,amount:i,multiSigners:r=[]}){return Yo(e,t,n,BigInt(String(i)),r)}static makeInitAccountInstruction({mint:e,tokenAccount:t,owner:n}){return Wo(t,e,n)}static makeTransferInstruction({source:e,destination:t,owner:n,amount:i,multiSigners:r=[]}){return Xo(e,t,n,BigInt(String(i)),r)}static makeCloseAccountInstruction({tokenAccount:e,owner:t,payer:n,multiSigners:i=[]}){return Fo(e,n,t,i)}static createInitAccountInstruction(e,t,n,i){let r=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:At,isSigner:!1,isWritable:!1}],o=v("instruction"),a=Buffer.alloc(o.span);return o.encode(1,a),new Qo({keys:r,programId:e,data:a})}};var Ue=class{static _selectTokenAccount(e){let{tokenAccounts:t,mint:n,owner:i,config:r}=e,{associatedOnly:o}=q({associatedOnly:!0},r),a=t.filter(({accountInfo:u})=>u.mint.equals(n)).sort((u,m)=>u.accountInfo.amount.lt(m.accountInfo.amount)?1:-1),c=se.getAssociatedTokenAccount({mint:n,owner:i});for(let u of a){let{pubkey:m}=u;if(o){if(c.equals(m))return m}else return m}return null}static _handleTokenAccount(e){return N(this,null,function*(){let{connection:t,side:n,amount:i,mint:r,tokenAccount:o,owner:a,payer:c=a,frontInstructions:u,endInstructions:m,signers:b,bypassAssociatedCheck:l}=e,y=se.getAssociatedTokenAccount({mint:r,owner:a});if(h.WSOL.mint.equals(r)){let f=yield se.insertCreateWrappedNativeAccountInstructions({connection:t,owner:a,payer:c,instructions:u,signers:b,amount:i});return m&&m.push(se.makeCloseAccountInstruction({tokenAccount:f,owner:a,payer:c})),f}else if(!o||n==="out"&&!y.equals(o)&&!l)return u.push(se.makeCreateAssociatedTokenAccountInstruction({mint:r,associatedAccount:y,owner:a,payer:c})),y;return o})}static _selectOrCreateTokenAccount(e){return N(this,null,function*(){var u,m;let{mint:t,tokenAccounts:n,createInfo:i,associatedOnly:r,owner:o}=e,a=se.getAssociatedTokenAccount({mint:t,owner:o}),c=n.filter(b=>b.accountInfo.mint.equals(t)&&(!r||b.pubkey.equals(a))).sort((b,l)=>b.accountInfo.amount.lt(l.accountInfo.amount)?1:-1);if(i===void 0||c.length>0)return c.length>0?c[0].pubkey:void 0;if(r){if(i.frontInstructions.push(se.makeCreateAssociatedTokenAccountInstruction({mint:t,associatedAccount:a,owner:o,payer:i.payer})),t.equals(h.WSOL.mint)){let b=yield se.insertCreateWrappedNativeAccountInstructions({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,signers:i.signers,amount:(u=i.amount)!=null?u:0});i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b,owner:o,payer:i.payer})),i.amount&&i.frontInstructions.push(se.makeTransferInstruction({source:b,destination:a,owner:o,amount:i.amount}))}return i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:a,owner:o,payer:i.payer})),a}else if(t.equals(h.WSOL.mint)){let b=yield se.insertCreateWrappedNativeAccountInstructions({connection:i.connection,owner:o,payer:i.payer,instructions:i.frontInstructions,signers:i.signers,amount:(m=i.amount)!=null?m:0});return i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b,owner:o,payer:i.payer})),b}else{let b=Jo.generate(),l=yield i.connection.getMinimumBalanceForRentExemption(mi.span),y=jo.createAccount({fromPubkey:o,newAccountPubkey:b.publicKey,lamports:l,space:mi.span,programId:li}),f=se.createInitAccountInstruction(li,t,b.publicKey,o);return i.frontInstructions.push(y,f),i.signers.push(b),i.endInstructions&&i.endInstructions.push(se.makeCloseAccountInstruction({tokenAccount:b.publicKey,owner:o,payer:i.payer})),b.publicKey}})}};import{PublicKey as zu}from"@solana/web3.js";import{BN as Zu}from"bn.js";import Qe from"bn.js";var ve=new Qe(-1),Ee=new Qe(1).shln(64),Xt=new Qe(1).shln(128),yn=Ee.sub(Z),Tt=64,di=Xt.subn(1),st=-307200,wt=-st,Ce=new Qe("3939943522091"),De=new Qe("86367321006760116002434269"),pi=-307200,bi=306600,yi=14,fi="59543866431248",Ai="184467440737095516",Si="15793534762490258745",Ht=new Qe(10).pow(new Qe(6));import F from"bn.js";import Lt from"decimal.js";var fn=15,zt=class{static getTickArrays(e,t,n,i,r,o){return N(this,null,function*(){let a=G.mergeTickArrayBitmap(o),c=[],u=G.getTickArrayStartIndexByTick(i,r),m=G.getInitializedTickArrayInRange(a,r,u,Math.floor(fn/2));for(let y=0;y<m.length;y++){let{publicKey:f}=de(t,n,m[y]);c.push(f)}let b=(yield Oe(e,c)).map(y=>y!==null?kt.decode(y.data):null),l={};for(let y=0;y<c.length;y++){let f=b[y];f!==null&&(l[f.startTickIndex]=Se(q({},f),{address:c[y]}))}return l})}static nextInitializedTick(e,t,n,i,r,o){let{initializedTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}=this.nextInitializedTickInOneArray(e,t,n,i,r,o);for(;a==null||a.liquidityGross.lten(0);){if(u=G.getNextTickArrayStartIndex(u,r,o),u<pi||u>bi)throw new Error("No enough initialized tickArray");let m=n[u];if(m===void 0)continue;let{nextTick:b,tickArrayAddress:l,tickArrayStartTickIndex:y}=this.firstInitializedTickInOneArray(e,t,m,o);[a,c,u]=[b,l,y]}if(a==null)throw new Error("No invaild tickArray cache");return{nextTick:a,tickArrayAddress:c,tickArrayStartTickIndex:u}}static firstInitializedTickInOneArray(e,t,n,i){let r;if(i){let a=pe-1;for(;a>=0;){let c=n.ticks[a];if(c.liquidityGross.gtn(0)){r=c;break}a=a-1}}else{let a=0;for(;a<pe;){let c=n.ticks[a];if(c.liquidityGross.gtn(0)){r=c;break}a=a+1}}let{publicKey:o}=de(e,t,n.startTickIndex);return{nextTick:r,tickArrayAddress:o,tickArrayStartTickIndex:n.startTickIndex}}static nextInitializedTickInOneArray(e,t,n,i,r,o){let a=G.getTickArrayStartIndexByTick(i,r),c=Math.floor((i-a)/r),u=n[a];if(u==null)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:a};let m;if(o)for(;c>=0;){let l=u.ticks[c];if(l.liquidityGross.gtn(0)){m=l;break}c=c-1}else for(c=c+1;c<pe;){let l=u.ticks[c];if(l.liquidityGross.gtn(0)){m=l;break}c=c+1}let{publicKey:b}=de(e,t,a);return{initializedTick:m,tickArrayAddress:b,tickArrayStartTickIndex:u.startTickIndex}}};var V=class{static mulDivRoundingUp(e,t,n){let i=e.mul(t),r=i.div(n);return i.mod(n).eq(U)||(r=r.add(Z)),r}static mulDivFloor(e,t,n){if(n.eq(U))throw new Error("division by 0");return e.mul(t).div(n)}static mulDivCeil(e,t,n){if(n.eq(U))throw new Error("division by 0");return e.mul(t).add(n.sub(Z)).div(n)}static x64ToDecimal(e,t){return new Lt(e.toString()).div(Lt.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new F(e.mul(Lt.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(Xt).sub(t).mod(Xt)}};function be(p,e){return An(p.mul(e),64,256)}function $o(p,e,t){let n=p.toTwos(t).shln(e);return n.imaskn(t+1),n.fromTwos(t)}function An(p,e,t){let n=p.toTwos(t).shrn(e);return n.imaskn(t-e+1),n.fromTwos(t-e)}var _=class{static sqrtPriceX64ToPrice(e,t,n){return V.x64ToDecimal(e).pow(2).mul(Lt.pow(10,t-n))}static priceToSqrtPriceX64(e,t,n){return V.decimalToX64(e.mul(Lt.pow(10,n-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,n,i){if(!e.gt(U))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(U))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!0)}static getNextSqrtPriceX64FromOutput(e,t,n,i){if(!e.gt(U))throw new Error("sqrtPriceX64 must greater than 0");if(!t.gt(U))throw new Error("liquidity must greater than 0");return i?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,i){if(n.eq(U))return e;let r=t.shln(Tt);if(i){let o=r,a=r.add(n.mul(e));return a.gte(o)?V.mulDivCeil(o,e,a):V.mulDivRoundingUp(o,Z,o.div(e).add(n))}else{let o=n.mul(e);if(!r.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let a=r.sub(o);return V.mulDivCeil(r,e,a)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,i){let r=n.shln(Tt);if(i)return e.add(r.div(t));{let o=V.mulDivRoundingUp(r,Z,t);if(!e.gt(o))throw new Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(o)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw new Error("tick must be integer");if(e<st||e>wt)throw new Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?e*-1:e,n=(t&1)!=0?new F("18445821805675395072"):new F("18446744073709551616");return(t&2)!=0&&(n=be(n,new F("18444899583751176192"))),(t&4)!=0&&(n=be(n,new F("18443055278223355904"))),(t&8)!=0&&(n=be(n,new F("18439367220385607680"))),(t&16)!=0&&(n=be(n,new F("18431993317065453568"))),(t&32)!=0&&(n=be(n,new F("18417254355718170624"))),(t&64)!=0&&(n=be(n,new F("18387811781193609216"))),(t&128)!=0&&(n=be(n,new F("18329067761203558400"))),(t&256)!=0&&(n=be(n,new F("18212142134806163456"))),(t&512)!=0&&(n=be(n,new F("17980523815641700352"))),(t&1024)!=0&&(n=be(n,new F("17526086738831433728"))),(t&2048)!=0&&(n=be(n,new F("16651378430235570176"))),(t&4096)!=0&&(n=be(n,new F("15030750278694412288"))),(t&8192)!=0&&(n=be(n,new F("12247334978884435968"))),(t&16384)!=0&&(n=be(n,new F("8131365268886854656"))),(t&32768)!=0&&(n=be(n,new F("3584323654725218816"))),(t&65536)!=0&&(n=be(n,new F("696457651848324352"))),(t&131072)!=0&&(n=be(n,new F("26294789957507116"))),(t&262144)!=0&&(n=be(n,new F("37481735321082"))),e>0&&(n=di.div(n)),n}static getTickFromPrice(e,t,n){return _.getTickFromSqrtPriceX64(_.priceToSqrtPriceX64(e,t,n))}static getTickFromSqrtPriceX64(e){if(e.gt(De)||e.lt(Ce))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,n=new F(t-64),i=$o(n,32,128),r=new F("8000000000000000","hex"),o=0,a=new F(0),c=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new F(0))&&o<yi;){c=c.mul(c);let f=c.shrn(127);c=c.shrn(63+f.toNumber()),a=a.add(r.mul(f)),r=r.shrn(1),o+=1}let u=a.shrn(32),b=i.add(u).mul(new F(fi)),l=An(b.sub(new F(Ai)),64,128).toNumber(),y=An(b.add(new F(Si)),64,128).toNumber();return l==y?l:_.getSqrtPriceX64FromTick(y).lte(e)?y:l}},at=class{static getTickWithPriceAndTickspacing(e,t,n,i){let o=_.getTickFromSqrtPriceX64(_.priceToSqrtPriceX64(e,n,i))/t;return o<0?o=Math.floor(o):o=Math.ceil(o),o*t}static roundPriceWithTickspacing(e,t,n,i){let r=at.getTickWithPriceAndTickspacing(e,t,n,i),o=_.getSqrtPriceX64FromTick(r);return _.sqrtPriceX64ToPrice(o,n,i)}},X=class{static addDelta(e,t){return e.add(t)}static getTokenAmountAFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(U))throw new Error("sqrtPriceX64A must greater than 0");let r=n.ushln(Tt),o=t.sub(e);return i?V.mulDivRoundingUp(V.mulDivCeil(r,o,t),Z,e):V.mulDivFloor(r,o,t).div(e)}static getTokenAmountBFromLiquidity(e,t,n,i){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(U))throw new Error("sqrtPriceX64A must greater than 0");return i?V.mulDivCeil(n,t.sub(e),Ee):V.mulDivFloor(n,t.sub(e),Ee)}static getLiquidityFromTokenAmountA(e,t,n,i){e.gt(t)&&([e,t]=[t,e]);let r=n.mul(e).mul(t),o=t.sub(e),a=r.div(o);return i?V.mulDivRoundingUp(a,Z,yn):a.shrn(Tt)}static getLiquidityFromTokenAmountB(e,t,n){return e.gt(t)&&([e,t]=[t,e]),V.mulDivFloor(n,yn,t.sub(e))}static getLiquidityFromTokenAmounts(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return X.getLiquidityFromTokenAmountA(t,n,i,!1);if(e.lt(n)){let o=X.getLiquidityFromTokenAmountA(e,n,i,!1),a=X.getLiquidityFromTokenAmountB(t,e,r);return o.lt(a)?o:a}else return X.getLiquidityFromTokenAmountB(t,n,r)}static getAmountsFromLiquidity(e,t,n,i,r){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return{amountA:X.getTokenAmountAFromLiquidity(t,n,i,r),amountB:new F(0)};if(e.lt(n)){let o=X.getTokenAmountAFromLiquidity(e,n,i,r),a=X.getTokenAmountBFromLiquidity(t,e,i,r);return{amountA:o,amountB:a}}else return{amountA:new F(0),amountB:X.getTokenAmountBFromLiquidity(t,n,i,r)}}static getAmountsFromLiquidityWithSlippage(e,t,n,i,r,o,a){let{amountA:c,amountB:u}=X.getAmountsFromLiquidity(e,t,n,i,o),m=r?1+a:1-a,b=c.muln(m),l=u.muln(m);return{amountSlippageA:b,amountSlippageB:l}}},Ze=class{static swapCompute(e,t,n,i,r,o,a,c,u,m,b,l){if(m.eq(U))throw new Error("amountSpecified must not be 0");if(l||(l=i?Ce.add(Z):De.sub(Z)),i){if(l.lt(Ce))throw new Error("sqrtPriceX64 must greater than MIN_SQRT_PRICE_X64");if(l.gte(u))throw new Error("sqrtPriceX64 must smaller than current")}else{if(l.gt(De))throw new Error("sqrtPriceX64 must smaller than MAX_SQRT_PRICE_X64");if(l.lte(u))throw new Error("sqrtPriceX64 must greater than current")}let y=m.gt(U),f={amountSpecifiedRemaining:m,amountCalculated:U,sqrtPriceX64:u,tick:a,accounts:[],liquidity:o,feeAmount:new F(0)},d=0;for(;!f.amountSpecifiedRemaining.eq(U)&&f.sqrtPriceX64!=l&&f.tick<wt&&f.tick>st;){if(d>10)throw Error("liquidity limit");let A={};A.sqrtPriceStartX64=f.sqrtPriceX64;let{nextTick:k,tickArrayAddress:P,tickArrayStartTickIndex:L}=zt.nextInitializedTick(e,t,n,f.tick,c,i);A.tickNext=k.tick,A.initialized=k.liquidityGross.gtn(0),b!==L&&P&&(f.accounts.push(P),b=L),A.tickNext<st?A.tickNext=st:A.tickNext>wt&&(A.tickNext=wt),A.sqrtPriceNextX64=_.getSqrtPriceX64FromTick(A.tickNext);let T;if(i&&A.sqrtPriceNextX64.lt(l)||!i&&A.sqrtPriceNextX64.gt(l)?T=l:T=A.sqrtPriceNextX64,[f.sqrtPriceX64,A.amountIn,A.amountOut,A.feeAmount]=Ze.swapStepCompute(f.sqrtPriceX64,T,f.liquidity,f.amountSpecifiedRemaining,r),f.feeAmount=f.feeAmount.add(A.feeAmount),y?(f.amountSpecifiedRemaining=f.amountSpecifiedRemaining.sub(A.amountIn.add(A.feeAmount)),f.amountCalculated=f.amountCalculated.sub(A.amountOut)):(f.amountSpecifiedRemaining=f.amountSpecifiedRemaining.add(A.amountOut),f.amountCalculated=f.amountCalculated.add(A.amountIn.add(A.feeAmount))),f.sqrtPriceX64.eq(A.sqrtPriceNextX64)){if(A.initialized){let w=k.liquidityNet;i&&(w=w.mul(ve)),f.liquidity=X.addDelta(f.liquidity,w)}f.tick=i?A.tickNext-1:A.tickNext}else f.sqrtPriceX64!=A.sqrtPriceStartX64&&(f.tick=_.getTickFromSqrtPriceX64(f.sqrtPriceX64));++d}return{amountCalculated:f.amountCalculated,feeAmount:f.feeAmount,sqrtPriceX64:f.sqrtPriceX64,liquidity:f.liquidity,tickCurrent:f.tick,accounts:f.accounts}}static swapStepCompute(e,t,n,i,r){let o={sqrtPriceX64Next:new F(0),amountIn:new F(0),amountOut:new F(0),feeAmount:new F(0)},a=e.gte(t),c=i.gte(U);if(c){let m=V.mulDivFloor(i,Ht.sub(new F(r.toString())),Ht);o.amountIn=a?X.getTokenAmountAFromLiquidity(t,e,n,!0):X.getTokenAmountBFromLiquidity(e,t,n,!0),m.gte(o.amountIn)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=_.getNextSqrtPriceX64FromInput(e,n,m,a)}else o.amountOut=a?X.getTokenAmountBFromLiquidity(t,e,n,!1):X.getTokenAmountAFromLiquidity(e,t,n,!1),i.mul(ve).gte(o.amountOut)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=_.getNextSqrtPriceX64FromOutput(e,n,i.mul(ve),a);let u=t.eq(o.sqrtPriceX64Next);return a?(u&&c||(o.amountIn=X.getTokenAmountAFromLiquidity(o.sqrtPriceX64Next,e,n,!0)),u&&!c||(o.amountOut=X.getTokenAmountBFromLiquidity(o.sqrtPriceX64Next,e,n,!1))):(o.amountIn=u&&c?o.amountIn:X.getTokenAmountBFromLiquidity(e,o.sqrtPriceX64Next,n,!0),o.amountOut=u&&!c?o.amountOut:X.getTokenAmountAFromLiquidity(e,o.sqrtPriceX64Next,n,!1)),!c&&o.amountOut.gt(i.mul(ve))&&(o.amountOut=i.mul(ve)),c&&!o.sqrtPriceX64Next.eq(t)?o.feeAmount=i.sub(o.amountIn):o.feeAmount=V.mulDivCeil(o.amountIn,new F(r),Ht.sub(new F(r))),[o.sqrtPriceX64Next,o.amountIn,o.amountOut,o.feeAmount]}};import{PublicKey as er}from"@solana/web3.js";import tr from"bn.js";var ct=class{static getOutputAmountAndRemainAccounts(e,t,n,i,r){let o=n.equals(e.mintA.mint),a=[],{isExist:c,startIndex:u,nextAccountMeta:m}=this.getFirstInitializedTickArray(e,o);if(!c||u===void 0||!m)throw new Error("Invalid tick array");a.push(m);let{amountCalculated:b,accounts:l,sqrtPriceX64:y,feeAmount:f}=Ze.swapCompute(e.programId,e.id,t,o,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,i,u,r);return a.push(...l),{expectedAmountOut:b.mul(ve),remainingAccounts:a,executionPrice:y,feeAmount:f}}static getInputAmountAndRemainAccounts(e,t,n,i,r){let o=n.equals(e.mintB.mint),a=[],{isExist:c,startIndex:u,nextAccountMeta:m}=this.getFirstInitializedTickArray(e,o);if(!c||u===void 0||!m)throw new Error("Invalid tick array");a.push(m);let{amountCalculated:b,accounts:l,sqrtPriceX64:y,feeAmount:f}=Ze.swapCompute(e.programId,e.id,t,o,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,i.mul(ve),u,r);return a.push(...l),{expectedAmountIn:b,remainingAccounts:a,executionPrice:y,feeAmount:f}}static getFirstInitializedTickArray(e,t){let n=G.mergeTickArrayBitmap(e.tickArrayBitmap),{isInitialized:i,startIndex:r}=G.checkTickArrayIsInitialized(n,e.tickCurrent,e.tickSpacing);if(i){let{publicKey:c}=de(e.programId,e.id,r);return{isExist:!0,startIndex:r,nextAccountMeta:c}}let{isExist:o,nextStartIndex:a}=this.nextInitializedTickArrayStartIndex(e,t);if(o){let{publicKey:c}=de(e.programId,e.id,a);return{isExist:!0,startIndex:a,nextAccountMeta:c}}return{isExist:!1,nextAccountMeta:void 0,startIndex:void 0}}static nextInitializedTickArrayStartIndex(e,t){let n=G.mergeTickArrayBitmap(e.tickArrayBitmap),i=G.getTickArrayOffsetInBitmapByTick(e.tickCurrent,e.tickSpacing),r=t?G.searchLowBitFromStart(n,i-1,0,1,e.tickSpacing):G.searchHightBitFromStart(n,i,1024,1,e.tickSpacing);return r.length>0?{isExist:!0,nextStartIndex:r[0]}:{isExist:!1,nextStartIndex:0}}static updatePoolRewardInfos({chainTime:e,poolLiquidity:t,rewardInfos:n}){let i=[];for(let r of n){let o=Se(q({},r),{perSecond:V.x64ToDecimal(r.emissionsPerSecondX64),remainingRewards:void 0});if(o.tokenMint.equals(er.default))continue;if(e<=o.openTime.toNumber()||t.eq(U)){i.push(o);continue}let a=new tr(Math.min(o.endTime.toNumber(),e)),c=a.sub(o.lastUpdateTime),u=V.mulDivFloor(c,o.emissionsPerSecondX64,t),m=o.rewardGrowthGlobalX64.add(u),b=V.mulDivFloor(c,o.emissionsPerSecondX64,Ee),l=o.rewardTotalEmissioned.add(b);i.push(Se(q({},o),{rewardGrowthGlobalX64:m,rewardTotalEmissioned:l,lastUpdateTime:a}))}return i}};import ut from"bn.js";var It=class{static getfeeGrowthInside(e,t,n){let i=new ut(0),r=new ut(0);e.tickCurrent>=t.tick?(i=t.feeGrowthOutsideX64A,r=t.feeGrowthOutsideX64B):(i=e.feeGrowthGlobalX64A.sub(t.feeGrowthOutsideX64A),r=e.feeGrowthGlobalX64B.sub(t.feeGrowthOutsideX64B));let o=new ut(0),a=new ut(0);e.tickCurrent<n.tick?(o=n.feeGrowthOutsideX64A,a=n.feeGrowthOutsideX64B):(o=e.feeGrowthGlobalX64A.sub(n.feeGrowthOutsideX64A),a=e.feeGrowthGlobalX64B.sub(n.feeGrowthOutsideX64B));let c=V.wrappingSubU128(V.wrappingSubU128(e.feeGrowthGlobalX64A,i),o),u=V.wrappingSubU128(V.wrappingSubU128(e.feeGrowthGlobalX64B,r),a);return{feeGrowthInsideX64A:c,feeGrowthInsideBX64:u}}static GetPositionFees(e,t,n,i){let{feeGrowthInsideX64A:r,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,i),a=V.mulDivFloor(V.wrappingSubU128(r,t.feeGrowthInsideLastX64A),t.liquidity,Ee),c=t.tokenFeesOwedA.add(a),u=V.mulDivFloor(V.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,Ee),m=t.tokenFeesOwedB.add(u);return{tokenFeeAmountA:c,tokenFeeAmountB:m}}static GetPositionRewards(e,t,n,i){let r=[],o=this.getRewardGrowthInside(e.tickCurrent,n,i,e.rewardInfos);for(let a=0;a<o.length;a++){let c=o[a],u=t.rewardInfos[a],m=V.wrappingSubU128(c,u.growthInsideLastX64),b=V.mulDivFloor(m,t.liquidity,Ee),l=u.rewardAmountOwed.add(b);r.push(l)}return r}static getRewardGrowthInside(e,t,n,i){let r=[];for(let o=0;o<i.length;o++){let a=new ut(0);t.liquidityGross.eqn(0)?a=i[o].rewardGrowthGlobalX64:e<t.tick?a=i[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):a=t.rewardGrowthsOutsideX64[o];let c=new ut(0);n.liquidityGross.eqn(0)||(e<n.tick?c=n.rewardGrowthsOutsideX64[o]:c=i[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),r.push(V.wrappingSubU128(V.wrappingSubU128(i[o].rewardGrowthGlobalX64,a),c))}return r}};var fe=z.from("AmmV3"),Fe=class extends Ue{static makeCreatePoolTransaction(c){return N(this,arguments,function*({connection:e,programId:t,owner:n,mint1:i,mint2:r,ammConfig:o,initialPrice:a}){let[u,m,b]=i.mint._bn.gt(r.mint._bn)?[r,i,new W(1).div(a)]:[i,r,a],l=_.priceToSqrtPriceX64(b,u.decimals,m.decimals),y=new he;y.add(...xe());let f=yield this.makeCreatePoolInstructions({connection:e,programId:t,owner:n,mintA:u,mintB:m,ammConfigId:o.id,initialPriceX64:l});return y.add(...f.instructions),{signers:f.signers,transaction:y,mockPoolInfo:{id:f.address.poolId,mintA:{mint:u.mint,vault:f.address.mintAVault,decimals:u.decimals},mintB:{mint:m.mint,vault:f.address.mintBVault,decimals:m.decimals},ammConfig:o,observationId:f.address.observationId,creator:n,programId:t,version:6,tickSpacing:o.tickSpacing,liquidity:U,sqrtPriceX64:l,currentPrice:b,tickCurrent:0,observationIndex:0,observationUpdateDuration:0,feeGrowthGlobalX64A:U,feeGrowthGlobalX64B:U,protocolFeesTokenA:U,protocolFeesTokenB:U,swapInAmountTokenA:U,swapOutAmountTokenB:U,swapInAmountTokenB:U,swapOutAmountTokenA:U,tickArrayBitmap:[],rewardInfos:[],day:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},week:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},month:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},tvl:0}}})}static makeOpenPositionTransaction(u){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,tickLower:i,tickUpper:r,liquidity:o,slippage:a,associatedOnly:c=!0}){let m=[],b=[],l=[],{amountSlippageA:y,amountSlippageB:f}=X.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,_.getSqrtPriceX64FromTick(i),_.getSqrtPriceX64FromTick(r),o,!0,!0,a),d=n.useSOLBalance&&t.mintA.mint.equals(h.WSOL.mint),A=n.useSOLBalance&&t.mintB.mint.equals(h.WSOL.mint),k=yield this._selectOrCreateTokenAccount({mint:t.mintA.mint,tokenAccounts:d?[]:n.tokenAccounts,owner:n.wallet,createInfo:d?{connection:e,payer:n.feePayer,amount:y,frontInstructions:m,endInstructions:b,signers:l}:void 0,associatedOnly:d?!1:c}),P=yield this._selectOrCreateTokenAccount({mint:t.mintB.mint,tokenAccounts:A?[]:n.tokenAccounts,owner:n.wallet,createInfo:A?{connection:e,payer:n.feePayer,amount:f,frontInstructions:m,endInstructions:b,signers:l}:void 0,associatedOnly:A?!1:c});fe.assertArgument(k!==void 0&&P!==void 0,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let L=new he;L.add(...xe());let T=this.makeOpenPositionInstructions({poolInfo:t,ownerInfo:Se(q({},n),{tokenAccountA:k,tokenAccountB:P}),tickLower:i,tickUpper:r,liquidity:o,amountSlippageA:y,amountSlippageB:f});return L.add(...m,...T.instructions,...b),{signers:[...l,...T.signers],transaction:L,address:q({},T.address)}})}static makeIncreaseLiquidityTransaction(a){return N(this,arguments,function*({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,liquidity:r,slippage:o}){let c=[],u=[],m=[],{amountSlippageA:b,amountSlippageB:l}=X.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,_.getSqrtPriceX64FromTick(n.tickLower),_.getSqrtPriceX64FromTick(n.tickUpper),r,!0,!0,o),y,f;t.mintA.mint.equals(new Ne(me.mint))&&i.useSOLBalance?y=yield this._handleTokenAccount({connection:e,side:"in",amount:b,mint:t.mintA.mint,tokenAccount:null,owner:i.wallet,payer:i.feePayer,frontInstructions:c,endInstructions:u,signers:m,bypassAssociatedCheck:!0}):y=this._selectTokenAccount({tokenAccounts:i.tokenAccounts,mint:t.mintA.mint,owner:i.wallet,config:{associatedOnly:!1}}),t.mintB.mint.equals(new Ne(me.mint))&&i.useSOLBalance?f=yield this._handleTokenAccount({connection:e,side:"in",amount:l,mint:t.mintB.mint,tokenAccount:null,owner:i.wallet,payer:i.feePayer,frontInstructions:c,endInstructions:u,signers:m,bypassAssociatedCheck:!0}):f=this._selectTokenAccount({tokenAccounts:i.tokenAccounts,mint:t.mintB.mint,owner:i.wallet,config:{associatedOnly:!1}}),fe.assertArgument(!!y||!!f,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let d=new he;d.add(...xe());let A=this.makeIncreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:y,tokenAccountB:f},liquidity:r,amountSlippageA:b,amountSlippageB:l});return d.add(...c,...A.instructions,...u),{signers:[...m,...A.signers],transaction:d,address:q({},A.address)}})}static makeDecreaseLiquidityTransaction(m){return N(this,arguments,function*({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:i,liquidity:r,amountMinA:o,amountMinB:a,slippage:c,associatedOnly:u=!0}){let b=[],l=[],y=[],f,d;if(o!==void 0&&a!==void 0)f=o,d=a;else{let{amountSlippageA:R,amountSlippageB:C}=X.getAmountsFromLiquidityWithSlippage(t.sqrtPriceX64,_.getSqrtPriceX64FromTick(n.tickLower),_.getSqrtPriceX64FromTick(n.tickUpper),r,!1,!0,c!=null?c:0);f=R,d=C}let A=i.useSOLBalance&&t.mintA.mint.equals(h.WSOL.mint),k=i.useSOLBalance&&t.mintB.mint.equals(h.WSOL.mint),P=yield this._selectOrCreateTokenAccount({mint:t.mintA.mint,tokenAccounts:A?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,signers:y},associatedOnly:A?!1:u}),L=yield this._selectOrCreateTokenAccount({mint:t.mintB.mint,tokenAccounts:k?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,signers:y},associatedOnly:k?!1:u}),T=[];for(let R of t.rewardInfos){let C=i.useSOLBalance&&R.tokenMint.equals(h.WSOL.mint),K=yield this._selectOrCreateTokenAccount({mint:R.tokenMint,tokenAccounts:C?[]:i.tokenAccounts,owner:i.wallet,createInfo:{connection:e,payer:i.feePayer,amount:0,frontInstructions:b,endInstructions:C?l:[],signers:y},associatedOnly:C?!1:u});T.push(K)}fe.assertArgument(!!P||!!L,"cannot found target token accounts","tokenAccounts",i.tokenAccounts);let w=new he;w.add(...xe());let D=this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:i.wallet,tokenAccountA:P,tokenAccountB:L,rewardAccounts:T},liquidity:r,amountMinA:f,amountMinB:d});return w.add(...b,...D.instructions,...l),i.closePosition&&w.add(...this.makeClosePositionInstructions({poolInfo:t,ownerInfo:i,ownerPosition:n}).instructions),{signers:[...y,...D.signers],transaction:w,address:q({},D.address)}})}static makeSwapBaseInTransaction(u){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,inputMint:i,amountIn:r,amountOutMin:o,priceLimit:a,remainingAccounts:c}){let m=[],b=[],l=[],y;!a||a.equals(new W(0))?y=i.equals(t.mintA.mint)?Ce.add(Z):De.sub(Z):y=_.priceToSqrtPriceX64(a,t.mintA.decimals,t.mintB.decimals);let f=t.mintA.mint.equals(i),d,A;t.mintA.mint.equals(new Ne(me.mint))&&n.useSOLBalance?d=yield this._handleTokenAccount({connection:e,side:"in",amount:f?r:0,mint:t.mintA.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):d=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintA.mint,owner:n.wallet,config:{associatedOnly:!1}}),t.mintB.mint.equals(new Ne(me.mint))&&n.useSOLBalance?A=yield this._handleTokenAccount({connection:e,side:"in",amount:f?0:r,mint:t.mintB.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):A=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintB.mint,owner:n.wallet,config:{associatedOnly:!1}}),fe.assertArgument(!!d||!!A,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let k=new he;k.add(...xe());let P=this.makeSwapBaseInInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccountA:d,tokenAccountB:A},inputMint:i,amountIn:r,amountOutMin:o,sqrtPriceLimitX64:y,remainingAccounts:c});return k.add(...m,...P.instructions,...b),{signers:[...l,...P.signers],transaction:k,address:q({},P.address)}})}static makeSwapBaseOutTransaction(u){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,outputMint:i,amountOut:r,amountInMax:o,priceLimit:a,remainingAccounts:c}){let m=[],b=[],l=[],y;!a||a.equals(new W(0))?y=i.equals(t.mintB.mint)?Ce.add(Z):De.sub(Z):y=_.priceToSqrtPriceX64(a,t.mintA.decimals,t.mintB.decimals);let f=t.mintA.mint.equals(i),d,A;t.mintA.mint.equals(new Ne(me.mint))&&n.useSOLBalance?d=yield this._handleTokenAccount({connection:e,side:"in",amount:f?o:0,mint:t.mintA.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):d=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintA.mint,owner:n.wallet,config:{associatedOnly:!1}}),t.mintB.mint.equals(new Ne(me.mint))&&n.useSOLBalance?A=yield this._handleTokenAccount({connection:e,side:"in",amount:f?0:o,mint:t.mintB.mint,tokenAccount:null,owner:n.wallet,payer:n.feePayer,frontInstructions:m,endInstructions:b,signers:l,bypassAssociatedCheck:!0}):A=this._selectTokenAccount({tokenAccounts:n.tokenAccounts,mint:t.mintB.mint,owner:n.wallet,config:{associatedOnly:!1}}),fe.assertArgument(!!d||!!A,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let k=new he;k.add(...xe());let P=this.makeSwapBaseOutInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccountA:d,tokenAccountB:A},outputMint:i,amountOut:r,amountInMax:o,sqrtPriceLimitX64:y,remainingAccounts:c});return k.add(...m,...P.instructions,...b),{signers:[...l,...P.signers],transaction:k,address:q({},P.address)}})}static makeCLosePositionTransaction({poolInfo:e,ownerPosition:t,ownerInfo:n}){let i=this.makeClosePositionInstructions({poolInfo:e,ownerInfo:n,ownerPosition:t}),r=new he;return r.add(...i.instructions),{signers:i.signers,transaction:r,address:q({},i.address)}}static makeInitRewardTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,associatedOnly:r=!0}){fe.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i);let a=[],c=[],u=[],m=n.useSOLBalance&&i.mint.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i.mint,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:m?{connection:e,payer:n.feePayer,amount:new ue(new W(i.perSecond.sub(i.endTime-i.openTime).toFixed(0)).gte(i.perSecond.sub(i.endTime-i.openTime))?i.perSecond.sub(i.endTime-i.openTime).toFixed(0):i.perSecond.sub(i.endTime-i.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:u}:void 0,associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new he;l.add(...xe());let y=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardInfo:{mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:V.decimalToX64(i.perSecond)}});return l.add(...a,...y.instructions,...c),{signers:[...u,...y.signers],transaction:l,address:q({},y.address)}})}static makeInitRewardsTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,associatedOnly:r=!0}){for(let l of i)fe.assertArgument(l.endTime>l.openTime,"reward time error","rewardInfo",l);let a=new he;a.add(...xe());let c=[],u=[],m=[],b=[];for(let l of i){let y=n.useSOLBalance&&l.mint.equals(h.WSOL.mint),f=yield this._selectOrCreateTokenAccount({mint:l.mint,tokenAccounts:y?[]:n.tokenAccounts,owner:n.wallet,createInfo:y?{connection:e,payer:n.feePayer,amount:new ue(new W(l.perSecond.sub(l.endTime-l.openTime).toFixed(0)).gte(l.perSecond.sub(l.endTime-l.openTime))?l.perSecond.sub(l.endTime-l.openTime).toFixed(0):l.perSecond.sub(l.endTime-l.openTime).add(1).toFixed(0)),frontInstructions:c,endInstructions:u,signers:b}:void 0,associatedOnly:y?!1:r});fe.assertArgument(f,"no money","ownerRewardAccount",n.tokenAccounts);let d=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:f},rewardInfo:{mint:l.mint,openTime:l.openTime,endTime:l.endTime,emissionsPerSecondX64:V.decimalToX64(l.perSecond)}});m.push(...d.instructions)}return a.add(...c,...m,...u),{signers:[...b],transaction:a,address:{}}})}static makeSetRewardTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:i,associatedOnly:r=!0}){fe.assertArgument(i.endTime>i.openTime,"reward time error","rewardInfo",i);let a=[],c=[],u=[],m=n.useSOLBalance&&i.mint.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i.mint,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:m?{connection:e,payer:n.feePayer,amount:new ue(new W(i.perSecond.sub(i.endTime-i.openTime).toFixed(0)).gte(i.perSecond.sub(i.endTime-i.openTime))?i.perSecond.sub(i.endTime-i.openTime).toFixed(0):i.perSecond.sub(i.endTime-i.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:u}:void 0,associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new he;l.add(...xe());let y=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardInfo:{mint:i.mint,openTime:i.openTime,endTime:i.endTime,emissionsPerSecondX64:V.decimalToX64(i.perSecond)}});return l.add(...a,...y.instructions,...c),{signers:[...u,...y.signers],transaction:l,address:q({},y.address)}})}static makeSetRewardsTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=[],b=new he;b.add(...xe());for(let l of i){fe.assertArgument(l.endTime>l.openTime,"reward time error","rewardInfo",l);let y=n.useSOLBalance&&l.mint.equals(h.WSOL.mint),f=yield this._selectOrCreateTokenAccount({mint:l.mint,tokenAccounts:y?[]:n.tokenAccounts,owner:n.wallet,createInfo:y?{connection:e,payer:n.feePayer,amount:new ue(new W(l.perSecond.sub(l.endTime-l.openTime).toFixed(0)).gte(l.perSecond.sub(l.endTime-l.openTime))?l.perSecond.sub(l.endTime-l.openTime).toFixed(0):l.perSecond.sub(l.endTime-l.openTime).add(1).toFixed(0)),frontInstructions:a,endInstructions:c,signers:m}:void 0,associatedOnly:y?!1:r});fe.assertArgument(f,"no money","ownerRewardAccount",n.tokenAccounts);let d=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:f},rewardInfo:{mint:l.mint,openTime:l.openTime,endTime:l.endTime,emissionsPerSecondX64:V.decimalToX64(l.perSecond)}});u.push(...d.instructions)}return b.add(...a,...u,...c),{signers:[...m],transaction:b,address:{}}})}static makeCollectRewardTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardMint:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=n.useSOLBalance&&i.equals(h.WSOL.mint),b=yield this._selectOrCreateTokenAccount({mint:i,tokenAccounts:m?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:m?c:[],signers:u},associatedOnly:m?!1:r});fe.assertArgument(b,"no money","ownerRewardAccount",n.tokenAccounts);let l=new he;l.add(...xe());let y=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:b},rewardMint:i});return l.add(...a,...y.instructions,...c),{signers:[...u,...y.signers],transaction:l,address:q({},y.address)}})}static makeCollectRewardsTransaction(o){return N(this,arguments,function*({connection:e,poolInfo:t,ownerInfo:n,rewardMints:i,associatedOnly:r=!0}){let a=[],c=[],u=[],m=new he;m.add(...xe());let b=[];for(let l of i){let y=n.useSOLBalance&&l.equals(h.WSOL.mint),f=yield this._selectOrCreateTokenAccount({mint:l,tokenAccounts:y?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:y?c:[],signers:b},associatedOnly:y?!1:r});fe.assertArgument(f,"no money","ownerRewardAccount",n.tokenAccounts);let d=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:f},rewardMint:l});u.push(...d.instructions)}return m.add(...a,...u,...c),{signers:[...b],transaction:m,address:{}}})}static makeHarvestAllRewardTransaction(r){return N(this,arguments,function*({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:i=!0}){var y,f,d;let o={};for(let A of n.tokenAccounts)i?Xe(n.wallet,A.accountInfo.mint).publicKey.equals(A.pubkey)&&(o[A.accountInfo.mint.toString()]=A.pubkey):o[A.accountInfo.mint.toString()]=A.pubkey;let a=[],c=[],u=[],m=[];for(let A of Object.values(t)){if(A.positionAccount===void 0||!A.positionAccount.find(R=>!R.tokenFeeAmountA.isZero()||!R.tokenFeeAmountB.isZero()||R.rewardInfos.find(C=>!C.pendingReward.isZero())))continue;let k=A.state,P=n.useSOLBalance&&k.mintA.mint.equals(h.WSOL.mint),L=n.useSOLBalance&&k.mintB.mint.equals(h.WSOL.mint),T=(y=o[k.mintA.mint.toString()])!=null?y:yield this._selectOrCreateTokenAccount({mint:k.mintA.mint,tokenAccounts:P?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,signers:m},associatedOnly:P?!1:i}),w=(f=o[k.mintB.mint.toString()])!=null?f:yield this._selectOrCreateTokenAccount({mint:k.mintB.mint,tokenAccounts:L?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,signers:m},associatedOnly:L?!1:i});o[k.mintA.mint.toString()]=T,o[k.mintB.mint.toString()]=w;let D=[];for(let R of k.rewardInfos){let C=n.useSOLBalance&&R.tokenMint.equals(h.WSOL.mint),K=(d=o[R.tokenMint.toString()])!=null?d:yield this._selectOrCreateTokenAccount({mint:R.tokenMint,tokenAccounts:C?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:a,endInstructions:C?c:[],signers:m},associatedOnly:C?!1:i});o[R.tokenMint.toString()]=K,D.push(K)}for(let R of A.positionAccount)u.push(...this.makeDecreaseLiquidityInstructions({poolInfo:k,ownerPosition:R,ownerInfo:{wallet:n.wallet,tokenAccountA:T,tokenAccountB:w,rewardAccounts:D},liquidity:U,amountMinA:U,amountMinB:U}).instructions)}let b=[...a,...u,...c];return{transactions:mn({instructions:b,signers:m,payer:n.wallet}),address:{}}})}static makeCreatePoolInstructions(c){return N(this,arguments,function*({connection:e,programId:t,owner:n,mintA:i,mintB:r,ammConfigId:o,initialPriceX64:a}){let u=new gi,m=[nr.createAccount({fromPubkey:n,newAccountPubkey:u.publicKey,lamports:yield e.getMinimumBalanceForRentExemption(pn.span),space:pn.span,programId:t})],b=zn(t,o,i.mint,r.mint).publicKey,l=ln(t,b,i.mint).publicKey,y=ln(t,b,r.mint).publicKey;return m.push(ni(t,b,n,o,u.publicKey,i.mint,l,r.mint,y,a)),{signers:[u],instructions:m,address:{poolId:b,observationId:u.publicKey,mintAVault:l,mintBVault:y}}})}static makeOpenPositionInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:i,liquidity:r,amountSlippageA:o,amountSlippageB:a}){let c=[],u=new gi;c.push(u);let m=G.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),b=G.getTickArrayStartIndexByTick(i,e.ammConfig.tickSpacing),{publicKey:l}=de(e.programId,e.id,m),{publicKey:y}=de(e.programId,e.id,b),{publicKey:f}=Xe(t.wallet,u.publicKey),{publicKey:d}=Zn(u.publicKey),{publicKey:A}=rt(e.programId,u.publicKey),{publicKey:k}=Gt(e.programId,e.id,n,i),P=ii(e.programId,t.feePayer,e.id,t.wallet,u.publicKey,f,d,k,l,y,A,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,n,i,m,b,r,o,a);return{signers:[u],instructions:[P],address:{}}}static makeIncreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountSlippageA:r,amountSlippageB:o}){let a=G.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),c=G.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=de(e.programId,e.id,a),{publicKey:m}=de(e.programId,e.id,c),{publicKey:b}=Xe(n.wallet,t.nftMint),{publicKey:l}=rt(e.programId,t.nftMint),{publicKey:y}=Gt(e.programId,e.id,t.tickLower,t.tickUpper),f=[];return f.push(ri(e.programId,n.wallet,b,l,e.id,y,u,m,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,i,r,o)),{signers:[],instructions:f,address:{}}}static makeDecreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:i,amountMinA:r,amountMinB:o}){let a=G.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),c=G.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=de(e.programId,e.id,a),{publicKey:m}=de(e.programId,e.id,c),{publicKey:b}=Xe(n.wallet,t.nftMint),{publicKey:l}=rt(e.programId,t.nftMint),{publicKey:y}=Gt(e.programId,e.id,t.tickLower,t.tickUpper),f=[];for(let A=0;A<e.rewardInfos.length;A++)f.push({poolRewardVault:e.rewardInfos[A].tokenVault,ownerRewardVault:n.rewardAccounts[A]});let d=[];return d.push(si(e.programId,n.wallet,b,l,e.id,y,u,m,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,f,i,r,o)),{signers:[],instructions:d,address:{}}}static makeClosePositionInstructions({poolInfo:e,ownerInfo:t,ownerPosition:n}){let{publicKey:i}=Xe(t.wallet,n.nftMint),{publicKey:r}=rt(e.programId,n.nftMint),o=[];return o.push(oi(e.programId,t.wallet,n.nftMint,i,r)),{signers:[],instructions:o,address:{}}}static makeSwapBaseInInstructions({poolInfo:e,ownerInfo:t,inputMint:n,amountIn:i,amountOutMin:r,sqrtPriceLimitX64:o,remainingAccounts:a}){let c=e.mintA.mint.equals(n),u=[bn(e.programId,t.wallet,e.id,e.ammConfig.id,c?t.tokenAccountA:t.tokenAccountB,c?t.tokenAccountB:t.tokenAccountA,c?e.mintA.vault:e.mintB.vault,c?e.mintB.vault:e.mintA.vault,a,e.observationId,i,r,o,!0)];return{signers:[],instructions:u,address:{}}}static makeSwapBaseOutInstructions({poolInfo:e,ownerInfo:t,outputMint:n,amountOut:i,amountInMax:r,sqrtPriceLimitX64:o,remainingAccounts:a}){let c=e.mintA.mint.equals(n),u=[bn(e.programId,t.wallet,e.id,e.ammConfig.id,c?t.tokenAccountB:t.tokenAccountA,c?t.tokenAccountA:t.tokenAccountB,c?e.mintB.vault:e.mintA.vault,c?e.mintA.vault:e.mintB.vault,a,e.observationId,i,r,o,!1)];return{signers:[],instructions:u,address:{}}}static makeInitRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let i=Qn(e.programId,e.id,n.mint).publicKey,r=Yt(e.programId).publicKey,o=[ai(e.programId,t.wallet,e.id,r,e.ammConfig.id,t.tokenAccount,n.mint,i,n.openTime,n.endTime,n.emissionsPerSecondX64)];return{signers:[],instructions:o,address:{}}}static makeSetRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let i,r;for(let c=0;c<e.rewardInfos.length;c++)e.rewardInfos[c].tokenMint.equals(n.mint)&&(i=c,r=e.rewardInfos[c].tokenVault);fe.assertArgument(i!==void 0&&r!==void 0,"reward mint check error","no reward mint",e.rewardInfos);let o=Yt(e.programId).publicKey,a=[ci(e.programId,t.wallet,e.id,o,e.ammConfig.id,t.tokenAccount,r,i,n.openTime,n.endTime,n.emissionsPerSecondX64)];return{signers:[],instructions:a,address:{}}}static makeCollectRewardInstructions({poolInfo:e,ownerInfo:t,rewardMint:n}){let i,r;for(let a=0;a<e.rewardInfos.length;a++)e.rewardInfos[a].tokenMint.equals(n)&&(i=a,r=e.rewardInfos[a].tokenVault);fe.assertArgument(i!==void 0&&r!==void 0,"reward mint check error","no reward mint",e.rewardInfos);let o=[ui(e.programId,t.wallet,e.id,t.tokenAccount,r,i)];return{signers:[],instructions:o,address:{}}}static getLiquidityAmountOutFromAmountIn({poolInfo:e,inputA:t,tickLower:n,tickUpper:i,amount:r,slippage:o,add:a}){let c=e.sqrtPriceX64,u=_.getSqrtPriceX64FromTick(n),m=_.getSqrtPriceX64FromTick(i),b=a?1-o:1+o,l=r.mul(new ue(Math.floor(b*1e6))).div(new ue(1e6)),y;if(c.lte(u))y=t?X.getLiquidityFromTokenAmountA(u,m,l,!a):new ue(0);else if(c.lte(m)){let A=X.getLiquidityFromTokenAmountA(c,m,l,!a),k=X.getLiquidityFromTokenAmountB(u,c,l);y=t?A:k}else y=t?new ue(0):X.getLiquidityFromTokenAmountB(u,m,l);let f=X.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,u,m,y,a,!a,o),d=X.getAmountsFromLiquidity(e.sqrtPriceX64,u,m,y,!a);return q(q({liquidity:y},f),d)}static getAmountsFromLiquidity({poolInfo:e,ownerPosition:t,liquidity:n,slippage:i,add:r}){let o=_.getSqrtPriceX64FromTick(t.tickLower),a=_.getSqrtPriceX64FromTick(t.tickUpper);return X.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,o,a,n,r,r,i)}static getPriceAndTick({poolInfo:e,price:t,baseIn:n}){let i=n?t:new W(1).div(t),r=at.getTickWithPriceAndTickspacing(i,e.ammConfig.tickSpacing,e.mintA.decimals,e.mintB.decimals),o=_.getSqrtPriceX64FromTick(r),a=_.sqrtPriceX64ToPrice(o,e.mintA.decimals,e.mintB.decimals);return n?{tick:r,price:a}:{tick:r,price:new W(1).div(a)}}static getTickPrice({poolInfo:e,tick:t,baseIn:n}){let i=_.getSqrtPriceX64FromTick(t),r=_.sqrtPriceX64ToPrice(i,e.mintA.decimals,e.mintB.decimals);return n?{tick:t,price:r,tickSqrtPriceX64:i}:{tick:t,price:new W(1).div(r),tickSqrtPriceX64:i}}static computeAmountOutFormat({poolInfo:e,tickArrayCache:t,amountIn:n,currencyOut:i,slippage:r}){let o=n instanceof M,a=(o?n.token:h.WSOL).mint,c=n.raw,u=r.numerator.toNumber()/r.denominator.toNumber(),{amountOut:m,minAmountOut:b,currentPrice:l,executionPrice:y,priceImpact:f,fee:d,remainingAccounts:A}=Fe.computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:a,amountIn:c,slippage:u}),k=i instanceof h?new M(i,m):new ae(i,m),P=i instanceof h?new M(i,b):new ae(i,b),L=new ie(o?n.token:n.currency,new ue(10).pow(new ue(20+(o?n.token:n.currency).decimals)),i instanceof h?i:h.WSOL,l.mul(new W(ze(10,20+(i instanceof h?i:h.WSOL).decimals))).toFixed(0)),T=new ie(o?n.token:n.currency,new ue(10).pow(new ue(20+(o?n.token:n.currency).decimals)),i instanceof h?i:h.WSOL,y.mul(new W(ze(10,20+(i instanceof h?i:h.WSOL).decimals))).toFixed(0)),w=o?new M(n.token,d):new ae(n.currency,d);return{amountOut:k,minAmountOut:P,currentPrice:L,executionPrice:T,priceImpact:f,fee:w,remainingAccounts:A}}static computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:n,amountIn:i,slippage:r,priceLimit:o=new W(0)}){let a;o.equals(new W(0))?a=n.equals(e.mintA.mint)?Ce.add(Z):De.sub(Z):a=_.priceToSqrtPriceX64(o,e.mintA.decimals,e.mintB.decimals);let{expectedAmountOut:c,remainingAccounts:u,executionPrice:m,feeAmount:b}=ct.getOutputAmountAndRemainAccounts(e,t,n,i,a),l=_.sqrtPriceX64ToPrice(m,e.mintA.decimals,e.mintB.decimals),y=n.equals(e.mintA.mint)?l:new W(1).div(l),f=c.mul(new ue(Math.floor((1-r)*1e10))).div(new ue(1e10)),d=e.mintA.mint.equals(n)?e.currentPrice:new W(1).div(e.currentPrice),A=new W(y).sub(d).abs(),k=d,P=new ke(new W(A).mul(ze(10,15)).toFixed(0),new W(k).mul(ze(10,15)).toFixed(0));return{amountOut:c,minAmountOut:f,currentPrice:e.currentPrice,executionPrice:y,priceImpact:P,fee:b,remainingAccounts:u}}static computeAmountIn({poolInfo:e,tickArrayCache:t,baseMint:n,amountOut:i,slippage:r,priceLimit:o=new W(0)}){let a;o.equals(new W(0))?a=n.equals(e.mintB.mint)?Ce.add(Z):De.sub(Z):a=_.priceToSqrtPriceX64(o,e.mintA.decimals,e.mintB.decimals);let{expectedAmountIn:c,remainingAccounts:u,executionPrice:m,feeAmount:b}=ct.getInputAmountAndRemainAccounts(e,t,n,i,a),l=_.sqrtPriceX64ToPrice(m,e.mintA.decimals,e.mintB.decimals),y=n.equals(e.mintA.mint)?l:new W(1).div(l),f=c.mul(new ue(Math.floor((1+r)*1e10))).div(new ue(1e10)),d=e.mintA.mint.equals(n)?e.currentPrice:new W(1).div(e.currentPrice),A=new W(y).sub(d).abs(),k=d,P=new ke(new W(A).mul(ze(10,15)).toFixed(0),new W(k).mul(ze(10,15)).toFixed(0));return{amountIn:c,maxAmountIn:f,currentPrice:e.currentPrice,executionPrice:y,priceImpact:P,fee:b,remainingAccounts:u}}static estimateAprsForPriceRangeMultiplier({poolInfo:e,aprType:t,positionTickLowerIndex:n,positionTickUpperIndex:i}){let r=e[t],o=this.getTickPrice({poolInfo:e,tick:n,baseIn:!0}).price.toNumber(),a=this.getTickPrice({poolInfo:e,tick:i,baseIn:!0}).price.toNumber(),c=Math.max(o,r.priceMin),m=Math.min(a,r.priceMax)-c,b=a-o,l=r.priceMax-r.priceMin,y;return m<=0?y=0:b===m?y=l/m:l===m?y=m/b:y=m/l*(m/b),{feeApr:r.feeApr*y,rewardsApr:[r.rewardApr.A*y,r.rewardApr.B*y,r.rewardApr.C*y],apr:r.apr*y}}static estimateAprsForPriceRangeDelta({poolInfo:e,aprType:t,mintPrice:n,rewardMintDecimals:i,liquidity:r,positionTickLowerIndex:o,positionTickUpperIndex:a,chainTime:c}){let u=t==="day"?1:t==="week"?7:t==="month"?30:0,m=e[t],b=n[e.mintA.mint.toString()],l=n[e.mintB.mint.toString()],y=e.mintA.decimals,f=e.mintB.decimals;if(!m||!b||!l)return{feeApr:0,rewardsApr:[0,0,0],apr:0};let d=_.getSqrtPriceX64FromTick(o),A=_.getSqrtPriceX64FromTick(a),{amountSlippageA:k,amountSlippageB:P}=X.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,d,A,e.liquidity,!1,!1,0),{amountSlippageA:L,amountSlippageB:T}=X.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,d,A,r,!1,!1,0),w=new W(k.toString()).div(new W(10).pow(y)).mul(b.toFixed(y)).add(new W(P.toString()).div(new W(10).pow(f)).mul(l.toFixed(f))),D=new W(L.toString()).div(new W(10).pow(y)).mul(b.toFixed(y)).add(new W(T.toString()).div(new W(10).pow(f)).mul(l.toFixed(f))),R=D.div(w.add(D)).div(D),K=new W(m.volumeFee).mul(365).div(u).mul(R).mul(100).toNumber(),Q=3600*24*365,j=e.rewardInfos.map(Y=>{let te=i[Y.tokenMint.toString()],oe=n[Y.tokenMint.toString()];return c<Y.openTime.toNumber()||c>Y.endTime.toNumber()||Y.perSecond.equals(0)||!oe||te===void 0?0:new W(oe.toFixed(te)).mul(Y.perSecond.mul(Q)).div(new W(10).pow(te)).mul(R).mul(100).toNumber()});return{feeApr:K,rewardsApr:j,apr:K+j.reduce((Y,te)=>Y+te,0)}}static fetchMultiplePoolInfos(o){return N(this,arguments,function*({connection:e,poolKeys:t,ownerInfo:n,chainTime:i,batchRequest:r=!1}){var b;let a=yield Oe(e,t.map(l=>new Ne(l.id)),{batchRequest:r}),c=[],u={},m=[];for(let l=0;l<t.length;l++){let y=t[l],f=a[l];if(f===null)continue;let d=jn.decode(f.data);u[y.id]={state:{id:new Ne(y.id),mintA:{mint:d.mintA,vault:d.vaultA,decimals:d.mintDecimalsA},mintB:{mint:d.mintB,vault:d.vaultB,decimals:d.mintDecimalsB},observationId:d.observationId,ammConfig:Se(q({},y.ammConfig),{id:new Ne(y.ammConfig.id)}),creator:d.creator,programId:f.owner,version:6,tickSpacing:d.tickSpacing,liquidity:d.liquidity,sqrtPriceX64:d.sqrtPriceX64,currentPrice:_.sqrtPriceX64ToPrice(d.sqrtPriceX64,d.mintDecimalsA,d.mintDecimalsB),tickCurrent:d.tickCurrent,observationIndex:d.observationIndex,observationUpdateDuration:d.observationUpdateDuration,feeGrowthGlobalX64A:d.feeGrowthGlobalX64A,feeGrowthGlobalX64B:d.feeGrowthGlobalX64B,protocolFeesTokenA:d.protocolFeesTokenA,protocolFeesTokenB:d.protocolFeesTokenB,swapInAmountTokenA:d.swapInAmountTokenA,swapOutAmountTokenB:d.swapOutAmountTokenB,swapInAmountTokenB:d.swapInAmountTokenB,swapOutAmountTokenA:d.swapOutAmountTokenA,tickArrayBitmap:d.tickArrayBitmap,rewardInfos:ct.updatePoolRewardInfos({chainTime:i,poolLiquidity:d.liquidity,rewardInfos:d.rewardInfos.filter(A=>!A.tokenMint.equals(Ne.default))}),day:y.day,week:y.week,month:y.month,tvl:y.tvl}},n&&m.push(...u[y.id].state.rewardInfos.filter(A=>A.creator.equals(n.wallet))),c.find(A=>A.equals(f.owner))||c.push(f.owner)}if(n){let l=n.tokenAccounts.filter(L=>L.accountInfo.amount.eq(new ue(1))).map(L=>L.accountInfo.mint),y=[];for(let L of l)for(let T of c)y.push(rt(T,L).publicKey);let f=yield Oe(e,y,{batchRequest:r}),d={};for(let L of f){if(L===null)continue;let T=$n.decode(L.data),w=T.poolId.toString(),D=u[w];if(D===void 0)continue;let R=D.state,C=this.getTickPrice({poolInfo:R,tick:T.tickLower,baseIn:!0}),K=this.getTickPrice({poolInfo:R,tick:T.tickUpper,baseIn:!0}),{amountA:Q,amountB:j}=X.getAmountsFromLiquidity(R.sqrtPriceX64,C.tickSqrtPriceX64,K.tickSqrtPriceX64,T.liquidity,!1),Y=1/(1-Math.sqrt(Math.sqrt(C.price.div(K.price).toNumber())));u[w].positionAccount=[...(b=u[w].positionAccount)!=null?b:[],{poolId:T.poolId,nftMint:T.nftMint,priceLower:C.price,priceUpper:K.price,amountA:Q,amountB:j,tickLower:T.tickLower,tickUpper:T.tickUpper,liquidity:T.liquidity,feeGrowthInsideLastX64A:T.feeGrowthInsideLastX64A,feeGrowthInsideLastX64B:T.feeGrowthInsideLastX64B,tokenFeesOwedA:T.tokenFeesOwedA,tokenFeesOwedB:T.tokenFeesOwedB,rewardInfos:T.rewardInfos.map(ne=>Se(q({},ne),{pendingReward:new ue(0)})),leverage:Y,tokenFeeAmountA:new ue(0),tokenFeeAmountB:new ue(0)}];let te=G.getTickArrayAddressByTick(u[w].state.programId,T.poolId,T.tickLower,u[w].state.tickSpacing),oe=G.getTickArrayAddressByTick(u[w].state.programId,T.poolId,T.tickUpper,u[w].state.tickSpacing);d[`${u[w].state.programId.toString()}-${T.poolId.toString()}-${T.tickLower}`]=te,d[`${u[w].state.programId.toString()}-${T.poolId.toString()}-${T.tickUpper}`]=oe}let A=Object.values(d),k=yield Oe(e,A,{batchRequest:r}),P={};for(let L=0;L<A.length;L++){let T=k[L];if(T===null)continue;let w=A[L].toString();P[w]=kt.decode(T.data)}for(let{state:L,positionAccount:T}of Object.values(u))if(!!T)for(let w of T){let D=`${L.programId.toString()}-${L.id.toString()}-${w.tickLower}`,R=`${L.programId.toString()}-${L.id.toString()}-${w.tickUpper}`,C=P[d[D].toString()],K=P[d[R].toString()],Q=C.ticks[G.getTickOffsetInArray(w.tickLower,L.tickSpacing)],j=K.ticks[G.getTickOffsetInArray(w.tickUpper,L.tickSpacing)],{tokenFeeAmountA:Y,tokenFeeAmountB:te}=It.GetPositionFees(L,w,Q,j),oe=It.GetPositionRewards(L,w,Q,j);w.tokenFeeAmountA=Y.gte(U)?Y:U,w.tokenFeeAmountB=te.gte(U)?te:U;for(let ne=0;ne<oe.length;ne++)w.rewardInfos[ne].pendingReward=oe[ne].gte(U)?oe[ne]:U}}if(m.length>0){let l=m.map(d=>d.tokenVault),y=yield Oe(e,l,{batchRequest:r}),f={};for(let d=0;d<l.length;d++){let A=l[d].toString(),k=y[d];if(k===null)continue;let P=Pt.decode(k.data);f[A]=P.amount}for(let d of m){let A=f[d.tokenVault.toString()];d.remainingRewards=A!==void 0?A.sub(d.rewardTotalEmissioned):U}}return u})}static fetchMultiplePoolTickArrays(i){return N(this,arguments,function*({connection:e,poolKeys:t,batchRequest:n}){let r={},o=[];for(let u of t){let m=G.mergeTickArrayBitmap(u.tickArrayBitmap),b=G.getTickArrayStartIndexByTick(u.tickCurrent,u.tickSpacing),l=G.getInitializedTickArrayInRange(m,u.tickSpacing,b,Math.floor(fn/2));for(let y of l){let{publicKey:f}=de(u.programId,u.id,y);o.push({pubkey:f}),r[f.toString()]=u.id}}let a=yield Xn(e,o,{batchRequest:n}),c={};for(let u of a){if(!u.accountInfo)continue;let m=r[u.pubkey.toString()];if(!m)continue;c[m]===void 0&&(c[m]={});let b=kt.decode(u.accountInfo.data);c[m][b.startTickIndex]=Se(q({},b),{address:u.pubkey})}return c})}static getWhiteListMint(n){return N(this,arguments,function*({connection:e,programId:t}){let i=yield e.getAccountInfo(Yt(t).publicKey);return i?ei.decode(i.data).whitelistMints.filter(o=>!o.equals(Ne.default)):[]})}};import{PublicKey as ki}from"@solana/web3.js";var Pi="675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",ir=new ki(Pi),Ti="5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h",or=new ki(Ti),wi={[Pi]:4,[Ti]:5},Li={4:ir,5:or},Ii={4:3,5:3};var rr=O([S("status"),S("nonce"),S("maxOrder"),S("depth"),S("baseDecimal"),S("quoteDecimal"),S("state"),S("resetFlag"),S("minSize"),S("volMaxCutRatio"),S("amountWaveRatio"),S("baseLotSize"),S("quoteLotSize"),S("minPriceMultiplier"),S("maxPriceMultiplier"),S("systemDecimalValue"),S("minSeparateNumerator"),S("minSeparateDenominator"),S("tradeFeeNumerator"),S("tradeFeeDenominator"),S("pnlNumerator"),S("pnlDenominator"),S("swapFeeNumerator"),S("swapFeeDenominator"),S("baseNeedTakePnl"),S("quoteNeedTakePnl"),S("quoteTotalPnl"),S("baseTotalPnl"),E("quoteTotalDeposited"),E("baseTotalDeposited"),E("swapBaseInAmount"),E("swapQuoteOutAmount"),S("swapBase2QuoteFee"),E("swapQuoteInAmount"),E("swapBaseOutAmount"),S("swapQuote2BaseFee"),B("baseVault"),B("quoteVault"),B("baseMint"),B("quoteMint"),B("lpMint"),B("openOrders"),B("marketId"),B("marketProgramId"),B("targetOrders"),B("withdrawQueue"),B("lpVault"),B("owner"),S("lpReserve"),ee(S(),3,"padding")]),sr=O([S("accountType"),S("status"),S("nonce"),S("maxOrder"),S("depth"),S("baseDecimal"),S("quoteDecimal"),S("state"),S("resetFlag"),S("minSize"),S("volMaxCutRatio"),S("amountWaveRatio"),S("baseLotSize"),S("quoteLotSize"),S("minPriceMultiplier"),S("maxPriceMultiplier"),S("systemDecimalsValue"),S("abortTradeFactor"),S("priceTickMultiplier"),S("priceTick"),S("minSeparateNumerator"),S("minSeparateDenominator"),S("tradeFeeNumerator"),S("tradeFeeDenominator"),S("pnlNumerator"),S("pnlDenominator"),S("swapFeeNumerator"),S("swapFeeDenominator"),S("baseNeedTakePnl"),S("quoteNeedTakePnl"),S("quoteTotalPnl"),S("baseTotalPnl"),S("poolOpenTime"),S("punishPcAmount"),S("punishCoinAmount"),S("orderbookToInitTime"),E("swapBaseInAmount"),E("swapQuoteOutAmount"),E("swapQuoteInAmount"),E("swapBaseOutAmount"),S("swapQuote2BaseFee"),S("swapBase2QuoteFee"),B("baseVault"),B("quoteVault"),B("baseMint"),B("quoteMint"),B("lpMint"),B("modelDataAccount"),B("openOrders"),B("marketId"),B("marketProgramId"),B("targetOrders"),B("owner"),ee(S(),64,"padding")]),Sn={4:rr,5:sr};import{ComputeBudgetProgram as Tr,PublicKey as qi,Transaction as xt,TransactionInstruction as $e}from"@solana/web3.js";import Pe from"bn.js";import{PublicKey as ar}from"@solana/web3.js";var xi="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",cr=new ar(xi),hi={[xi]:3},Ri={3:cr};var ur=O([ge(5),ge(8),B("ownAddress"),S("vaultSignerNonce"),B("baseMint"),B("quoteMint"),B("baseVault"),S("baseDepositsTotal"),S("baseFeesAccrued"),B("quoteVault"),S("quoteDepositsTotal"),S("quoteFeesAccrued"),S("quoteDustThreshold"),B("requestQueue"),B("eventQueue"),B("bids"),B("asks"),S("baseLotSize"),S("quoteLotSize"),S("feeRateBps"),S("referrerRebatesAccrued"),ge(7)]),Bi={3:ur};import{PublicKey as mr}from"@solana/web3.js";var Qt=z.from("Serum"),mt=class{static getProgramId(e){let t=Ri[e];return Qt.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=hi[t];return Qt.assertArgument(!!n,"invalid program id","programId",t),n}static getStateLayout(e){let t=Bi[e];return Qt.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let n=[t.toBuffer()],i=0,r;for(;i<100;){try{let o=n.concat(Buffer.from([i]),Buffer.alloc(7));r=mr.createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;i++;continue}return{publicKey:r,nonce:i}}return Qt.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}};import{PublicKey as lr}from"@solana/web3.js";var We=new lr("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),je=5e4,dr=O([S("x"),S("y"),S("price")]),pr=O([S("accountType"),S("status"),S("multiplier"),S("validDataCount"),ee(dr,je,"DataElement")]);function br(p,e){return[0,je-2]}function yr(p){return[0,je-2]}function fr(p){return[0,je-2]}function Ar(p,e,t){let[n,i]=br(e,t),r=n,o=i,a=0,c=e*p.multiplier/t;for(;r<=o;){if(a=Math.floor((o+r)/2),a===0||a>=je-2)return[a,a,!1];let u=p.DataElement[a].x*p.multiplier/p.DataElement[a].y,m=p.DataElement[a-1].x*p.multiplier/p.DataElement[a-1].y,b=p.DataElement[a+1].x*p.multiplier/p.DataElement[a+1].y;if(c===u)return[a,a,!0];if(c===m)return[a-1,a-1,!0];if(c===b)return[a+1,a+1,!0];if(c<m)o=a-1;else{if(c>m&&c<u)return[a-1,a,!0];if(c>u&&c<b)return[a,a+1,!0];r=a+1}}return[a,a,!1]}function gn(p,e,t){let[n,i,r]=Ar(p,e,t);if(!r)return 0;if(n===i){let o=p.DataElement[n].x;return e*p.multiplier/o}else{let o=p.DataElement[n].x,a=p.DataElement[n].y,c=p.DataElement[i].x,u=p.DataElement[i].y,m=t*(c*a-o*u),b=o*m,l=(c-o)*(e*a-o*t)*u,y=b+l;return e*p.multiplier*m/y}}function Je(p,e,t){return e*p.multiplier/t}function Ci(p,e,t){return e*t/p.multiplier}function Sr(p,e){let[t,n]=yr(e),i=t,r=n,o=0,a=e;for(;i<r;){if(o=Math.floor((r+i)/2),o<=0||o>je-2)return[o,o,!1];let c=p.DataElement[o].x,u=p.DataElement[o-1].x,m=p.DataElement[o+1].x;if(a===c)return[o,o,!0];if(a===u)return[o-1,o-1,!0];if(a===m)return[o+1,o+1,!0];if(a<u)r=o-1;else{if(a>u&&a<c)return[o-1,o,!0];if(a>c&&a<m)return[o,o+1,!0];i=o+1}}return[o,o,!1]}function gr(p,e){let[t,n]=fr(e),i=t,r=n,o=0,a=e;for(;i<=r;){if(o=Math.floor((r+i)/2),o<=0||o>=je-2)return[o,o,!1];let c=p.DataElement[o].y,u=p.DataElement[o-1].y,m=p.DataElement[o+1].y;if(a===c)return[o,o,!0];if(a===u)return[o-1,o-1,!0];if(a===m)return[o+1,o+1,!0];if(a<m)i=o+1;else{if(a<u&&a>c)return[o-1,o,!0];if(a<c&&a>m)return[o,o+1,!0];r=o-1}}return[o,o,!1]}function Di(p,e,t,n){let i=n?e+t:e-t,[r,o,a]=Sr(p,i);if(!a)return[0,0,!1,a];if(r===o)return[p.DataElement[o].price,p.DataElement[o].y,!1,a];{let c=p.DataElement[r].x,u=p.DataElement[o].x,m=p.DataElement[r].price,b=p.DataElement[o].price,l=p.DataElement[r].y,y=p.DataElement[o].y;if(e>=c&&e<=u)return n?[b,y,!0,a]:[m,l,!0,a];{let f,d;return n?(f=m+(b-m)*(e-c)/(u-c),d=l-(i-c)*p.multiplier/b):(f=m+(b-m)*(e-c)/(u-c),d=y+(u-i)*p.multiplier/m),[f,d,!1,a]}}}function kr(p,e,t,n){let i=n?e-t:e+t,[r,o,a]=gr(p,i);if(!a)return[0,0,!1,a];if(r===o)return[p.DataElement[o].price,p.DataElement[o].x,!1,a];{let c=p.DataElement[r].x,u=p.DataElement[o].x,m=p.DataElement[r].price,b=p.DataElement[o].price,l=p.DataElement[r].y,y=p.DataElement[o].y;if(e>=y&&e<=l)return n?[b,u,!0,a]:[m,c,!0,a];{let f,d;return n?(f=m+(b-m)*(l-e)/(l-y),d=c+b*(l-i)/p.multiplier):(f=m+(b-m)*(l-e)/(l-y),d=u-m*(i-y)/p.multiplier),[f,d,!1,a]}}}function Pr(p,e){let t=Di(p,e,0,!1);return t[3]?t[0]:0}function Ni(p,e,t,n){let i=gn(p,e,t),r=Je(p,e,i),o=Je(p,t,i),a=Je(p,n,i),c=!0,[u,m,b,l]=Di(p,r,a,c);if(!l)return 0;if(b)return n*p.multiplier/u;{let y=o-m;return Ci(p,y,i)}}function Oi(p,e,t,n){let i=gn(p,e,t),r=Je(p,e,i),o=Je(p,t,i),a=Je(p,n,i),c=!1,[u,m,b,l]=kr(p,o,a,c);if(!l)return 0;if(b)return n*u/p.multiplier;{let y=r-m;return Ci(p,y,i)}}function Ui(p){let e=pr.decode(p);return{accountType:e.accountType.toNumber(),status:e.status.toNumber(),multiplier:e.multiplier.toNumber(),validDataCount:e.validDataCount.toNumber(),DataElement:e.DataElement.map(t=>({x:t.x.toNumber(),y:t.y.toNumber(),price:t.price.toNumber()}))}}function Ei(p,e,t,n){let i=Pr(p,Je(p,e,gn(p,e,t)))/p.multiplier;return n?i:1/i}var x=z.from("Liquidity"),ht={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};function Pn(p){return N(this,null,function*(){if(ht.validDataCount===0&&p){let e=yield p.getAccountInfo(We);e&&(ht=Ui(e==null?void 0:e.data))}})}var Mi=new Pe(25),kn=new Pe(1e4),lt=class extends Ue{static getProgramId(e){let t=Li[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=wi[t];return x.assertArgument(!!n,"invalid program id","programId",t),n}static getSerumVersion(e){let t=Ii[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getStateLayout(e){let t=Sn[e];return x.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedId({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("amm_associated_seed","utf-8")],e);return n}static getAssociatedAuthority({programId:e}){return re([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}static getAssociatedBaseVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("coin_vault_associated_seed","utf-8")],e);return n}static getAssociatedQuoteVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("pc_vault_associated_seed","utf-8")],e);return n}static getAssociatedLpMint({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("lp_mint_associated_seed","utf-8")],e);return n}static getAssociatedLpVault({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("temp_lp_token_associated_seed","utf-8")],e);return n}static getAssociatedTargetOrders({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("target_associated_seed","utf-8")],e);return n}static getAssociatedWithdrawQueue({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("withdraw_associated_seed","utf-8")],e);return n}static getAssociatedOpenOrders({programId:e,marketId:t}){let{publicKey:n}=re([e.toBuffer(),t.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],e);return n}static getAssociatedPoolKeys({version:e,marketVersion:t,marketId:n,baseMint:i,quoteMint:r,baseDecimals:o,quoteDecimals:a,programId:c,marketProgramId:u}){let m=this.getAssociatedId({programId:c,marketId:n}),b=this.getAssociatedLpMint({programId:c,marketId:n}),{publicKey:l,nonce:y}=this.getAssociatedAuthority({programId:c}),f=this.getAssociatedBaseVault({programId:c,marketId:n}),d=this.getAssociatedQuoteVault({programId:c,marketId:n}),A=this.getAssociatedLpVault({programId:c,marketId:n}),k=this.getAssociatedOpenOrders({programId:c,marketId:n}),P=this.getAssociatedTargetOrders({programId:c,marketId:n}),L=this.getAssociatedWithdrawQueue({programId:c,marketId:n}),{publicKey:T}=mt.getAssociatedAuthority({programId:u,marketId:n});return{id:m,baseMint:i,quoteMint:r,lpMint:b,baseDecimals:o,quoteDecimals:a,lpDecimals:o,version:e,programId:c,authority:l,nonce:y,baseVault:f,quoteVault:d,lpVault:A,openOrders:k,targetOrders:P,withdrawQueue:L,marketVersion:t,marketProgramId:u,marketId:n,marketAuthority:T}}static makeAddLiquidityInstruction(e){let{poolKeys:t,userKeys:n,baseAmountIn:i,quoteAmountIn:r,fixedSide:o}=e,{version:a}=t;if(a===4||a===5){let c=O([v("instruction"),S("baseAmountIn"),S("quoteAmountIn"),S("fixedSide")]),u=Buffer.alloc(c.span);c.encode({instruction:3,baseAmountIn:H(i),quoteAmountIn:H(r),fixedSide:H(o==="base"?0:1)},u);let m=[I($,!1),g(t.id,!1),I(t.authority,!1),I(t.openOrders,!1),g(t.targetOrders,!1),g(t.lpMint,!1),g(t.baseVault,!1),g(t.quoteVault,!1)];return a===5&&m.push(g(We,!1)),m.push(I(t.marketId,!1),g(n.baseTokenAccount,!1),g(n.quoteTokenAccount,!1),g(n.lpTokenAccount,!1),I(n.owner,!0),I(t.marketEventQueue,!1)),new $e({programId:t.programId,keys:m,data:u})}return x.throwArgumentError("invalid version","poolKeys.version",a)}static makeAddLiquidityTransaction(e){return N(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountInA:r,amountInB:o,fixedSide:a,config:c}=e,{lpMint:u}=n,{tokenAccounts:m,owner:b,payer:l=b}=i;x.debug("amountInA:",r),x.debug("amountInB:",o),x.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","amountInA & amountInB",{amountInA:r.toFixed(),amountInB:o.toFixed()});let{bypassAssociatedCheck:y}=q({bypassAssociatedCheck:!1},c),f=r instanceof M?r.token:h.WSOL,d=o instanceof M?o.token:h.WSOL,A=this._selectTokenAccount({tokenAccounts:m,mint:f.mint,owner:b,config:{associatedOnly:!1}}),k=this._selectTokenAccount({tokenAccounts:m,mint:d.mint,owner:b,config:{associatedOnly:!1}});x.assertArgument(!!A||!!k,"cannot found target token accounts","tokenAccounts",m);let P=this._selectTokenAccount({tokenAccounts:m,mint:u,owner:b}),L=[f,d],T=[A,k],w=[r.raw,o.raw],[D]=this._getAmountsSide(r,o,n),R="base";if(D==="quote")if(L.reverse(),T.reverse(),w.reverse(),a==="a")R="quote";else if(a==="b")R="base";else return x.throwArgumentError("invalid fixedSide","fixedSide",a);else if(D==="base")if(a==="a")R="base";else if(a==="b")R="quote";else return x.throwArgumentError("invalid fixedSide","fixedSide",a);else return x.throwArgumentError("invalid fixedSide","fixedSide",a);let[C,K]=L,[Q,j]=T,[Y,te]=w,oe=[],ne=[],Re=[],Ct=yield this._handleTokenAccount({connection:t,side:"in",amount:Y,mint:C.mint,tokenAccount:Q,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:Re,bypassAssociatedCheck:y}),Dt=yield this._handleTokenAccount({connection:t,side:"in",amount:te,mint:K.mint,tokenAccount:j,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:Re,bypassAssociatedCheck:y}),dt=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:u,tokenAccount:P,owner:b,payer:l,frontInstructions:oe,endInstructions:ne,signers:Re,bypassAssociatedCheck:y});oe.push(this.makeAddLiquidityInstruction({poolKeys:n,userKeys:{baseTokenAccount:Ct,quoteTokenAccount:Dt,lpTokenAccount:dt,owner:b},baseAmountIn:Y,quoteAmountIn:te,fixedSide:R}));let Tn=new xt;return Tn.add(...oe,...ne),{transaction:Tn,signers:Re}})}static makeRemoveLiquidityInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i}=e,{version:r}=t;if(r===4||r===5){let o=O([v("instruction"),S("amountIn")]),a=Buffer.alloc(o.span);o.encode({instruction:4,amountIn:H(i)},a);let c=[I($,!1),g(t.id,!1),I(t.authority,!1),g(t.openOrders,!1),g(t.targetOrders,!1),g(t.lpMint,!1),g(t.baseVault,!1),g(t.quoteVault,!1)];return r===5?c.push(g(We,!1)):(c.push(g(t.withdrawQueue,!1)),c.push(g(t.lpVault,!1))),c.push(I(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBaseVault,!1),g(t.marketQuoteVault,!1),I(t.marketAuthority,!1),g(n.lpTokenAccount,!1),g(n.baseTokenAccount,!1),g(n.quoteTokenAccount,!1),I(n.owner,!0),g(t.marketEventQueue,!1),g(t.marketBids,!1),g(t.marketAsks,!1)),new $e({programId:t.programId,keys:c,data:a})}return x.throwArgumentError("invalid version","poolKeys.version",r)}static makeRemoveLiquidityTransaction(e){return N(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,config:o}=e,{baseMint:a,quoteMint:c,lpMint:u}=n,{tokenAccounts:m,owner:b,payer:l=b}=i;x.debug("amountIn:",r),x.assertArgument(!r.isZero(),"amount must greater than zero","amountIn",r.toFixed()),x.assertArgument(r instanceof M&&r.token.mint.equals(u),"amountIn's token not match lpMint","amountIn",r);let y=this._selectTokenAccount({tokenAccounts:m,mint:u,owner:b,config:{associatedOnly:!1}});if(!y)return x.throwArgumentError("cannot found lpTokenAccount","tokenAccounts",m);let f=this._selectTokenAccount({tokenAccounts:m,mint:a,owner:b}),d=this._selectTokenAccount({tokenAccounts:m,mint:c,owner:b}),{bypassAssociatedCheck:A}=q({bypassAssociatedCheck:!1},o),k=[],P=[],L=[],T=y,w=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:a,tokenAccount:f,owner:b,payer:l,frontInstructions:k,endInstructions:P,signers:L,bypassAssociatedCheck:A}),D=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:c,tokenAccount:d,owner:b,payer:l,frontInstructions:k,endInstructions:P,signers:L,bypassAssociatedCheck:A});k.push(Tr.requestUnits({units:4e5,additionalFee:0})),k.push(this.makeRemoveLiquidityInstruction({poolKeys:n,userKeys:{lpTokenAccount:T,baseTokenAccount:w,quoteTokenAccount:D,owner:b},amountIn:r.raw}));let R=new xt;return R.add(...k,...P),{transaction:R,signers:L}})}static makeSwapInstruction(e){let{poolKeys:t,userKeys:n,amountIn:i,amountOut:r,fixedSide:o}=e,{version:a}=t;return a===4||a===5?o==="in"?this.makeSwapFixedInInstruction({poolKeys:t,userKeys:n,amountIn:i,minAmountOut:r},a):o==="out"?this.makeSwapFixedOutInstruction({poolKeys:t,userKeys:n,maxAmountIn:i,amountOut:r},a):x.throwArgumentError("invalid params","params",e):x.throwArgumentError("invalid version","poolKeys.version",a)}static makeSwapFixedInInstruction({poolKeys:e,userKeys:t,amountIn:n,minAmountOut:i},r){let o=O([v("instruction"),S("amountIn"),S("minAmountOut")]),a=Buffer.alloc(o.span);o.encode({instruction:9,amountIn:H(n),minAmountOut:H(i)},a);let c=[I($,!1),g(e.id,!1),I(e.authority,!1),g(e.openOrders,!1)];return r===4&&c.push(g(e.targetOrders,!1)),c.push(g(e.baseVault,!1),g(e.quoteVault,!1)),r===5&&c.push(g(We,!1)),c.push(I(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),I(e.marketAuthority,!1),g(t.tokenAccountIn,!1),g(t.tokenAccountOut,!1),I(t.owner,!0)),new $e({programId:e.programId,keys:c,data:a})}static makeSwapFixedOutInstruction({poolKeys:e,userKeys:t,maxAmountIn:n,amountOut:i},r){let o=O([v("instruction"),S("maxAmountIn"),S("amountOut")]),a=Buffer.alloc(o.span);o.encode({instruction:11,maxAmountIn:H(n),amountOut:H(i)},a);let c=[I($,!1),g(e.id,!1),I(e.authority,!1),g(e.openOrders,!1),g(e.targetOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1)];return r===5&&c.push(g(We,!1)),c.push(I(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),I(e.marketAuthority,!1),g(t.tokenAccountIn,!1),g(t.tokenAccountOut,!1),I(t.owner,!0)),new $e({programId:e.programId,keys:c,data:a})}static makeSwapTransaction(e){return N(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,amountIn:r,amountOut:o,fixedSide:a,config:c}=e,{tokenAccounts:u,owner:m,payer:b=m}=i;x.debug("amountIn:",r),x.debug("amountOut:",o),x.assertArgument(!r.isZero()&&!o.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:r.toFixed(),amountOut:o.toFixed()});let{bypassAssociatedCheck:l}=q({bypassAssociatedCheck:!1},c),y=r instanceof M?r.token:h.WSOL,f=o instanceof M?o.token:h.WSOL,d=this._selectTokenAccount({tokenAccounts:u,mint:y.mint,owner:m,config:{associatedOnly:!1}}),A=this._selectTokenAccount({tokenAccounts:u,mint:f.mint,owner:m}),[k,P]=[r.raw,o.raw],L=[],T=[],w=[],D=yield this._handleTokenAccount({connection:t,side:"in",amount:k,mint:y.mint,tokenAccount:d,owner:m,payer:b,frontInstructions:L,endInstructions:T,signers:w,bypassAssociatedCheck:l}),R=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:f.mint,tokenAccount:A,owner:m,payer:b,frontInstructions:L,endInstructions:T,signers:w,bypassAssociatedCheck:l});L.push(this.makeSwapInstruction({poolKeys:n,userKeys:{tokenAccountIn:D,tokenAccountOut:R,owner:m},amountIn:k,amountOut:P,fixedSide:a}));let C=new xt;return C.add(...L,...T),{transaction:C,signers:w}})}static makeCreatePoolInstruction(e){let{poolKeys:t}=e,{version:n}=t;return n===4?this.makeCreatePoolInstructionV4(e):x.throwArgumentError("invalid version","poolKeys.version",n)}static makeCreatePoolInstructionV4({poolKeys:e,userKeys:t}){let n=O([v("instruction"),v("nonce")]),i=Buffer.alloc(n.span);n.encode({instruction:10,nonce:e.nonce},i);let r=[I($,!1),I(Te,!1),I(At,!1),g(e.targetOrders,!1),g(e.withdrawQueue,!1),I(e.authority,!1),g(e.lpMint,!1),I(e.baseMint,!1),I(e.quoteMint,!1),g(e.baseVault,!1),g(e.quoteVault,!1),g(e.lpVault,!1),I(e.marketId,!1),g(t.payer,!0)];return new $e({programId:e.programId,keys:r,data:i})}static makeCreatePoolTransaction(e){let t=new xt,n=[];return t.add(this.makeCreatePoolInstruction(e)),{transaction:t,signers:n}}static makeInitPoolInstruction(e){let{poolKeys:t}=e,{version:n}=t;return n===4?this.makeInitPoolInstructionV4(e):x.throwArgumentError("invalid version","poolKeys.version",n)}static makeInitPoolInstructionV4({poolKeys:e,userKeys:t,startTime:n}){let i=O([v("instruction"),v("nonce"),S("startTime")]),r=Buffer.alloc(i.span);i.encode({instruction:0,nonce:e.nonce,startTime:H(n)},r);let o=[I($,!1),I(Te,!1),I(At,!1),g(e.id,!1),I(e.authority,!1),g(e.openOrders,!1),g(e.lpMint,!1),I(e.baseMint,!1),I(e.quoteMint,!1),I(e.baseVault,!1),I(e.quoteVault,!1),g(e.withdrawQueue,!1),g(e.targetOrders,!1),g(t.lpTokenAccount,!1),I(e.lpVault,!1),I(e.marketProgramId,!1),I(e.marketId,!1),g(t.payer,!0)];return new $e({programId:e.programId,keys:o,data:r})}static makeInitPoolTransaction(e){return N(this,null,function*(){let{connection:t,poolKeys:n,userKeys:i,baseAmount:r,quoteAmount:o,startTime:a=0,config:c}=e,{baseMint:u,quoteMint:m,lpMint:b,baseVault:l,quoteVault:y}=n,{tokenAccounts:f,owner:d,payer:A=d}=i,{bypassAssociatedCheck:k}=q({bypassAssociatedCheck:!1},c),P=this._selectTokenAccount({tokenAccounts:f,mint:u,owner:d,config:{associatedOnly:!1}}),L=this._selectTokenAccount({tokenAccounts:f,mint:m,owner:d,config:{associatedOnly:!1}});x.assertArgument(!!P||!!L,"cannot found target token accounts","tokenAccounts",f);let T=this._selectTokenAccount({tokenAccounts:f,mint:b,owner:d}),w=[],D=[],R=[],C=yield this._handleTokenAccount({connection:t,side:"in",amount:r.raw,mint:u,tokenAccount:P,owner:d,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k}),K=yield this._handleTokenAccount({connection:t,side:"in",amount:o.raw,mint:m,tokenAccount:L,owner:d,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k}),Q=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:b,tokenAccount:T,owner:d,payer:A,frontInstructions:w,endInstructions:D,signers:R,bypassAssociatedCheck:k});w.push(se.makeTransferInstruction({source:C,destination:l,owner:d,amount:r.raw})),w.push(se.makeTransferInstruction({source:K,destination:y,owner:d,amount:o.raw})),w.push(this.makeInitPoolInstruction({poolKeys:n,userKeys:{lpTokenAccount:Q,payer:A},startTime:a}));let j=new xt;return j.add(...w,...D),{transaction:j,signers:R}})}static makeSimulatePoolInfoInstruction({poolKeys:e}){let t=O([v("instruction"),v("simulateType")]),n=Buffer.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let i=[I(e.id,!1),I(e.authority,!1),I(e.openOrders,!1),I(e.baseVault,!1),I(e.quoteVault,!1),I(e.lpMint,!1),I(e.marketId,!1),I(e.marketEventQueue,!1)];return new $e({programId:e.programId,keys:i,data:n})}static isV4(e){return e.withdrawQueue!==void 0}static fetchAllPoolKeys(e,t){return N(this,null,function*(){let n=Object.keys(Sn).map(u=>{let m=Number(u),b=this.getSerumVersion(m),l=mt.getProgramId(b);return{version:m,programId:this.getProgramId(m),serumVersion:b,serumProgramId:l,stateLayout:this.getStateLayout(m)}}),i=[];try{i=yield Promise.all(n.map(({programId:u,version:m,serumVersion:b,serumProgramId:l,stateLayout:y})=>e.getProgramAccounts(u,{filters:[{dataSize:y.span}]}).then(f=>f.map(d=>Se(q({},d),{version:m,programId:u,serumVersion:b,serumProgramId:l,stateLayout:y})))))}catch(u){if(u instanceof Error)return x.throwError("failed to fetch all liquidity pools",z.errors.RPC_ERROR,{message:u.message})}let r=i.flat(),o=[];for(let{pubkey:u,account:m,version:b,programId:l,serumVersion:y,serumProgramId:f,stateLayout:d}of r){x.assertArgument(!!m,"empty state account info","pool.id",u);let{data:A}=m;x.assertArgument(A.length===d.span,"invalid state data length","pool.id",u);let k=d.decode(A),{status:P,baseMint:L,quoteMint:T,baseDecimal:w,quoteDecimal:D,lpMint:R,openOrders:C,targetOrders:K,baseVault:Q,quoteVault:j,marketId:Y}=k,te,oe;if(this.isV4(k)?(te=k.withdrawQueue,oe=k.lpVault):(te=qi.default,oe=qi.default),P.isZero())continue;let ne=lt.getAssociatedPoolKeys({version:b,marketVersion:y,marketId:Y,baseMint:L,baseDecimals:w.toNumber(),quoteMint:T,quoteDecimals:D.toNumber(),programId:l,marketProgramId:f});o.push({id:u,baseMint:L,quoteMint:T,baseDecimals:ne.baseDecimals,quoteDecimals:ne.quoteDecimals,lpDecimals:ne.lpDecimals,lpMint:R,version:b,programId:l,authority:ne.authority,openOrders:C,targetOrders:K,baseVault:Q,quoteVault:j,withdrawQueue:te,lpVault:oe,marketVersion:y,marketProgramId:f,marketId:Y,marketAuthority:ne.marketAuthority})}let a=[];try{a=yield Oe(e,o.map(({marketId:u})=>u),t)}catch(u){if(u instanceof Error)return x.throwError("failed to fetch markets",z.errors.RPC_ERROR,{message:u.message})}x.assertArgument(a.length===o.length,"markets count not equal to pools","markets.length",a.length);let c=[];for(let u in a){let m=o[u],b=a[u],{id:l,marketVersion:y}=m;if(!b)return x.throwArgumentError("empty market account info","pool.id",l);let{data:f}=b,{state:d}=mt.getLayouts(y);x.assertArgument(f.length===d.span,"invalid market data length","pool.id",l);let{baseVault:A,quoteVault:k,bids:P,asks:L,eventQueue:T}=d.decode(f);c.push(Se(q({},m),{marketBaseVault:A,marketQuoteVault:k,marketBids:P,marketAsks:L,marketEventQueue:T}))}return c})}static fetchInfo(n){return N(this,arguments,function*({connection:e,poolKeys:t}){let i=yield this.fetchMultipleInfo({connection:e,pools:[t]});return x.assertArgument(i.length===1,`fetchInfo failed, ${i.length} pools found`,"poolKeys.id",t.id),i[0]})}static fetchMultipleInfo(i){return N(this,arguments,function*({connection:e,pools:t,config:n}){yield Pn(e);let r=t.map(c=>this.makeSimulatePoolInfoInstruction({poolKeys:c}));return(yield vt(e,r,"GetPoolData")).map(c=>{let u=Ft(c,"GetPoolData"),m=new Pe(le(u,"status")),b=Number(le(u,"coin_decimals")),l=Number(le(u,"pc_decimals")),y=Number(le(u,"lp_decimals")),f=new Pe(le(u,"pool_coin_amount")),d=new Pe(le(u,"pool_pc_amount")),A=new Pe(le(u,"pool_lp_supply")),k="0";try{k=le(u,"pool_open_time")}catch(P){}return{status:m,baseDecimals:b,quoteDecimals:l,lpDecimals:y,baseReserve:f,quoteReserve:d,lpSupply:A,startTime:new Pe(k)}})})}static getEnabledFeatures(e){let{status:t}=e,n=t.toNumber();if(n===0)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===1)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===2)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===3)return{swap:!1,addLiquidity:!1,removeLiquidity:!0};if(n===4)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===5)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===6)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===7){let{startTime:i}=e;return Date.now()/1e3<i.toNumber()?{swap:!1,addLiquidity:!0,removeLiquidity:!0}:{swap:!0,addLiquidity:!0,removeLiquidity:!0}}else return{swap:!1,addLiquidity:!1,removeLiquidity:!1}}static includesToken(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)||e.mint.equals(i)}static _getTokenSide(e,t){let{baseMint:n,quoteMint:i}=t;return e.mint.equals(n)?"base":e.mint.equals(i)?"quote":x.throwArgumentError("token not match with pool","params",{token:e.mint,baseMint:n,quoteMint:i})}static _getTokensSide(e,t,n){let{baseMint:i,quoteMint:r}=n,o=this._getTokenSide(e,n),a=this._getTokenSide(t,n);return x.assertArgument(o!==a,"tokens not match with pool","params",{tokenA:e.mint,tokenB:t.mint,baseMint:i,quoteMint:r}),[o,a]}static _getAmountSide(e,t){let n=e instanceof M?e.token:h.WSOL;return this._getTokenSide(n,t)}static _getAmountsSide(e,t,n){let i=e instanceof M?e.token:h.WSOL,r=t instanceof M?t.token:h.WSOL;return this._getTokensSide(i,r,n)}static computeAnotherAmount({poolKeys:e,poolInfo:t,amount:n,anotherCurrency:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;x.debug("baseReserve:",o.toString()),x.debug("quoteReserve:",a.toString());let c=n instanceof M?n.token:n.currency;x.debug("currencyIn:",c),x.debug("amount:",n.toFixed()),x.debug("anotherCurrency:",i),x.debug("slippage:",`${r.toSignificant()}%`);let u=this._getAmountSide(n,e);x.debug("input side:",u);let m=U;n.isZero()||(m=u==="base"?on(n.raw.mul(a),o):on(n.raw.mul(o),a));let l=new ke(Z).add(r).mul(m).quotient,y=i instanceof h?new M(i,m):new ae(i,m),f=i instanceof h?new M(i,l):new ae(i,l);return x.debug("anotheAmount:",y.toFixed()),x.debug("maxAnotheAmount:",f.toFixed()),{anotherAmount:y,maxAnotherAmount:f}}static _computePriceImpact(e,t,n){let i=e.raw.mul(t),r=i.sub(n).div(i);return new ke(r.numerator,r.denominator)}static getRate(e){let{baseReserve:t,quoteReserve:n,baseDecimals:i,quoteDecimals:r}=e;return new ie(new Me(i),t,new Me(r),n)}static computeAmountIn({poolKeys:e,poolInfo:t,amountOut:n,currencyIn:i,slippage:r}){let{baseReserve:o,quoteReserve:a}=t;x.debug("baseReserve:",o.toString()),x.debug("quoteReserve:",a.toString());let c=n instanceof M?n.token:n.currency;x.debug("currencyOut:",c),x.debug("amountOut:",n.toFixed()),x.debug("currencyIn:",i),x.debug("slippage:",`${r.toSignificant()}%`);let u=[o,a],m=this._getAmountSide(n,e);m==="base"&&u.reverse(),x.debug("output side:",m);let[b,l]=u,y=new ie(i,b,c,l);x.debug("currentPrice:",`1 ${i.symbol} \u2248 ${y.toFixed()} ${c.symbol}`),x.debug("currentPrice invert:",`1 ${c.symbol} \u2248 ${y.invert().toFixed()} ${i.symbol}`);let f=U,d=n.raw;if(!d.isZero()){d.gt(l)&&(d=l.sub(Z));let D=l.sub(d);f=b.mul(d).div(D).mul(kn).div(kn.sub(Mi))}let k=new ke(Z).add(r).mul(f).quotient,P=i instanceof h?new M(i,f):new ae(i,f),L=i instanceof h?new M(i,k):new ae(i,k);x.debug("amountIn:",P.toFixed()),x.debug("maxAmountIn:",L.toFixed());let T=null;!f.isZero()&&!d.isZero()&&(T=new ie(i,f,c,d),x.debug("executionPrice:",`1 ${i.symbol} \u2248 ${T.toFixed()} ${c.symbol}`),x.debug("executionPrice invert:",`1 ${c.symbol} \u2248 ${T.invert().toFixed()} ${i.symbol}`));let w=this._computePriceImpact(y,f,d);return x.debug("priceImpact:",`${w.toSignificant()}%`),{amountIn:P,maxAmountIn:L,currentPrice:y,executionPrice:T,priceImpact:w}}},Ae=lt;Ae.computeAmountOut=({poolKeys:e,poolInfo:t,amountIn:n,currencyOut:i,slippage:r})=>{let o=n instanceof M?n.token:h.WSOL,a=i instanceof h?i:h.WSOL;x.assertArgument(lt.includesToken(o,e)&&lt.includesToken(a,e),"token not match with pool","poolKeys",{poolKeys:e,tokenIn:o,tokenOut:a});let{baseReserve:c,quoteReserve:u}=t;x.debug("baseReserve:",c.toString()),x.debug("quoteReserve:",u.toString());let m=n instanceof M?n.token:n.currency;x.debug("currencyIn:",m),x.debug("amountIn:",n.toFixed()),x.debug("currencyOut:",i),x.debug("slippage:",`${r.toSignificant()}%`);let b=[c,u],l=lt._getAmountSide(n,e);l==="quote"&&b.reverse(),x.debug("input side:",l);let[y,f]=b,d;if(e.version===4)d=new ie(m,y,i,f);else{let Y=Ei(ht,c.toNumber(),u.toNumber(),!1);l==="quote"?d=new ie(m,new Pe(Y*1e6),i,new Pe(1e6)):d=new ie(m,new Pe(1e6),i,new Pe(Y*1e6))}x.debug("currentPrice:",`1 ${m.symbol} \u2248 ${d.toFixed()} ${i.symbol}`),x.debug("currentPrice invert:",`1 ${i.symbol} \u2248 ${d.invert().toFixed()} ${m.symbol}`);let A=n.raw,k=U,P=U;if(!A.isZero())if(e.version===4){P=A.mul(Mi).div(kn);let Y=A.sub(P),te=y.add(Y);k=f.mul(Y).div(te)}else{P=A.mul(new Pe(2)).div(new Pe(1e4));let Y=A.sub(P);l==="quote"?k=new Pe(Ni(ht,u.toNumber(),c.toNumber(),Y.toNumber())):k=new Pe(Oi(ht,u.toNumber(),c.toNumber(),Y.toNumber()))}let T=new ke(Z).add(r).invert().mul(k).quotient,w=i instanceof h?new M(i,k):new ae(i,k),D=i instanceof h?new M(i,T):new ae(i,T);x.debug("amountOut:",w.toFixed()),x.debug("minAmountOut:",D.toFixed());let R=new ie(m,A.sub(P),i,k);!A.isZero()&&!k.isZero()&&(R=new ie(m,A.sub(P),i,k),x.debug("executionPrice:",`1 ${m.symbol} \u2248 ${R.toFixed()} ${i.symbol}`),x.debug("executionPrice invert:",`1 ${i.symbol} \u2248 ${R.invert().toFixed()} ${m.symbol}`));let C=R.denominator.mul(d.numerator),K=R.numerator.mul(d.denominator).sub(C).abs(),Q=new ke(K,C);x.debug("priceImpact:",`${Q.toSignificant()}%`);let j=m instanceof h?new M(m,P):new ae(m,P);return{amountOut:w,minAmountOut:D,currentPrice:d,executionPrice:R,priceImpact:Q,fee:j}};import{PublicKey as wr}from"@solana/web3.js";var Ki="routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS",Rt=new wr(Ki),Vi={[Ki]:1},_i={1:Rt},vi={1:4};import{PublicKey as Fi,Transaction as Wi,TransactionInstruction as Gi}from"@solana/web3.js";import{intersection as Yi,xor as Lr}from"lodash";var ye=z.from("Route"),Zt=class extends Ue{static getProgramId(e){let t=_i[e];return ye.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=Vi[t];return ye.assertArgument(!!n,"invalid program id","programId",t),n}static getLiquidityVersion(e){let t=vi[e];return ye.assertArgument(!!t,"invalid version","version",e),t}static getAssociatedMiddleStatusAccount({programId:e,fromPoolId:t,middleMint:n,owner:i}){let{publicKey:r}=re([t.toBuffer(),n.toBuffer(),i.toBuffer()],e);return r}static makeSwapInstruction(e){let{fixedSide:t}=e;return t==="in"?[this.makeSwapInFixedInInstruction(e),this.makeSwapOutFixedInInstruction(e)]:ye.throwArgumentError("invalid params","params",e)}static makeSwapInFixedInInstruction({fromPoolKeys:e,toPoolKeys:t,userKeys:n,amountIn:i,amountOut:r}){let o=O([v("instruction"),S("amountIn"),S("amountOut")]),a=Buffer.alloc(o.span),c;return e.version===4?(o.encode({instruction:0,amountIn:H(i),amountOut:H(r)},a),c=[I(Te,!1),I($,!1),I(e.programId,!1),g(e.id,!1),I(t.id,!1),I(e.authority,!1),g(e.openOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1),I(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.marketBaseVault,!1),g(e.marketQuoteVault,!1),I(e.marketAuthority,!1),g(n.inTokenAccount,!1),g(n.middleTokenAccount,!1),g(n.middleStatusAccount,!1),I(n.owner,!0)]):(o.encode({instruction:2,amountIn:H(i),amountOut:H(r)},a),c=[I(Te,!1),I($,!1),I(e.programId,!1),g(e.id,!1),I(t.id,!1),I(e.authority,!1),g(e.openOrders,!1),g(e.baseVault,!1),g(e.quoteVault,!1),I(We,!1),I(e.marketProgramId,!1),g(e.marketId,!1),g(e.marketBids,!1),g(e.marketAsks,!1),g(e.marketEventQueue,!1),g(e.id,!1),g(e.id,!1),g(e.id,!1),g(n.inTokenAccount,!1),g(n.middleTokenAccount,!1),g(n.middleStatusAccount,!1),I(n.owner,!0)]),new Gi({programId:Rt,keys:c,data:a})}static makeSwapOutFixedInInstruction({fromPoolKeys:e,toPoolKeys:t,userKeys:n}){let i=O([v("instruction")]),r=Buffer.alloc(i.span),o;return t.version===4?(i.encode({instruction:1},r),o=[I($,!1),I(t.programId,!1),I(e.id,!1),g(t.id,!1),I(t.authority,!1),g(t.openOrders,!1),g(t.baseVault,!1),g(t.quoteVault,!1),I(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBids,!1),g(t.marketAsks,!1),g(t.marketEventQueue,!1),g(t.marketBaseVault,!1),g(t.marketQuoteVault,!1),I(t.marketAuthority,!1),g(n.middleTokenAccount,!1),g(n.outTokenAccount,!1),g(n.middleStatusAccount,!1),I(n.owner,!0)]):(i.encode({instruction:3},r),o=[I($,!1),I(t.programId,!1),I(e.id,!1),g(t.id,!1),I(t.authority,!1),g(t.openOrders,!1),g(t.baseVault,!1),g(t.quoteVault,!1),I(We,!1),I(t.marketProgramId,!1),g(t.marketId,!1),g(t.marketBids,!1),g(t.marketAsks,!1),g(t.marketEventQueue,!1),g(t.id,!1),g(t.id,!1),g(t.id,!1),g(n.middleTokenAccount,!1),g(n.outTokenAccount,!1),g(n.middleStatusAccount,!1),I(n.owner,!0)]),new Gi({programId:Rt,keys:o,data:r})}static makeSwapTransaction(e){return N(this,null,function*(){let{connection:t,fromPoolKeys:n,toPoolKeys:i,userKeys:r,amountIn:o,amountOut:a,fixedSide:c,config:u}=e,{tokenAccounts:m,owner:b}=r;ye.debug("amountIn:",o),ye.debug("amountOut:",a),ye.assertArgument(!o.isZero()&&!a.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:o.toFixed(),amountOut:a.toFixed()});let{bypassAssociatedCheck:l}=q({bypassAssociatedCheck:!1},u),y=o instanceof M?o.token:h.WSOL,f=a instanceof M?a.token:h.WSOL,d=this._selectTokenAccount({tokenAccounts:m,mint:y.mint,owner:b,config:{associatedOnly:!1}}),A=this._selectTokenAccount({tokenAccounts:m,mint:f.mint,owner:b}),k=[n.baseMint.toBase58(),n.quoteMint.toBase58()],P=[i.baseMint.toBase58(),i.quoteMint.toBase58()],T=Yi(k,P)[0],w=new Fi(T),D=this._selectTokenAccount({tokenAccounts:m,mint:w,owner:b}),[R,C]=[o.raw,a.raw],K=[],Q=[],j=[],Y=yield this._handleTokenAccount({connection:t,side:"in",amount:R,mint:y.mint,tokenAccount:d,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l}),te=yield this._handleTokenAccount({connection:t,side:"out",amount:0,mint:f.mint,tokenAccount:A,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l}),oe=yield this._handleTokenAccount({connection:t,side:"in",amount:0,mint:w,tokenAccount:D,owner:b,frontInstructions:K,signers:Q,bypassAssociatedCheck:l});j.push(...this.makeSwapInstruction({fromPoolKeys:n,toPoolKeys:i,userKeys:{inTokenAccount:Y,outTokenAccount:te,middleTokenAccount:oe,middleStatusAccount:this.getAssociatedMiddleStatusAccount({programId:Rt,fromPoolId:n.id,middleMint:w,owner:b}),owner:b},amountIn:R,amountOut:C,fixedSide:c}));let ne=null,Re=null;return K.length>0&&(ne={transaction:new Wi().add(...K),signers:Q}),j.length>0&&(Re={transaction:new Wi().add(...j),signers:[]}),{setupTransaction:ne,swapTransaction:Re}})}static computeAmountOut({fromPoolKeys:e,toPoolKeys:t,fromPoolInfo:n,toPoolInfo:i,amountIn:r,currencyOut:o,slippage:a}){let{swap:c}=Ae.getEnabledFeatures(n),{swap:u}=Ae.getEnabledFeatures(i);ye.assertArgument(c&&u,"pools swap not enabled","pools",{fromPoolKeys:e,toPoolKeys:t,fromPoolInfo:n,toPoolInfo:i});let m=r instanceof M?r.token:h.WSOL,b=o instanceof h?o:h.WSOL;ye.assertArgument(Ae.includesToken(m,e)&&Ae.includesToken(b,t),"pools cannot be routed","pools",{fromPoolKeys:e,toPoolKeys:t});let l=[e.baseMint.toBase58(),e.quoteMint.toBase58()],y=[t.baseMint.toBase58(),t.quoteMint.toBase58()],f=[...l,...y],d=[n.baseDecimals,n.quoteDecimals,i.baseDecimals,i.quoteDecimals],A=m.mint.toBase58(),k=b.mint.toBase58(),P=Lr(l,y);ye.assertArgument(P.length===2&&P.includes(A)&&P.includes(k),"xor tokens not match","pools",{fromPoolKeys:e,toPoolKeys:t});let L=Yi(l,y);ye.assertArgument(L.length===1,"cannot found middle token of two pools","pools",{fromPoolKeys:e,toPoolKeys:t});let T=L[0],w=f.indexOf(T),D=d[w],R=new Fi(T),C=new h(R,D);ye.debug("from pool:",e),ye.debug("to pool:",t),ye.debug("intersection mints:",L),ye.debug("xor mints:",P),ye.debug("middleMint:",T);let{minAmountOut:K,priceImpact:Q,fee:j}=Ae.computeAmountOut({poolKeys:e,poolInfo:n,amountIn:r,currencyOut:C,slippage:a}),{amountOut:Y,minAmountOut:te,priceImpact:oe,fee:ne}=Ae.computeAmountOut({poolKeys:t,poolInfo:i,amountIn:K,currencyOut:o,slippage:a}),Re=null,Ct=r.raw,Dt=Y.raw,dt=r instanceof M?r.token:r.currency;return!Ct.isZero()&&!Dt.isZero()&&(Re=new ie(dt,Ct,o,Dt),ye.debug("executionPrice:",`1 ${dt.symbol} \u2248 ${Re.toFixed()} ${o.symbol}`),ye.debug("executionPrice invert:",`1 ${o.symbol} \u2248 ${Re.invert().toFixed()} ${dt.symbol}`)),{amountOut:Y,minAmountOut:te,executionPrice:Re,priceImpact:Q.add(oe),fee:[j,ne]}}};import{TOKEN_PROGRAM_ID as Xi}from"@solana/spl-token";import{PublicKey as He,TransactionInstruction as Hi}from"@solana/web3.js";function zi(p,e,t,n,i,r,o,a,c,u,m){let b=O([v("instruction"),S("amountIn"),S("amountOut")]),l=[{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Xi,isSigner:!1,isWritable:!1},{pubkey:new He(String(e.programId)),isSigner:!1,isWritable:!1},{pubkey:new He(String(e.id)),isSigner:!1,isWritable:!0},{pubkey:new He(String(t.id)),isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1}];if(e.version===6){let f=e;l.push({pubkey:f.ammConfig.id,isSigner:!1,isWritable:!1},{pubkey:f.id,isSigner:!1,isWritable:!0},{pubkey:f.mintA.mint.equals(a)?f.mintA.vault:f.mintB.vault,isSigner:!1,isWritable:!0},{pubkey:f.mintA.mint.equals(a)?f.mintB.vault:f.mintA.vault,isSigner:!1,isWritable:!0},{pubkey:f.observationId,isSigner:!1,isWritable:!0},...m.map(d=>({pubkey:d,isSigner:!1,isWritable:!0})))}else if(e.version===5){let f=Ie(e);l.push({pubkey:f.authority,isSigner:!1,isWritable:!1},{pubkey:f.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:f.id,isSigner:!1,isWritable:!0},{pubkey:new He("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),isSigner:!1,isWritable:!1},{pubkey:f.openOrders,isSigner:!1,isWritable:!0},{pubkey:f.baseVault,isSigner:!1,isWritable:!0},{pubkey:f.quoteVault,isSigner:!1,isWritable:!0},{pubkey:f.marketId,isSigner:!1,isWritable:!0},{pubkey:f.marketBids,isSigner:!1,isWritable:!0},{pubkey:f.marketAsks,isSigner:!1,isWritable:!0},{pubkey:f.marketEventQueue,isSigner:!1,isWritable:!0},{pubkey:f.id,isSigner:!1,isWritable:!0},{pubkey:f.id,isSigner:!1,isWritable:!0})}else if(e.version===4){let f=Ie(e);l.push({pubkey:f.authority,isSigner:!1,isWritable:!1},{pubkey:f.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:f.marketAuthority,isSigner:!1,isWritable:!1},{pubkey:f.openOrders,isSigner:!1,isWritable:!0},{pubkey:f.baseVault,isSigner:!1,isWritable:!0},{pubkey:f.quoteVault,isSigner:!1,isWritable:!0},{pubkey:f.marketId,isSigner:!1,isWritable:!0},{pubkey:f.marketBids,isSigner:!1,isWritable:!0},{pubkey:f.marketAsks,isSigner:!1,isWritable:!0},{pubkey:f.marketEventQueue,isSigner:!1,isWritable:!0},...f.marketProgramId.toString()==="srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"?[{pubkey:f.marketBaseVault,isSigner:!1,isWritable:!0},{pubkey:f.marketQuoteVault,isSigner:!1,isWritable:!0}]:[{pubkey:f.id,isSigner:!1,isWritable:!0},{pubkey:f.id,isSigner:!1,isWritable:!0}])}let y=Buffer.alloc(b.span);return b.encode({instruction:4,amountIn:c,amountOut:u},y),new Hi({keys:l,programId:p,data:y})}function Qi(p,e,t,n,i,r,o,a,c){let u=O([v("instruction")]),m=[{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Xi,isSigner:!1,isWritable:!1},{pubkey:new He(String(t.programId)),isSigner:!1,isWritable:!1},{pubkey:new He(String(t.id)),isSigner:!1,isWritable:!0},{pubkey:new He(String(e.id)),isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1}];if(t.version===6){let l=t;m.push({pubkey:l.ammConfig.id,isSigner:!1,isWritable:!1},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.mintA.mint.equals(a)?l.mintA.vault:l.mintB.vault,isSigner:!1,isWritable:!0},{pubkey:l.mintA.mint.equals(a)?l.mintB.vault:l.mintA.vault,isSigner:!1,isWritable:!0},{pubkey:l.observationId,isSigner:!1,isWritable:!0},...c.map(y=>({pubkey:y,isSigner:!1,isWritable:!0})))}else if(t.version===5){let l=Ie(t);m.push({pubkey:l.authority,isSigner:!1,isWritable:!1},{pubkey:l.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:new He("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),isSigner:!1,isWritable:!1},{pubkey:l.openOrders,isSigner:!1,isWritable:!0},{pubkey:l.baseVault,isSigner:!1,isWritable:!0},{pubkey:l.quoteVault,isSigner:!1,isWritable:!0},{pubkey:l.marketId,isSigner:!1,isWritable:!0},{pubkey:l.marketBids,isSigner:!1,isWritable:!0},{pubkey:l.marketAsks,isSigner:!1,isWritable:!0},{pubkey:l.marketEventQueue,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0})}else if(t.version===4){let l=Ie(t);m.push({pubkey:l.authority,isSigner:!1,isWritable:!1},{pubkey:l.marketProgramId,isSigner:!1,isWritable:!1},{pubkey:l.marketAuthority,isSigner:!1,isWritable:!1},{pubkey:l.openOrders,isSigner:!1,isWritable:!0},{pubkey:l.baseVault,isSigner:!1,isWritable:!0},{pubkey:l.quoteVault,isSigner:!1,isWritable:!0},{pubkey:l.marketId,isSigner:!1,isWritable:!0},{pubkey:l.marketBids,isSigner:!1,isWritable:!0},{pubkey:l.marketAsks,isSigner:!1,isWritable:!0},{pubkey:l.marketEventQueue,isSigner:!1,isWritable:!0},...l.marketProgramId.toString()==="srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"?[{pubkey:l.marketBaseVault,isSigner:!1,isWritable:!0},{pubkey:l.marketQuoteVault,isSigner:!1,isWritable:!0}]:[{pubkey:l.id,isSigner:!1,isWritable:!0},{pubkey:l.id,isSigner:!1,isWritable:!0}])}let b=Buffer.alloc(u.span);return u.encode({instruction:5},b),new Hi({keys:m,programId:p,data:b})}var jt=class extends Ue{static getAllRoute({inputMint:e,outputMint:t,apiPoolList:n,ammV3List:i}){var y,f;let r={},o={},a=[],c={};for(let d of i!=null?i:[]){if((d.mintA.mint.equals(e)&&d.mintB.mint.equals(t)||d.mintA.mint.equals(t)&&d.mintB.mint.equals(e))&&(a.push(d),o[d.id.toString()]=d),d.mintA.mint.equals(e)){let A=d.mintB.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:d.mintB.decimals}),c[A].in.push(d)}if(d.mintB.mint.equals(e)){let A=d.mintA.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:d.mintA.decimals}),c[A].in.push(d)}if(d.mintA.mint.equals(t)){let A=d.mintB.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:d.mintB.decimals}),c[A].out.push(d)}if(d.mintB.mint.equals(t)){let A=d.mintA.mint.toString();c[A]===void 0&&(c[A]={in:[],out:[],mDecimals:d.mintA.decimals}),c[A].out.push(d)}}let u=[],m=e.toString(),b=t.toString();for(let d of(y=(n!=null?n:{}).official)!=null?y:[])(d.baseMint===m&&d.quoteMint===b||d.baseMint===b&&d.quoteMint===m)&&(a.push(d),r[d.id]=d,u.push(d)),d.baseMint===m&&(c[d.quoteMint]===void 0&&(c[d.quoteMint]={in:[],out:[],mDecimals:d.quoteDecimals}),c[d.quoteMint].in.push(d)),d.quoteMint===m&&(c[d.baseMint]===void 0&&(c[d.baseMint]={in:[],out:[],mDecimals:d.baseDecimals}),c[d.baseMint].in.push(d)),d.baseMint===b&&(c[d.quoteMint]===void 0&&(c[d.quoteMint]={in:[],out:[],mDecimals:d.quoteDecimals}),c[d.quoteMint].out.push(d)),d.quoteMint===b&&(c[d.baseMint]===void 0&&(c[d.baseMint]={in:[],out:[],mDecimals:d.baseDecimals}),c[d.baseMint].out.push(d));let l=u.length===0;for(let d of(f=(n!=null?n:{}).unOfficial)!=null?f:[])(d.baseMint===m&&d.quoteMint===b||d.baseMint===b&&d.quoteMint===m)&&(a.push(d),r[d.id]=d,l&&u.push(d)),d.baseMint===m&&(c[d.quoteMint]===void 0&&(c[d.quoteMint]={in:[],out:[],mDecimals:d.quoteDecimals}),c[d.quoteMint].in.push(d)),d.quoteMint===m&&(c[d.baseMint]===void 0&&(c[d.baseMint]={in:[],out:[],mDecimals:d.baseDecimals}),c[d.baseMint].in.push(d)),d.baseMint===b&&(c[d.quoteMint]===void 0&&(c[d.quoteMint]={in:[],out:[],mDecimals:d.quoteDecimals}),c[d.quoteMint].out.push(d)),d.quoteMint===b&&(c[d.baseMint]===void 0&&(c[d.baseMint]={in:[],out:[],mDecimals:d.baseDecimals}),c[d.baseMint].out.push(d));for(let d of Object.keys(c)){if(c[d].in.length===1&&c[d].out.length===1&&String(c[d].in[0].id)===String(c[d].out[0].id)){delete c[d];continue}if(c[d].in.length===0||c[d].out.length===0){delete c[d];continue}let A=c[d];for(let k of A.in)for(let P of A.out)k.version===6&&o[k.id.toString()]===void 0?o[k.id.toString()]=k:k.version!==6&&r[k.id]===void 0&&(r[k.id]=k),P.version===6&&o[P.id.toString()]===void 0?o[P.id.toString()]=P:P.version!==6&&r[P.id]===void 0&&(r[P.id]=P)}return{directPath:a,addLiquidityPools:u,routePathDict:c,needSimulate:Object.values(r),needTickArray:Object.values(o)}}static fetchMultipleInfo(i){return N(this,arguments,function*({connection:e,pools:t,batchRequest:n=!0}){t.find(c=>c.version===5)&&(yield Pn(e));let r=t.map(c=>Ae.makeSimulatePoolInfoInstruction({poolKeys:Ie(c)})),o=yield vt(e,r,"GetPoolData",n),a={};for(let c of o){let u=Ft(c,"GetPoolData"),m=JSON.parse(u).amm_id,b=new Bt(le(u,"status")),l=Number(le(u,"coin_decimals")),y=Number(le(u,"pc_decimals")),f=Number(le(u,"lp_decimals")),d=new Bt(le(u,"pool_coin_amount")),A=new Bt(le(u,"pool_pc_amount")),k=new Bt(le(u,"pool_lp_supply")),P="0";try{P=le(u,"pool_open_time")}catch(L){}a[m]={ammId:m,status:b,baseDecimals:l,quoteDecimals:y,lpDecimals:f,baseReserve:d,quoteReserve:A,lpSupply:k,startTime:new Bt(P)}}return a})}static getAddLiquidityDefaultPool({addLiquidityPools:e,poolInfosCache:t}){if(e.length===0)return;if(e.length===1||(e.sort((i,r)=>r.version-i.version),e[0].version!==e[1].version))return e[0];let n=e.filter(i=>i.version===e[0].version);return n.sort((i,r)=>this.ComparePoolSize(i,r,t)),n[0]}static ComparePoolSize(e,t,n){let i=n[e.id],r=n[t.id];return i===void 0?1:r===void 0?-1:e.baseMint===t.baseMint?i.baseReserve.sub(r.baseReserve).gte(U)?-1:1:i.baseReserve.sub(r.quoteReserve).gte(U)?-1:1}static getAllRouteComputeAmountOut({inputTokenAmount:e,outputToken:t,directPath:n,routePathDict:i,simulateCache:r,tickCache:o,slippage:a,chainTime:c}){let u=e,m=[];for(let b of n)if(b.version===6)try{let{amountOut:l,minAmountOut:y,currentPrice:f,executionPrice:d,priceImpact:A,fee:k,remainingAccounts:P}=Fe.computeAmountOutFormat({poolInfo:b,tickArrayCache:o[b.id.toString()],amountIn:u,currencyOut:t,slippage:a});m.push({amountIn:u,amountOut:l,minAmountOut:y,currentPrice:f,executionPrice:d,priceImpact:A,fee:[k],remainingAccounts:[P],routeType:"amm",poolKey:[b],middleMint:void 0,poolReady:!0,poolType:"CLMM"})}catch(l){}else try{if(![1,6,7].includes(r[b.id].status.toNumber()))continue;let{amountOut:l,minAmountOut:y,currentPrice:f,executionPrice:d,priceImpact:A,fee:k}=Ae.computeAmountOut({poolKeys:Ie(b),poolInfo:r[b.id],amountIn:u,currencyOut:t,slippage:a});m.push({amountIn:u,amountOut:l,minAmountOut:y,currentPrice:f,executionPrice:d,priceImpact:A,fee:[k],routeType:"amm",poolKey:[b],remainingAccounts:[],middleMint:void 0,poolReady:r[b.id].startTime.toNumber()<c,poolType:b.version===5?"STABLE":void 0})}catch(l){}for(let[b,l]of Object.entries(i))for(let y of l.in)if(!(!r[y.id]&&!o[y.id.toString()])&&!(y.version!==6&&![1,6,7].includes(r[y.id].status.toNumber()))){for(let f of l.out)if(!(!r[f.id]&&!o[f.id.toString()])&&!(f.version!==6&&![1,6,7].includes(r[f.id].status.toNumber())))try{let{amountOut:d,minAmountOut:A,executionPrice:k,priceImpact:P,fee:L,remainingAccounts:T}=jt.computeAmountOut({middleMintInfo:{mint:new Jt(b),decimals:l.mDecimals},amountIn:u,currencyOut:t,slippage:a,fromPool:y,toPool:f,simulateCache:r,tickCache:o}),w=y.version===6?!0:r[y.id].startTime.toNumber()<c,D=f.version===6?!0:r[f.id].startTime.toNumber()<c,R=y.version===6?"CLMM":y.version===5?"STABLE":void 0,C=f.version===6?"CLMM":f.version===5?"STABLE":void 0;m.push({amountIn:u,amountOut:d,minAmountOut:A,currentPrice:void 0,executionPrice:k,priceImpact:P,fee:L,routeType:"route",poolKey:[y,f],remainingAccounts:T,middleMint:new Jt(b),poolReady:w&&D,poolType:[R,C]})}catch(d){}}return m.sort((b,l)=>b.amountOut.raw.sub(l.amountOut.raw).gt(U)?-1:1),m}static computeAmountOut({middleMintInfo:e,amountIn:t,currencyOut:n,slippage:i,fromPool:r,toPool:o,simulateCache:a,tickCache:c}){let u=new h(e.mint,e.decimals),m,b,l,y,f=new ke(0,100);if(r.version===6){let{minAmountOut:C,priceImpact:K,fee:Q,remainingAccounts:j}=Fe.computeAmountOutFormat({poolInfo:r,tickArrayCache:c[r.id.toString()],amountIn:t,currencyOut:u,slippage:f});m=C,b=K,l=Q,y=j}else{let{minAmountOut:C,priceImpact:K,fee:Q}=Ae.computeAmountOut({poolKeys:Ie(r),poolInfo:a[r.id],amountIn:t,currencyOut:u,slippage:f});m=C,b=K,l=Q}let d,A,k,P,L;if(o.version===6){let{amountOut:C,minAmountOut:K,priceImpact:Q,fee:j,remainingAccounts:Y}=Fe.computeAmountOutFormat({poolInfo:o,tickArrayCache:c[o.id.toString()],amountIn:m,currencyOut:n,slippage:i});d=C,A=K,k=Q,P=j,L=Y}else{let{amountOut:C,minAmountOut:K,priceImpact:Q,fee:j}=Ae.computeAmountOut({poolKeys:Ie(o),poolInfo:a[o.id],amountIn:m,currencyOut:n,slippage:i});d=C,A=K,k=Q,P=j}let T=null,w=t.raw,D=d.raw,R=t instanceof M?t.token:t.currency;return!w.isZero()&&!D.isZero()&&(T=new ie(R,w,n,D)),{minMiddleAmountOut:m,amountOut:d,minAmountOut:A,executionPrice:T,priceImpact:b.add(k),fee:[l,P],remainingAccounts:[y,L]}}static makeSwapInstruction({routeProgram:e,ownerInfo:t,inputMint:n,swapInfo:i}){if(i.routeType==="amm")if(i.poolKey[0].version===6){let r=i.poolKey[0],o=n.equals(r.mintA.mint)?Ce.add(Z):De.sub(Z);return Fe.makeSwapBaseInInstructions({poolInfo:r,ownerInfo:{wallet:t.wallet,tokenAccountA:r.mintA.mint.equals(n)?t.sourceToken:t.destinationToken,tokenAccountB:r.mintA.mint.equals(n)?t.destinationToken:t.sourceToken},inputMint:n,amountIn:i.amountIn.raw,amountOutMin:i.minAmountOut.raw,sqrtPriceLimitX64:o,remainingAccounts:i.remainingAccounts[0]})}else{let r=i.poolKey[0];return{signers:[],instructions:[Ae.makeSwapInstruction({poolKeys:Ie(r),userKeys:{tokenAccountIn:t.sourceToken,tokenAccountOut:t.destinationToken,owner:t.wallet},amountIn:i.amountIn.raw,amountOut:i.minAmountOut.raw,fixedSide:"in"})],address:{}}}else if(i.routeType==="route"){let r=i.poolKey[0],o=i.poolKey[1];return{signers:[],instructions:[zi(e,r,o,t.sourceToken,t.routeToken,t.userPdaAccount,t.wallet,n,i.amountIn.raw,i.minAmountOut.raw,i.remainingAccounts[0]),Qi(e,r,o,t.routeToken,t.destinationToken,t.userPdaAccount,t.wallet,i.middleMint,i.remainingAccounts[1])],address:{}}}else throw Error("route type error")}static makeSwapTranscation(r){return N(this,arguments,function*({connection:e,swapInfo:t,ownerInfo:n,checkTransaction:i}){let o=[],a=[],c=[],u=t.amountIn,m=t.amountOut,b=!(u instanceof M),l=!(m instanceof M),y=u instanceof M?u.token.mint:h.WSOL.mint,f=t.middleMint,d=m instanceof M?m.token.mint:h.WSOL.mint,A=new Jt("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),k=yield this._selectOrCreateTokenAccount({mint:y,tokenAccounts:b?[]:n.tokenAccounts,createInfo:b?{connection:e,payer:n.wallet,amount:u.raw,frontInstructions:o,endInstructions:a,signers:c}:void 0,owner:n.wallet,associatedOnly:b?!1:n.associatedOnly});if(k===void 0)throw Error("input account check error");let P=yield this._selectOrCreateTokenAccount({mint:d,tokenAccounts:n.tokenAccounts,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:l?a:void 0,signers:c},owner:n.wallet,associatedOnly:n.associatedOnly}),L;t.routeType==="route"&&(L=yield this._selectOrCreateTokenAccount({mint:f,tokenAccounts:n.tokenAccounts,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:a,signers:c},owner:n.wallet,associatedOnly:!1}));let T=this.makeSwapInstruction({routeProgram:A,inputMint:y,swapInfo:t,ownerInfo:{wallet:n.wallet,sourceToken:k,routeToken:L,destinationToken:P,userPdaAccount:t.poolKey.length===2?Zt.getAssociatedMiddleStatusAccount({programId:A,fromPoolId:new Jt(String(t.poolKey[0].id)),owner:n.wallet,middleMint:t.middleMint}):void 0}}),w=[],D=[...o,...T.instructions,...a],R=[...c,...T.signers];if(i)if(gt(D,[n.wallet,...R.map(C=>C.publicKey)]))w.push({transaction:new Ge().add(...D),signer:R});else{if(o.length>0&&w.push({transaction:new Ge().add(...o),signer:[...c]}),gt(T.instructions,[n.wallet]))w.push({transaction:new Ge().add(...T.instructions),signer:[...T.signers]});else for(let C of T.instructions)w.push({transaction:new Ge().add(C),signer:[...T.signers]});a.length>0&&w.push({transaction:new Ge().add(...a),signer:[]})}else t.routeType==="amm"?w.push({transaction:new Ge().add(...D),signer:R}):(o.length>0&&w.push({transaction:new Ge().add(...o),signer:[...c]}),w.push({transaction:new Ge().add(...T.instructions),signer:[...T.signers]}),a.length>0&&w.push({transaction:new Ge().add(...a),signer:[]}));return{transactions:w,address:q({},T.address)}})}};export{jt as TradeV2};
//# sourceMappingURL=trade.mjs.map